{"ast":null,"code":"var _jsxFileName = \"/Users/toddmitchell/src/youfoundation/dyc/dotyoucore/Youverse.Provisioning/ClientApp/src/templates/Provision/Provision.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Input from '../../components/Form/Input';\nimport Label from '../../components/Form/Label';\nimport Select from '../../components/Form/Select';\nimport ActionButton from '../../components/ui/Buttons/ActionButton';\nimport Arrow from '../../components/ui/Icons/Arrow/Arrow';\nimport { t } from '../../helpers/i18n/dictionary';\nimport useConfig from '../../hooks/config/useConfig';\nimport useDomain from '../../hooks/domain/useDomain';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Provision = () => {\n  _s();\n\n  const [provisionState, setProvisionState] = useState('Idle');\n  const [domain, setDomain] = useState({\n    prefix: 'tao.nahs',\n    domain: '.truvian.id'\n  });\n  const {\n    data: config\n  } = useConfig().fetch;\n  const {\n    reserve: {\n      mutateAsync: reserveDomain,\n      isLoading: reserveLoading,\n      reset: resetReserver,\n      isIdle: isReserveIdle\n    },\n    register: {\n      mutateAsync: registerDomain,\n      status: registerStatus,\n      reset: resetRegister\n    }\n  } = useDomain();\n  const [reservationId, setReservationId] = useState(undefined);\n  const [registrationId, setRegistrationId] = useState(undefined);\n\n  const doReserveDomain = async fullDomain => {\n    // Should be debounced\n    setProvisionState('Loading'); // Mutate\n\n    try {\n      const reservation = await reserveDomain({\n        domain: fullDomain\n      });\n\n      if (!reservation) {\n        // => Domain not available\n        setProvisionState('Idle');\n        return;\n      }\n\n      setReservationId(reservation);\n      setProvisionState('Idle');\n    } catch (ex) {\n      setProvisionState('Failed');\n      return;\n    }\n  };\n\n  const doRegister = async () => {\n    setProvisionState('Loading');\n\n    if (!reservationId) {\n      //If no id, reservation might not have happened yet\n      await doReserveDomain(domain.prefix + domain.domain);\n\n      if (!reservationId) {\n        // => Domain not available\n        setProvisionState('Idle');\n        return;\n      }\n    }\n\n    try {\n      const registration = await registerDomain({\n        domain: domain.prefix + domain.domain,\n        reservationId: reservationId\n      });\n\n      if (!registration) {\n        // => Registartion Failed\n        setProvisionState('Error');\n        return;\n      }\n\n      setRegistrationId(registration);\n      setProvisionState('Success');\n    } catch (ex) {\n      setProvisionState('Failed');\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"flex flex-grow flex-col\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto flex h-full min-h-full flex-grow flex-col px-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-20 min-h-[20rem]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"mb-10 text-4xl\",\n          children: [\"Younivere | Signup\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mt-1 block text-3xl text-slate-400\",\n            children: \"Create a new identity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), provisionState === 'Idle' || provisionState === 'Loading' ? /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            doRegister();\n            return false;\n          },\n          className: `${provisionState === 'Loading' ? 'pointer-events-none' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"-m-2 flex flex-row flex-wrap items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-1/2 p-2 md:w-2/5\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"prefix\",\n                children: \"Domain Prefix\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                name: \"prefix\",\n                type: \"text\",\n                defaultValue: domain.prefix,\n                debouncedOnChange: e => {\n                  const newDomain = { ...domain,\n                    prefix: e.target.value\n                  };\n                  setDomain(newDomain);\n                  doReserveDomain(newDomain.prefix + newDomain.domain);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-1/2 p-2 md:w-2/5\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                children: \"Domain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                onChange: e => {\n                  const newDomain = { ...domain,\n                    prefix: e.target.value\n                  };\n                  setDomain(newDomain);\n                  doReserveDomain(newDomain.prefix + newDomain.domain);\n                },\n                className: \"h-[2.66rem]\",\n                children: config === null || config === void 0 ? void 0 : config.managedDomains.map(domain => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: domain,\n                  children: domain\n                }, domain, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-auto flex-shrink-0 flex-grow p-2\",\n              children: /*#__PURE__*/_jsxDEV(ActionButton, {\n                state: registerStatus,\n                className: \"h-[2.66rem] w-full\",\n                isDisabled: !(domain.domain && domain.prefix && reservationId),\n                icon: \"send\",\n                children: t('Register your identity')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: domain.domain && domain.prefix && !reservationId && !reserveLoading && !isReserveIdle ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: t('This identity is no longer available, try again')\n              }, void 0, false) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this) : provisionState === 'Success' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your new identity is ready to use!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2\",\n            children: \" \\u1566(\\xF2_\\xF3\\u02C7)\\u1564\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Your new identity: \", domain.prefix + domain.domain]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `http://${domain.prefix + domain.domain}/firstrun?frt=${registrationId}`,\n            children: [\"click here to continue to \", domain.prefix + domain.domain]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this) : provisionState === 'Failed' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg\",\n            children: [t('The registration failed, please get in touch...'), ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/contact\",\n              className: \"underline underline-offset-2\",\n              children: [t('Contact options'), \" \", /*#__PURE__*/_jsxDEV(Arrow, {\n                className: \"ml-1 inline h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 42\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-8\",\n            children: t('Want to try again?')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: () => {\n              setProvisionState('Idle');\n              setReservationId(undefined);\n              setRegistrationId(undefined);\n              resetReserver();\n              resetRegister();\n            },\n            type: \"secondary\",\n            className: \"mt-3\",\n            icon: \"times\",\n            children: t('Start again')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg\",\n            children: [t('Mmh something went wrong, and we are not sure what happened exactly...'), ' ', t('Want to try again?')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: () => {\n              setProvisionState('Idle');\n              setReservationId(undefined);\n              setRegistrationId(undefined);\n              resetReserver();\n              resetRegister();\n            },\n            type: \"secondary\",\n            className: \"mt-3\",\n            icon: \"times\",\n            children: t('Start again')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Provision, \"oL/U6pEEFYtf0z8HkDAUiFz4tBg=\", false, function () {\n  return [useConfig, useDomain];\n});\n\n_c = Provision;\nexport default Provision;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provision\");","map":{"version":3,"names":["useState","Input","Label","Select","ActionButton","Arrow","t","useConfig","useDomain","Provision","provisionState","setProvisionState","domain","setDomain","prefix","data","config","fetch","reserve","mutateAsync","reserveDomain","isLoading","reserveLoading","reset","resetReserver","isIdle","isReserveIdle","register","registerDomain","status","registerStatus","resetRegister","reservationId","setReservationId","undefined","registrationId","setRegistrationId","doReserveDomain","fullDomain","reservation","ex","doRegister","registration","e","preventDefault","newDomain","target","value","managedDomains","map"],"sources":["/Users/toddmitchell/src/youfoundation/dyc/dotyoucore/Youverse.Provisioning/ClientApp/src/templates/Provision/Provision.tsx"],"sourcesContent":["import { useState } from 'react';\nimport Input from '../../components/Form/Input';\nimport Label from '../../components/Form/Label';\nimport Select from '../../components/Form/Select';\nimport ActionButton from '../../components/ui/Buttons/ActionButton';\nimport Arrow from '../../components/ui/Icons/Arrow/Arrow';\nimport { t } from '../../helpers/i18n/dictionary';\nimport useConfig from '../../hooks/config/useConfig';\nimport useDomain from '../../hooks/domain/useDomain';\n\ntype ProvisionState = 'Idle' | 'Loading' | 'Success' | 'Error' | 'Failed';\n\nconst Provision = () => {\n  const [provisionState, setProvisionState] = useState<ProvisionState>('Idle');\n  const [domain, setDomain] = useState<{ prefix: string; domain: string }>({\n    prefix: 'tao.nahs',\n    domain: '.truvian.id',\n  });\n  const { data: config } = useConfig().fetch;\n  const {\n    reserve: {\n      mutateAsync: reserveDomain,\n      isLoading: reserveLoading,\n      reset: resetReserver,\n      isIdle: isReserveIdle,\n    },\n    register: { mutateAsync: registerDomain, status: registerStatus, reset: resetRegister },\n  } = useDomain();\n  const [reservationId, setReservationId] = useState<string | undefined>(undefined);\n  const [registrationId, setRegistrationId] = useState<string | undefined>(undefined);\n\n  const doReserveDomain = async (fullDomain: string) => {\n    // Should be debounced\n    setProvisionState('Loading');\n\n    // Mutate\n    try {\n      const reservation = await reserveDomain({ domain: fullDomain });\n\n      if (!reservation) {\n        // => Domain not available\n        setProvisionState('Idle');\n        return;\n      }\n      setReservationId(reservation);\n\n      setProvisionState('Idle');\n    } catch (ex) {\n      setProvisionState('Failed');\n      return;\n    }\n  };\n\n  const doRegister = async () => {\n    setProvisionState('Loading');\n    if (!reservationId) {\n      //If no id, reservation might not have happened yet\n      await doReserveDomain(domain.prefix + domain.domain);\n\n      if (!reservationId) {\n        // => Domain not available\n        setProvisionState('Idle');\n        return;\n      }\n    }\n\n    try {\n      const registration = await registerDomain({\n        domain: domain.prefix + domain.domain,\n        reservationId: reservationId,\n      });\n\n      if (!registration) {\n        // => Registartion Failed\n        setProvisionState('Error');\n        return;\n      }\n\n      setRegistrationId(registration);\n      setProvisionState('Success');\n    } catch (ex) {\n      setProvisionState('Failed');\n      return;\n    }\n  };\n\n  return (\n    <section className=\"flex flex-grow flex-col\">\n      <div className=\"container mx-auto flex h-full min-h-full flex-grow flex-col px-5\">\n        <div className=\"mt-20 min-h-[20rem]\">\n          <h1 className=\"mb-10 text-4xl\">\n            Younivere | Signup\n            <span className=\"mt-1 block text-3xl text-slate-400\">Create a new identity</span>\n          </h1>\n          {provisionState === 'Idle' || provisionState === 'Loading' ? (\n            <form\n              onSubmit={(e) => {\n                e.preventDefault();\n                doRegister();\n                return false;\n              }}\n              className={`${provisionState === 'Loading' ? 'pointer-events-none' : ''}`}\n            >\n              <div className=\"-m-2 flex flex-row flex-wrap items-center\">\n                <div className=\"w-1/2 p-2 md:w-2/5\">\n                  <Label htmlFor=\"prefix\">Domain Prefix</Label>\n                  <Input\n                    name=\"prefix\"\n                    type=\"text\"\n                    defaultValue={domain.prefix}\n                    debouncedOnChange={(e) => {\n                      const newDomain = { ...domain, prefix: e.target.value };\n                      setDomain(newDomain);\n                      doReserveDomain(newDomain.prefix + newDomain.domain);\n                    }}\n                  />\n                </div>\n                <div className=\"w-1/2 p-2 md:w-2/5\">\n                  <Label>Domain</Label>\n                  <Select\n                    onChange={(e) => {\n                      const newDomain = { ...domain, prefix: e.target.value };\n                      setDomain(newDomain);\n                      doReserveDomain(newDomain.prefix + newDomain.domain);\n                    }}\n                    className=\"h-[2.66rem]\"\n                  >\n                    {config?.managedDomains.map((domain) => (\n                      <option key={domain} value={domain}>\n                        {domain}\n                      </option>\n                    ))}\n                  </Select>\n                </div>\n                <div className=\"mt-auto flex-shrink-0 flex-grow p-2\">\n                  <ActionButton\n                    state={registerStatus}\n                    className=\"h-[2.66rem] w-full\"\n                    isDisabled={!(domain.domain && domain.prefix && reservationId)}\n                    icon=\"send\"\n                  >\n                    {t('Register your identity')}\n                  </ActionButton>\n                </div>\n              </div>\n              <div className=\"mt-2\">\n                <p>\n                  {domain.domain &&\n                  domain.prefix &&\n                  !reservationId &&\n                  !reserveLoading &&\n                  !isReserveIdle ? (\n                    <>{t('This identity is no longer available, try again')}</>\n                  ) : null}\n                </p>\n              </div>\n            </form>\n          ) : provisionState === 'Success' ? (\n            <div className=\"text-center\">\n              <h3>Your new identity is ready to use!</h3>\n              <div className=\"p-2\"> ᕦ(ò_óˇ)ᕤ</div>\n              <h2>Your new identity: {domain.prefix + domain.domain}</h2>\n              <a href={`http://${domain.prefix + domain.domain}/firstrun?frt=${registrationId}`}>\n                click here to continue to {domain.prefix + domain.domain}\n              </a>\n            </div>\n          ) : provisionState === 'Failed' ? (\n            <div>\n              <p className=\"text-lg\">\n                {t('The registration failed, please get in touch...')}{' '}\n                <a href=\"/contact\" className=\"underline underline-offset-2\">\n                  {t('Contact options')} <Arrow className=\"ml-1 inline h-4 w-4\" />\n                </a>\n              </p>\n              <p className=\"mt-8\">{t('Want to try again?')}</p>\n\n              <ActionButton\n                onClick={() => {\n                  setProvisionState('Idle');\n                  setReservationId(undefined);\n                  setRegistrationId(undefined);\n                  resetReserver();\n                  resetRegister();\n                }}\n                type=\"secondary\"\n                className=\"mt-3\"\n                icon=\"times\"\n              >\n                {t('Start again')}\n              </ActionButton>\n            </div>\n          ) : (\n            <div>\n              <p className=\"text-lg\">\n                {t('Mmh something went wrong, and we are not sure what happened exactly...')}{' '}\n                {t('Want to try again?')}\n              </p>\n              <ActionButton\n                onClick={() => {\n                  setProvisionState('Idle');\n                  setReservationId(undefined);\n                  setRegistrationId(undefined);\n                  resetReserver();\n                  resetRegister();\n                }}\n                type=\"secondary\"\n                className=\"mt-3\"\n                icon=\"times\"\n              >\n                {t('Start again')}\n              </ActionButton>\n            </div>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Provision;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}