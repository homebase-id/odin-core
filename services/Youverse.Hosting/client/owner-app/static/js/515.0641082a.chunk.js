"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[515],{3561:function(e,r,n){n.d(r,{dU:function(){return C},L:function(){return j},ZP:function(){return N}});var t=n(9439),a=n(5274),o=n(2791),i=n(3990),c=n(4990),s=n(4395),l=n(1413),u=n(4164),d=n(3412),f=n(2851),h=n(8845),m=n(3225),v=n(184),x=function(e){var r=e.className;return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:r,children:(0,v.jsx)("path",{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"})})},p=function(e){var r=e.className;return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",className:r,children:(0,v.jsx)("path",{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"})})},g=n(7385),b=n(8930),y=function(e){var r=e.group,n=e.onChange,t=r===a.hh.Anonymous.toLowerCase()||r===a.hh.Authenticated.toLowerCase()?p:x;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"flex w-full rounded-lg border p-4 dark:border-slate-700",children:[(0,v.jsx)("div",{className:"mr-2 flex flex-col justify-center",children:(0,v.jsx)("div",{className:"rounded-full bg-slate-100 p-3 dark:bg-slate-600",children:(0,v.jsx)(t,{className:"h-5 w-5"})})}),(0,v.jsxs)("div",{className:"flex w-full flex-col",children:[(0,v.jsxs)(m.Z,{value:r.toLowerCase(),onChange:n,className:"w-full border-0 bg-transparent pl-0 dark:bg-transparent",children:[(0,v.jsx)("option",{value:"anonymous",children:(0,c.t)("Public")}),(0,v.jsx)("option",{value:"authenticated",children:(0,c.t)("Authenticated")}),(0,v.jsx)("option",{value:"connected",children:(0,c.t)("Connected")}),(0,v.jsx)("option",{value:"owner",children:(0,c.t)("Owner")})]}),(0,v.jsx)("p",{className:"pl-[0.2rem] text-sm text-slate-500",children:r===a.hh.Anonymous.toLowerCase()?(0,c.t)("Accessible by everyone on the internet"):r===a.hh.Authenticated.toLowerCase()?(0,c.t)("Only people that are authenticated"):r===a.hh.Connected.toLowerCase()?(0,c.t)("Only people that are connected to you"):(0,c.t)("Only you")})]})]})})},w=function(e){var r,n=e.title,i=e.confirmText,s=e.isOpen,m=e.acl,x=e.onConfirm,p=e.onCancel,w=(0,d.Z)("modal-container"),j=(0,o.useState)(m),C=(0,t.Z)(j,2),N=C[0],Z=C[1];if(!s)return null;var k=(0,v.jsx)(b.Z,{title:n,onClose:p,children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"mb-2 text-xl",children:(0,c.t)("General access")}),(0,v.jsx)(y,{onChange:function(e){var r=(0,l.Z)((0,l.Z)({},N),{},{requiredSecurityGroup:a.hh[(0,g.Ho)(e.target.value)]});!r.circleIdList||r.requiredSecurityGroup!==a.hh.Owner.toLowerCase()&&r.requiredSecurityGroup!==a.hh.Anonymous.toLowerCase()||(r.circleIdList=[]),Z(r)},group:null!==(r=N.requiredSecurityGroup.toLowerCase())&&void 0!==r?r:a.hh.Owner}),(0,v.jsxs)("h2",{className:"mb-2 mt-4 flex flex-col text-xl",children:[(0,c.t)("Circles with access"),(0,v.jsx)("small",{className:"text-sm text-slate-500",children:(0,c.t)('Selecting circles will automatically set the security to "Connected"')})]}),(0,v.jsx)(h.Z,{defaultValue:N.circleIdList,onChange:function(e){Z((0,l.Z)((0,l.Z)({},N),{},{circleIdList:e.target.value,requiredSecurityGroup:e.target.value.length?a.hh.Connected:N.requiredSecurityGroup}))}}),(0,v.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,v.jsx)(f.Z,{className:"m-2",onClick:function(){x(N)},children:null!==i&&void 0!==i?i:"Save"}),(0,v.jsx)(f.Z,{className:"m-2",type:"secondary",onClick:function(){Z(m),p()},children:(0,c.t)("Cancel")})]})]})});return(0,u.createPortal)(k,w)},j=function(e){var r,n,t=e.acl,o=e.maxLength,l=void 0===o?40:o,u=(0,s.Z)().fetch.data,d=null===t||void 0===t||null===(r=t.circleIdList)||void 0===r?void 0:r.map((function(e){var r;return null===u||void 0===u||null===(r=u.find((function(r){return a.j4.stringGuidsEqual(r.id,e)})))||void 0===r?void 0:r.name}));return(0,v.jsx)(v.Fragment,{children:t&&t.requiredSecurityGroup.toLowerCase()!==a.hh.Anonymous.toLowerCase()?t.requiredSecurityGroup.toLowerCase()===a.hh.Authenticated.toLowerCase()?(0,c.t)("Authenticated"):t.requiredSecurityGroup.toLowerCase()===a.hh.Connected.toLowerCase()?null!==(n=t.circleIdList)&&void 0!==n&&n.length?"".concat((0,c.t)("Circles"),": ").concat((0,i.iL)(d.join(", "),l)):(0,c.t)("Connections"):(t.requiredSecurityGroup.toLowerCase(),a.hh.Owner.toLowerCase(),(0,c.t)("Owner")):(0,c.t)("Public")})},C=function(e){var r=e.acl,n=e.className;return r&&r.requiredSecurityGroup!==a.hh.Anonymous.toLowerCase()&&r.requiredSecurityGroup!==a.hh.Authenticated.toLowerCase()?(0,v.jsx)(x,{className:n}):(0,v.jsx)(p,{className:n})},N=function(e){var r=e.acl,n=e.onChange,a=e.isEdit,i=e.onClose,s=e.className,l=(0,o.useState)(!1),u=(0,t.Z)(l,2),d=u[0],f=u[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{title:r.requiredSecurityGroup,className:"mr-2 inline-block ".concat(n?"":"cursor-default"," ").concat(null!==s&&void 0!==s?s:""),onClick:function(){return n&&f(!0)},children:(0,v.jsx)(C,{className:"h-5 w-5",acl:r})}),(0,v.jsx)(w,{acl:r,isOpen:a||d,title:(0,c.t)("Edit security"),onCancel:function(){f(!1),i&&i()},onConfirm:function(e){n(e),f(!1),i&&i()}})]})}},596:function(e,r,n){var t=n(1413),a=n(4925),o=n(184),i=["className"];r.Z=function(e){var r=e.className,n=(0,a.Z)(e,i);return(0,o.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center ".concat(null!==r&&void 0!==r?r:""),children:[(0,o.jsx)("input",(0,t.Z)({type:"checkbox",className:"peer sr-only"},n)),(0,o.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-indigo-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-indigo-800"})]})}},8845:function(e,r,n){var t=n(3433),a=n(9439),o=n(5274),i=n(2791),c=n(4990),s=n(4395),l=n(8808),u=n(596),d=n(184);r.Z=function(e){var r=e.defaultValue,n=e.onChange,f=e.name,h=(0,s.Z)().fetch,m=h.data,v=h.isLoading,x=(0,i.useState)((0,t.Z)(null!==r&&void 0!==r?r:[])),p=(0,a.Z)(x,2),g=p[0],b=p[1];return(0,i.useEffect)((function(){n({target:{name:f,value:(0,t.Z)(g)}})}),[g]),(0,i.useEffect)((function(){null!==g&&void 0!==g&&g.length&&0===(null===r||void 0===r?void 0:r.length)&&b([])}),[r]),(0,d.jsxs)(d.Fragment,{children:[!(null!==m&&void 0!==m&&m.length)&&!v&&(0,d.jsx)("p",{children:(0,c.t)("No circles found")}),(0,d.jsx)("div",{className:"-mb-4",children:null===m||void 0===m?void 0:m.map((function(e,r){var n,a=g.some((function(r){return o.j4.stringGuidsEqual(r,e.id)})),i=function(){g.some((function(r){return o.j4.stringGuidsEqual(r,e.id)}))?b(g.filter((function(r){return!o.j4.stringGuidsEqual(r,e.id)}))):b([].concat((0,t.Z)(g),[e.id]))};return(0,d.jsxs)("div",{className:"my-2 flex w-full cursor-pointer select-none flex-row rounded-lg border px-4 py-3 dark:border-slate-800 ".concat(a&&"bg-slate-50 dark:bg-slate-700"),onClick:i,children:[(0,d.jsx)(l.Z,{circleDef:e,isChecked:a,onClick:i,hideMembers:!0},null!==(n=e.id)&&void 0!==n?n:r),(0,d.jsx)("label",{className:"sr-only",htmlFor:e.id,children:e.name}),(0,d.jsx)(u.Z,{id:e.id,checked:a,className:"pointer-events-none my-auto ml-auto",readOnly:!0})]},e.id)}))})]})}},3225:function(e,r,n){var t=n(1413),a=n(184);r.Z=function(e){var r;return(0,a.jsx)("select",(0,t.Z)((0,t.Z)({},e),{},{className:"w-full rounded ".concat(e.className&&-1!==(null===(r=e.className)||void 0===r?void 0:r.indexOf("border"))?"":"border border-gray-300 focus:border-indigo-500 dark:border-gray-700"," bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:ring-2 focus:ring-indigo-200 dark:bg-gray-800 dark:text-gray-100 ").concat(e.className),children:e.children}))}},2465:function(e,r,n){var t=n(1413),a=n(184);r.Z=function(e){return(0,a.jsx)("textarea",(0,t.Z)((0,t.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},8808:function(e,r,n){var t=n(3504),a=n(4990),o=n(4075),i=n(706),c=n(9205),s=n(4411),l=n(184);r.Z=function(e){var r=e.circleDef,n=e.permissionDetails,u=e.className,d=e.isChecked,f=e.onClick,h=e.hideMembers,m=(0,o.Z)({circleId:!h&&(null===r||void 0===r?void 0:r.id)}).fetchMembers,v=m.data,x=m.isLoading;if(!r)return(0,l.jsx)(l.Fragment,{});var p=function(e){var n=e.children,a=e.className;return f?(0,l.jsx)("a",{onClick:function(){return f&&f()},className:null!==a&&void 0!==a?a:"",children:n}):(0,l.jsx)(t.rU,{to:"/owner/circles/".concat(encodeURIComponent(r.id)),className:"hover:text-slate-700 hover:underline dark:hover:text-slate-400 ".concat(null!==a&&void 0!==a?a:""),children:n})},g=d?"border-indigo-500 dark:border-indigo-800":!1===d?"border-slate-100 dark:border-slate-800":"";return(0,l.jsxs)(p,{className:"flex flex-row ".concat(null!==u&&void 0!==u?u:""," ").concat(r.disabled&&"opacity-50"," ").concat(f&&"cursor-pointer"," ").concat(g),children:[(0,l.jsx)(c.Z,{className:"mt-1 mb-auto mr-3 h-6 w-6"}),(0,l.jsxs)("div",{className:"mr-2 flex flex-col",children:[(0,l.jsxs)("p",{className:"my-auto leading-none",children:[r.disabled&&(0,a.t)("Disabled:")," ",null===r||void 0===r?void 0:r.name,n&&": ".concat(n)]}),h?null:x?(0,l.jsx)(s.Z,{className:"mt-1 h-4 w-full"}):(0,l.jsx)("small",{className:"block",children:v?"".concat(v.length," ").concat(1===v.length?(0,a.t)("member"):(0,a.t)("members")):null})]}),!f&&(0,l.jsx)(i.Z,{className:"my-auto ml-2 h-5 w-5"})]})}},8602:function(e,r,n){var t=n(184);r.Z=function(e){var r=e.className;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:r,children:(0,t.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},1434:function(e,r,n){var t=n(2791),a=n(184),o=t.forwardRef((function(e,r){var n=e.title,t=e.actions,o=e.className,i=e.children,c=e.isOpaqueBg,s=void 0!==c&&c,l=e.isBorderLess,u=void 0!==l&&l;return(0,a.jsxs)("section",{ref:r,className:"my-5 rounded-md ".concat(s?u?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==o&&void 0!==o?o:""),children:[n||t?(0,a.jsxs)("div",{className:"relative flex flex-row items-center border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-2xl dark:text-white",children:n}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("div",{className:"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center",children:t})})]}):null,(0,a.jsx)("div",{className:"py-5 ",children:i})]})}));r.Z=o},4395:function(e,r,n){var t=n(4165),a=n(5861),o=n(7408),i=n(3766),c=n(8609);r.Z=function(){var e=(0,c.ZP)().getSharedSecret,r=i.k.getInstance(e()),n=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCircles();case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.sort((function(e,r){return(e.disabled?1:0)-(r.disabled?1:0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["circles"],(function(){return n()}),{refetchOnWindowFocus:!1})}}},9779:function(e,r,n){var t=n(4165),a=n(5861),o=n(7408),i=n(5274),c=n(8609),s={alias:i.Ib.BlogMainContentDriveId.toString(),type:i.Hm.DriveType.toString()};r.Z=function(e,r){var n=(0,c.ZP)().getSharedSecret,l=(0,o.useQueryClient)(),u=new i.KU({api:i.Ii.Owner,sharedSecret:n()}),d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.mediaProvider.getDecryptedImageUrl(null!==n&&void 0!==n?n:s,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,o,c,l,d,f,h;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.bytes,a=r.type,o=r.targetDrive,c=void 0===o?s:o,l=r.acl,d=void 0===l?{requiredSecurityGroup:i.hh.Anonymous}:l,f=r.fileId,h=void 0===f?void 0:f,e.next=3,u.mediaProvider.uploadImage(c,void 0,d,n,h,a);case 3:return e.abrupt("return",e.sent.fileId);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.targetDrive,a=void 0===n?s:n,o=r.fileId,e.next=3,u.mediaProvider.removeImage(o,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["image",e,r],(function(){return d(e,r)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,enabled:!!e}),save:(0,o.useMutation)(f,{onSuccess:function(e,r){var n;r.fileId?l.invalidateQueries(["image",r.fileId,null!==(n=r.targetDrive)&&void 0!==n?n:s]):l.removeQueries(["image"])}}),remove:(0,o.useMutation)(h)}}},4925:function(e,r,n){function t(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(r,{Z:function(){return t}})}}]);
//# sourceMappingURL=515.0641082a.chunk.js.map