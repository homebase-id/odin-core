"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[335],{3756:function(e,r,t){var n=t(9439),i=t(2791),c=t(4990),a=t(9747),s=t(184);r.Z=function(e){var r=e.className,t=e.state,u=e.error,o=(0,i.useState)(null),l=(0,n.Z)(o,2),p=l[0],f=l[1],d=(0,i.useState)(new Date),h=(0,n.Z)(d,2),v=h[0],Z=h[1];if((0,i.useEffect)((function(){"success"===t&&f(new Date)}),[t]),(0,i.useEffect)((function(){var e=setTimeout((function(){Z(new Date)}),3e4);return function(){clearTimeout(e)}}),[v]),"loading"===t)return(0,s.jsx)("p",{className:"".concat(r," text-sm"),children:"Saving..."});if("error"===t)return(0,s.jsx)(a.Z,{type:"critical",className:r,children:u instanceof Error?u.message:(0,c.t)("Something went wrong")});if(!p)return null;var m=v.getTime()-p.getTime(),x=p?m<=6e4?"a few seconds ago":m<=6e5?"a few minutes ago":p.toLocaleString():"";return x?(0,s.jsxs)("p",{className:"".concat(r," text-sm"),children:["Last saved ",x]}):null}},9080:function(e,r,t){var n=t(6907),i=t(3504),c=t(3756),a=t(184);r.Z=function(e){var r=e.title,t=e.actions,s=e.saveStatus,u=e.breadCrumbs,o=e.icon;return(0,a.jsx)("section",{className:"-mx-5 -mt-4 mb-10 border-b-2 border-gray-100 bg-slate-50 py-4 pr-5 pl-10 dark:border-gray-700 dark:bg-slate-800 sm:-mx-10 sm:-mt-8 sm:py-8 sm:px-10",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex-col",children:[u&&(0,a.jsx)("ul",{className:"mb-2 hidden flex-row sm:flex",children:u.map((function(e,r){return(0,a.jsx)("li",{className:"mr-2",children:e.href?(0,a.jsxs)(i.rU,{to:e.href,className:"",children:[e.title,(0,a.jsx)("span",{className:"ml-2",children:">"})]}):(0,a.jsx)("span",{className:"text-slate-500",children:e.title})},r)}))}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:"mb-5 flex flex-row text-4xl dark:text-white",children:[o&&o({className:"h-8 w-8 my-auto mr-4"})," ",r]}),(0,a.jsx)(n.ql,{children:(0,a.jsxs)("title",{children:["object"!==typeof r&&"".concat(r)||window.location.pathname.split("/").pop()," ","| Owner console"]})})]})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("div",{className:"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center",children:t}),s&&(0,a.jsx)(c.Z,{className:"mt-1",state:s})]})]})})}},4075:function(e,r,t){t.d(r,{Z:function(){return v}});var n=t(4165),i=t(5861),c=t(7408),a=t(5671),s=t(3144),u=t(1752),o=t(1120),l=t(9340),p=t(1129),f=function(e){(0,l.Z)(t,e);var r=(0,p.Z)(t);function t(e){var n;if((0,a.Z)(this,t),!e)throw"[CircleMembershipProvider] Shared Secret is required";return(n=r.call(this,e)).root="/circles/connections/circles",n}return(0,s.Z)(t,[{key:"add",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/add",e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/revoke",e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"fetchMembers",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/list",e.abrupt("return",i.post(c,{circleId:r}).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return t.instance||(t.instance=new t(e)),t.instance}}]),t}(t(2008).$);f.instance=void 0;var d=t(3766),h=t(8609),v=function(e){var r=e.circleId,t=(0,c.useQueryClient)(),a=(0,h.ZP)().getSharedSecret,s=d.k.getInstance(a()),u=f.getInstance(a()),o=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.circleId){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.getCircle(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.circleId){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.fetchMembers(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.lastUpdated){e.next=6;break}return e.next=3,s.updateDefinition(r);case 3:case 8:return e.abrupt("return",e.sent);case 6:return e.next=8,s.createDefinition(r);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,e.next=3,s.disableCircle(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,e.next=3,s.enableCircle(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,c=r.dotYouIds,e.next=3,Promise.all(c.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.add({circleId:t,dotYouId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,c=r.dotYouIds,e.next=3,Promise.all(c.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.remove({circleId:t,dotYouId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,i=r.dotYouId,e.next=3,u.add({circleId:t,dotYouId:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,i=r.dotYouId,e.next=3,u.remove({circleId:t,dotYouId:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,e.next=3,s.removeCircle(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetch:(0,c.useQuery)(["circle",r],(function(){return o({circleId:r})}),{refetchOnWindowFocus:!1,enabled:!!r}),fetchMembers:(0,c.useQuery)(["cirleMembers",r],(function(){return l({circleId:r})}),{refetchOnWindowFocus:!1}),createOrUpdate:(0,c.useMutation)(p,{onMutate:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var i,c,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cancelQueries(["circle",r.id]);case 2:return i=t.getQueryData(["circle",r.id]),t.setQueryData(["circle",r.id],r),c=t.getQueryData(["circles"]),a=null===c||void 0===c?void 0:c.map((function(e){return e.id===r.id?r:e})),t.setQueryData(["circles"],a),e.abrupt("return",{previousCircle:i,newCircle:r,previousCircles:c});case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onError:function(e,r,n){console.error(e),t.setQueryData(["circle",r.id],n.previousCircle),t.setQueryData(["circles"],n.previousCircles)},onSettled:function(e){t.invalidateQueries(["circles"]),null!==e&&void 0!==e&&e.id&&t.invalidateQueries(["circle",e.id])}}),disableCircle:(0,c.useMutation)(v,{onSuccess:function(e,r){t.invalidateQueries(["circles"]),null!==r&&void 0!==r&&r.circleId&&t.invalidateQueries(["circle",r.circleId])}}),enableCircle:(0,c.useMutation)(Z,{onSuccess:function(e,r){t.invalidateQueries(["circles"]),null!==r&&void 0!==r&&r.circleId&&t.invalidateQueries(["circle",r.circleId])}}),provideGrants:(0,c.useMutation)(m,{onSuccess:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(c,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.invalidateQueries(["circles"]),t.invalidateQueries(["circle",r]),t.invalidateQueries(["cirleMembers",r]),e.next=5,Promise.all(a.dotYouIds.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.invalidateQueries(["connectionInfo",r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),revokeGrants:(0,c.useMutation)(x,{onSuccess:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(c,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.invalidateQueries(["circles"]),t.invalidateQueries(["circle",r]),t.invalidateQueries(["cirleMembers",r]),e.next=5,Promise.all(a.dotYouIds.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.invalidateQueries(["connectionInfo",r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),provideGrant:(0,c.useMutation)(w,{onSuccess:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(i,c){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.invalidateQueries(["circles"]),t.invalidateQueries(["circle",r]),t.invalidateQueries(["cirleMembers",r]),t.invalidateQueries(["connectionInfo",c.dotYouId]);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),revokeGrant:(0,c.useMutation)(y,{onSuccess:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(i,c){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.invalidateQueries(["circles"]),t.invalidateQueries(["circle",r]),t.invalidateQueries(["cirleMembers",r]),t.invalidateQueries(["connectionInfo",c.dotYouId]);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),removeCircle:(0,c.useMutation)(b,{onSuccess:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.invalidateQueries(["circles"]),t.invalidateQueries(["circle",i.circleId]);case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}})}}},3766:function(e,r,t){t.d(r,{k:function(){return h}});var n=t(4165),i=t(1413),c=t(5861),a=t(5671),s=t(3144),u=t(1752),o=t(1120),l=t(9340),p=t(1129),f=t(2008),d=t(9631),h=function(e){(0,l.Z)(t,e);var r=(0,p.Z)(t);function t(e){var n;if((0,a.Z)(this,t),!e)throw"[CircleProvider] Shared Secret is required";return(n=r.call(this,e)).root="/circles/definitions",n}return(0,s.Z)(t,[{key:"updateDefinition",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var c,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),a=this.root+"/update",(s=(0,i.Z)({},r)).driveGrants=s.driveGrants||[],e.abrupt("return",c.post(a,s).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"createDefinition",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/create",r.id||(r.id=d.j4.getNewId()),e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"parsePermissions",value:function(e){if("string"!==typeof e)return e;var r=e.toLowerCase();return"read"===r?2:"write"===r?4:"readwrite"===r?5:e}},{key:"getCircles",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var r,c,a=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/list",e.abrupt("return",r.get(c).then((function(e){return e.data.map((function(e){var r;return e.driveGrants=null===(r=e.driveGrants)||void 0===r?void 0:r.map((function(e){return{permissionedDrive:(0,i.Z)((0,i.Z)({},e.permissionedDrive),{},{permission:a.parsePermissions(e.permissionedDrive.permission)})}})),e}))})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCircle",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var c,a,s=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),a=this.root+"/get",e.abrupt("return",c.post(a,r).then((function(e){return e.data})).then((function(e){var r;return e.driveGrants=null===(r=e.driveGrants)||void 0===r?void 0:r.map((function(e){return{permissionedDrive:(0,i.Z)((0,i.Z)({},e.permissionedDrive),{},{permission:s.parsePermissions(e.permissionedDrive.permission)})}})),e})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"disableCircle",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/disable",e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"enableCircle",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/enable",e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"removeCircle",value:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),c=this.root+"/delete",e.abrupt("return",i.post(c,r).then((function(e){return e.data})).catch((0,u.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return t.instance||(t.instance=new t(e)),t.instance}}]),t}(f.$);h.instance=void 0}}]);
//# sourceMappingURL=335.93c547dd.chunk.js.map