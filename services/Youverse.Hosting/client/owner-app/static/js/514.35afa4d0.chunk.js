"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[514],{4523:function(e,n,r){r.d(n,{Z:function(){return I}});var a=r(3433),t=r(4165),s=r(5861),i=r(1413),l=r(9439),o=r(2791),c=r(4164),u=r(4990),d=r(4075),m=r(6770),v=r(3412),f=r(2562),h=r(2042),x=r(2851),p=r(6916),g=r(3147),Z=r(1261),j=r(4311),b=r(8602),N=r(184),y=function(e){var n=e.className,r=e.isChecked,a=e.children,t=e.onChange;return(0,N.jsxs)("li",{className:"flex min-w-[16rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(n),onClick:t,children:[(0,N.jsx)(j.Z,{className:"my-auto mr-3 h-4 w-4 flex-shrink-0 ".concat(r?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,N.jsx)("span",{className:"mr-auto block h-full py-1",children:a})]})},w=function(e){var n,r,t=e.className,s=e.permissionLevels,i=e.onChange,c=e.defaultValue,u=(0,o.useState)(!1),d=(0,l.Z)(u,2),m=d[0],v=d[1],f=(0,o.useState)(c),h=(0,l.Z)(f,2),x=h[0],p=h[1],g=(0,o.useRef)(null);(0,Z.Z)(g,(function(){return v(!1)}));var j=(null===c||void 0===c?void 0:c.length)>=2?"Multiple":null!==(n=null!==c&&void 0!==c&&c[0]?null===(r=s.find((function(e){return e.value===c[0]})))||void 0===r?void 0:r.name:s[0].name)&&void 0!==n?n:s[0].name,w=function(e){p(e),i&&i(e)};return(0,N.jsx)("div",{className:null!==t&&void 0!==t?t:"",children:(0,N.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return v(!m)},ref:g,children:[(0,N.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,N.jsx)("span",{className:"my-auto mr-2 select-none",children:j})," ",(0,N.jsx)(b.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,N.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(m?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:s.map((function(e){return(0,N.jsx)(y,{isChecked:x.some((function(n){return n===e.value}))||0===x.length&&0===e.value,onChange:function(){return x.some((function(n){return n===e.value}))?w(x.filter((function(n){return n!==e.value}))):0!==e.value?w([].concat((0,a.Z)(x),[e.value])):w([])},children:e.name},e.value)}))})]})})},k=r(2284),C=r(2465),D=r(7927),S=r(8930),I=function(e){var n,r=e.title,Z=e.confirmText,j=e.isOpen,b=e.defaultValue,y=e.onConfirm,I=e.onCancel,G=(0,v.Z)("modal-container"),F=(0,d.Z)({}).createOrUpdate,R=F.mutateAsync,V=F.status,A=F.error,L=(0,m.Z)().fetch.data,O=(0,o.useState)((0,i.Z)({driveGrants:b.driveGrants||[]},b)),P=(0,l.Z)(O,2),M=P[0],W=P[1];if((0,o.useEffect)((function(){j&&W((0,i.Z)({driveGrants:b.driveGrants||[]},b))}),[j]),!j)return null;var z=function(){W((0,i.Z)({driveGrants:b.driveGrants||[]},b))},q=(0,N.jsx)(S.Z,{title:r,onClose:I,size:"4xlarge",children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.Z,{error:A}),(0,N.jsxs)("form",{onSubmit:function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,R(M);case 3:return z(),y(),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)(g.Z,{htmlFor:"name",children:(0,u.t)("Name")}),(0,N.jsx)(p.Z,{id:"name",name:"circleName",defaultValue:M.name,onChange:function(e){W((0,i.Z)((0,i.Z)({},M),{},{name:e.target.value}))},required:!0})]}),(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)(g.Z,{htmlFor:"name",children:(0,u.t)("Description")}),(0,N.jsx)(C.Z,{id:"description",name:"circleDescription",defaultValue:M.description,onChange:function(e){W((0,i.Z)((0,i.Z)({},M),{},{description:e.target.value}))},required:!0})]}),(0,N.jsxs)("div",{className:"mb-5 flex flex-row",children:[(0,N.jsx)(g.Z,{htmlFor:"name",className:"my-auto mr-2",children:(0,u.t)("Permissions")}),(0,N.jsx)(w,{className:"ml-auto",permissionLevels:f.WW,defaultValue:null!==(n=M.permissions.keys)&&void 0!==n?n:[0],onChange:function(e){W((0,i.Z)((0,i.Z)({},M),{},{permissions:{keys:e}}))}})]}),null!==L&&void 0!==L&&L.length?(0,N.jsxs)("div",{className:"my-7",children:[(0,N.jsxs)("div",{className:"mb-8",children:[(0,N.jsxs)("h2",{className:"text-lg",children:[(0,u.t)("Drive Permissions"),":"]}),(0,N.jsx)("p",{className:"text-sm text-slate-500",children:(0,u.t)("Drives with anonymous access enabled are available to any user")})]}),(0,N.jsx)("div",{className:"-my-4",children:L.filter((function(e){return!e.ownerOnly})).map((function(e,n){var r,t,s,l,o,c,d=null!==(r=null===(t=M.driveGrants)||void 0===t||null===(s=t.find((function(n){return n.permissionedDrive.drive.alias===e.targetDriveInfo.alias&&n.permissionedDrive.drive.type===e.targetDriveInfo.type})))||void 0===s?void 0:s.permissionedDrive.permission)&&void 0!==r?r:0;return(0,N.jsxs)("div",{className:"my-4 flex w-full select-none flex-row rounded-lg border p-4 dark:border-slate-800 ".concat(d>0&&"bg-slate-50 dark:bg-slate-700"),children:[(0,N.jsx)(D.Z,{className:"my-auto mr-3 h-6 w-6"}),(0,N.jsxs)(g.Z,{htmlFor:"".concat(e.targetDriveInfo.alias,"-").concat(e.targetDriveInfo.type),className:"mt-auto mb-auto mr-2",children:[e.name,(0,N.jsx)("small",{className:"block text-sm text-slate-500",children:e.allowAnonymousReads&&(0,u.t)("Allows anonymous access")})]}),(0,N.jsx)(k.Z,{className:"my-auto ml-auto",permissionLevels:f.Ac,defaultValue:null!==(l=null===(o=M.driveGrants)||void 0===o||null===(c=o.find((function(n){return n.permissionedDrive.drive.alias===e.targetDriveInfo.alias&&n.permissionedDrive.drive.type===e.targetDriveInfo.type})))||void 0===c?void 0:c.permissionedDrive.permission)&&void 0!==l?l:0,onChange:function(n){var r;n>0?W((0,i.Z)((0,i.Z)({},M),{},{driveGrants:[].concat((0,a.Z)((null===M||void 0===M||null===(r=M.driveGrants)||void 0===r?void 0:r.filter((function(n){var r,a;return(null===(r=n.permissionedDrive)||void 0===r?void 0:r.drive.alias)!==e.targetDriveInfo.alias||(null===(a=n.permissionedDrive)||void 0===a?void 0:a.drive.type)!==e.targetDriveInfo.type})))||[]),[{permissionedDrive:{drive:e.targetDriveInfo,permission:n}}])})):W((0,i.Z)((0,i.Z)({},M),{},{driveGrants:(0,a.Z)(M.driveGrants.filter((function(n){return n.permissionedDrive.drive.alias!==e.targetDriveInfo.alias||n.permissionedDrive.drive.type!==e.targetDriveInfo.type})))}))}})]},n)}))})]}):null,(0,N.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,N.jsx)(x.Z,{className:"m-2",state:V,icon:"send",children:Z||(0,u.t)("Add Circle")}),(0,N.jsx)(x.Z,{className:"m-2",type:"secondary",onClick:function(){z(),I()},children:(0,u.t)("Cancel")})]})]})]})});return(0,c.createPortal)(q,G)}},2284:function(e,n,r){var a=r(9439),t=r(2791),s=r(1261),i=r(4311),l=r(8602),o=r(184),c=function(e){var n=e.className,r=e.isChecked,a=e.children,t=e.onChange;return(0,o.jsxs)("li",{className:"flex min-w-[8rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(n),onClick:t,children:[(0,o.jsx)(i.Z,{className:"my-auto mr-3 h-4 w-4 flex-shrink-0  ".concat(r?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,o.jsx)("span",{className:"mr-auto block h-full py-1",children:a})]})};n.Z=function(e){var n=e.className,r=e.permissionLevels,i=e.onChange,u=e.defaultValue,d=(0,t.useState)(!1),m=(0,a.Z)(d,2),v=m[0],f=m[1],h=(0,t.useState)(u),x=(0,a.Z)(h,2),p=x[0],g=x[1],Z=(0,t.useRef)(null);(0,s.Z)(Z,(function(){return f(!1)}));var j=r.reduce((function(e,n){return n.value>e.value&&n.value<=u?n:e}),r[0]),b=function(e){g(e),i(e)};return(0,o.jsx)("div",{className:null!==n&&void 0!==n?n:"",children:(0,o.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return f(!v)},ref:Z,children:[(0,o.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,o.jsx)("span",{className:"my-auto mr-2 select-none",children:j.name})," ",(0,o.jsx)(l.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,o.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(v?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:r.map((function(e){return(0,o.jsx)(c,{isChecked:0===e.value?p===e.value:p>=e.value,onChange:function(){return p!==e.value?b(e.value):b(0)},children:e.name},e.value)}))})]})})}},2465:function(e,n,r){var a=r(1413),t=r(184);n.Z=function(e){return(0,t.jsx)("textarea",(0,a.Z)((0,a.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},8602:function(e,n,r){var a=r(184);n.Z=function(e){var n=e.className;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:n,children:(0,a.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},4395:function(e,n,r){var a=r(4165),t=r(5861),s=r(7408),i=r(3766),l=r(8609);n.Z=function(){var e=(0,l.ZP)().getSharedSecret,n=i.k.getInstance(e()),r=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCircles();case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.sort((function(e,n){return(e.disabled?1:0)-(n.disabled?1:0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["circles"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},6770:function(e,n,r){var a=r(4165),t=r(5861),s=r(7408),i=r(5274),l=r(8609);n.Z=function(){var e=(0,l.ZP)().getSharedSecret,n=new i.AO({api:i.Ii.Owner,sharedSecret:e()}),r=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.driveProvider.GetDrives({pageNumber:1,pageSize:100});case 2:return e.next=4,e.sent.results;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["drives"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},2562:function(e,n,r){r.d(n,{Ac:function(){return t},WW:function(){return s},c$:function(){return i}});var a=r(4990),t=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Reader"),value:1},{name:(0,a.t)("Editor"),value:3}],s=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Read Connections"),value:10},{name:(0,a.t)("Read Circle Members"),value:50}],i=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Read Connections"),value:10},{name:(0,a.t)("Manage Connection Requests"),value:30},{name:(0,a.t)("Read Circle Members"),value:50}]},514:function(e,n,r){r.r(n);var a=r(9439),t=r(5274),s=r(2791),i=r(3504),l=r(4990),o=r(4395),c=r(9205),u=r(2851),d=r(4523),m=r(9080),v=r(4411),f=r(184),h=function(e){var n=e.circleDefinintion,r=e.className;return(0,f.jsx)("div",{className:"h-full ".concat(r," ").concat(n.disabled?"opacity-50":""),children:(0,f.jsxs)(i.rU,{to:"/owner/circles/".concat(encodeURIComponent(n.id)),className:"block h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:shadow-md dark:border-gray-800 dark:bg-gray-800 hover:dark:shadow-slate-600",children:[(0,f.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:n.name}),(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsx)("p",{children:n.description}),(0,f.jsxs)("p",{className:"text-xs",children:["Created on: ",new Date(n.created).toLocaleDateString()]})]})]})})};n.default=function(){var e=(0,o.Z)().fetch,n=e.data,r=e.isLoading,i=(0,s.useState)(!1),x=(0,a.Z)(i,2),p=x[0],g=x[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{icon:c.Z,title:(0,l.t)("My Circles"),actions:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(u.Z,{icon:"plus",className:"m-4",onClick:function(){return g(!0)},children:(0,l.t)("Add Circle")})})}),(0,f.jsx)("section",{className:"",children:r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{className:"mb-4 h-10"}),(0,f.jsx)(v.Z,{className:"mb-4 h-10"}),(0,f.jsx)(v.Z,{className:"mb-4 h-10"})]}):(0,f.jsx)("div",{className:"-m-4 flex flex-row flex-wrap items-stretch",children:null!==n&&void 0!==n&&n.length?n.map((function(e){return(0,f.jsx)("div",{className:"w-full p-4",children:(0,f.jsx)(h,{circleDefinintion:e})},e.id)})):(0,f.jsx)(f.Fragment,{children:(0,l.t)("No circles found")})})}),(0,f.jsx)(d.Z,{title:(0,l.t)("Create new Circle"),isOpen:p,defaultValue:{name:"",description:"",driveGrants:[{permissionedDrive:{drive:(0,t.H3)(t.P.StandardProfileId),permission:4}}],permissions:{keys:[10]}},onConfirm:function(){g(!1)},onCancel:function(){g(!1)}})]})}}}]);
//# sourceMappingURL=514.35afa4d0.chunk.js.map