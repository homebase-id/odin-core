{"version":3,"file":"static/js/458.2837c826.chunk.js","mappings":"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","sources":["components/Dialog/ImportDialog/ImportDialog.tsx","components/Form/PermissionLevelEditor.tsx","components/PermissionViews/AppPermissionView/AppPermissionView.tsx","components/PermissionViews/CirclePermissionView/CirclePermissionView.tsx","components/ui/Icons/Triangle/Triangle.tsx","components/ui/Sections/Section.tsx","hooks/apps/useApps.ts","hooks/circles/useCircles.ts","hooks/drives/useDrive.ts","hooks/drives/useExport.ts","provider/app/AppManagementProvider.ts","provider/permission/permissionLevels.ts","components/Dialog/DriveAccessDialog/DriveAccessDialog.tsx","templates/Drives/DrivePermissionOverview/DrivePermissionOverview.tsx","components/ui/Buttons/ActionLink.tsx","templates/Drives/DriveDetails/DriveDetails.tsx"],"sourcesContent":["import { DataUtil, TargetDrive } from '@youfoundation/dotyoucore-js';\nimport { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useExport, { importable, isImportable } from '../../../hooks/drives/useExport';\nimport usePortal from '../../../hooks/portal/usePortal';\nimport Alert from '../../ui/Alerts/Alert/Alert';\nimport ErrorNotification from '../../ui/Alerts/ErrorNotification/ErrorNotification';\nimport ActionButton from '../../ui/Buttons/ActionButton';\nimport DialogWrapper from '../../ui/Dialog/DialogWrapper';\n\nconst ImportDialog = ({\n  title,\n  confirmText,\n  isOpen,\n  targetDrive,\n  onCancel,\n}: {\n  title: string;\n  confirmText?: string;\n\n  isOpen: boolean;\n\n  targetDrive?: TargetDrive;\n\n  onConfirm: () => void;\n  onCancel: () => void;\n}) => {\n  const target = usePortal('modal-container');\n  const {\n    mutateAsync: importUnencrypted,\n    status: importStatus,\n    error: importError,\n  } = useExport().importUnencrypted;\n  const [errorMessage, setErrorMessage] = useState<string>();\n  const [dataObject, setDataObject] = useState<importable>();\n  const [importDataStatus, setImportDataStatus] = useState<{ fileId: string; status: boolean }[]>();\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const importData = async (formatDrive?: boolean) => {\n    if (!dataObject) {\n      return;\n    }\n\n    setImportDataStatus(\n      await importUnencrypted({\n        drive: targetDrive,\n        formatDrive: formatDrive,\n        data: dataObject,\n      })\n    );\n\n    // onConfirm();\n  };\n\n  const dialog = (\n    <DialogWrapper title={title} onClose={onCancel} size=\"2xlarge\">\n      <>\n        <ErrorNotification error={importError} />\n        {errorMessage && (\n          <Alert type=\"critical\" className=\"mb-8\">\n            {errorMessage}\n          </Alert>\n        )}\n\n        <input\n          onChange={async (e) => {\n            const file = e.target.files[0];\n            if (file) {\n              const arrayBuffer = await file.arrayBuffer();\n              const contents = DataUtil.byteArrayToString(new Uint8Array(arrayBuffer));\n              const dataObject = JSON.parse(contents);\n\n              if (!isImportable(dataObject)) {\n                setErrorMessage(t('The file provided is not in the right JSON format'));\n                return;\n              } else {\n                setErrorMessage(undefined);\n              }\n\n              setDataObject(dataObject);\n            }\n          }}\n          type=\"file\"\n          accept=\"application/json\"\n          className={`w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100`}\n        />\n\n        {dataObject && (\n          <div className=\"my-8\">\n            {!targetDrive ? (\n              <p className=\"pb-2\">\n                {t('A new drive will be created:')} {dataObject.metadata.drive.name}\n              </p>\n            ) : (\n              (dataObject.metadata.drive.targetDriveInfo.alias !== targetDrive.alias ||\n                dataObject.metadata.drive.targetDriveInfo.type !== targetDrive.type) && (\n                <p className=\"pb-2 text-orange-600\">\n                  {t('Warning')}: {t('the export originates from a different drive')}\n                </p>\n              )\n            )}\n\n            <p className=\"mb-6 text-xl\">\n              {t('Found the following')} {dataObject.files.length} {t('files')}.{' '}\n              <small className=\"block text-sm\">\n                {t('Exported on')}:{' '}\n                {new Date(dataObject.metadata.date).toLocaleDateString(undefined, {\n                  month: 'short',\n                  day: 'numeric',\n                  year: 'numeric',\n                  hour: 'numeric',\n                  minute: 'numeric',\n                })}\n              </small>\n            </p>\n\n            <ul className=\"-my-1 max-h-[25vh] overflow-auto\">\n              {dataObject.files.map((file) => (\n                <li\n                  key={file.fileId}\n                  className={`my-1 flex flex-row rounded-lg border border-slate-200 px-2 py-1 dark:border-slate-700 ${\n                    importDataStatus &&\n                    (importDataStatus?.find((status) => status.fileId === file.fileId)?.status ===\n                    true\n                      ? 'bg-green-200 dark:bg-green-900'\n                      : 'bg-red-200 dark:bg-red-900')\n                  }`}\n                >\n                  {file.fileId} <span className=\"ml-auto\">{file.fileMetadata.contentType}</span>\n                </li>\n              ))}\n            </ul>\n            {targetDrive ? (\n              <small className=\"mt-6 block text-sm\">\n                {t('Data on the drive will be overwritten when importing')}\n              </small>\n            ) : null}\n          </div>\n        )}\n\n        <div className=\"-m-2 flex flex-row-reverse pt-10 \">\n          <ActionButton className=\"m-2\" onClick={() => importData()} state={importStatus}>\n            {confirmText ?? t('Import')}\n          </ActionButton>\n          <ActionButton\n            className=\"m-2\"\n            onClick={() => importData(true)}\n            state={importStatus}\n            type=\"secondary\"\n          >\n            {t('Clean drive & import')}\n          </ActionButton>\n          <ActionButton className=\"m-2\" type=\"secondary\" onClick={onCancel}>\n            {t('Close')}\n          </ActionButton>\n        </div>\n      </>\n    </DialogWrapper>\n  );\n\n  return createPortal(dialog, target);\n};\n\nexport default ImportDialog;\n","import { ReactNode, useRef, useState } from 'react';\nimport useOutsideTrigger from '../../hooks/clickedOutsideTrigger/useClickedOutsideTrigger';\nimport Check from '../ui/Icons/Check/Check';\nimport Triangle from '../ui/Icons/Triangle/Triangle';\n\nconst PermissionLevelEditor = ({\n  className,\n  permissionLevels,\n  onChange,\n  defaultValue,\n}: {\n  className: string;\n  permissionLevels: { name: string; value: number }[];\n  onChange?: (value: number) => void;\n  defaultValue: number;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [value, setInnerValue] = useState(defaultValue);\n  const wrapperRef = useRef(null);\n  useOutsideTrigger(wrapperRef, () => setIsOpen(false));\n\n  const currentValue = permissionLevels.reduce((prevValue, currValue) => {\n    if (currValue.value > prevValue.value && currValue.value <= defaultValue) {\n      return currValue;\n    }\n\n    return prevValue;\n  }, permissionLevels[0]);\n\n  const setValue = (value: number) => {\n    setInnerValue(value);\n    onChange(value);\n  };\n\n  return (\n    <div className={className ?? ''}>\n      <div\n        className=\"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800\"\n        onClick={() => setIsOpen(!isOpen)}\n        ref={wrapperRef}\n      >\n        <div className=\"flex min-w-[6rem] flex-row py-1 px-2\">\n          <span className=\"my-auto mr-2 select-none\">{currentValue.name}</span>{' '}\n          <Triangle className=\"my-auto ml-auto h-2 w-2 rotate-90\" />\n        </div>\n        <ul\n          className={`absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ${\n            isOpen\n              ? 'z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700'\n              : 'max-h-0'\n          }`}\n        >\n          {permissionLevels.map((level) => (\n            <Option\n              key={level.value}\n              isChecked={level.value === 0 ? value === level.value : value >= level.value}\n              onChange={() => (value !== level.value ? setValue(level.value) : setValue(0))}\n            >\n              {level.name}\n            </Option>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Option = ({\n  className,\n  isChecked,\n  children,\n  onChange,\n}: {\n  className?: string;\n  isChecked: boolean;\n  children: ReactNode;\n  onChange: () => void;\n}) => {\n  return (\n    <li\n      className={`flex min-w-[8rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ${className}`}\n      onClick={onChange}\n    >\n      <Check\n        className={`my-auto mr-3 h-4 w-4 flex-shrink-0  ${\n          isChecked ? 'text-slate-700 dark:text-slate-200' : 'text-transparent'\n        }`}\n      />{' '}\n      <span className={`mr-auto block h-full py-1`}>{children}</span>\n    </li>\n  );\n};\n\nexport default PermissionLevelEditor;\n","import { Link } from 'react-router-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport { RedactedAppRegistration } from '../../../provider/app/AppManagementProviderTypes';\nimport Circles from '../../ui/Icons/Circles/Circles';\n\nconst AppMembershipView = ({\n  appDef,\n  permissionLevel,\n  className,\n}: {\n  appDef: RedactedAppRegistration;\n  permissionLevel?: string;\n  className?: string;\n}) => {\n  if (!appDef) {\n    return <></>;\n  }\n\n  return (\n    <div className={`${className ?? ''} ${appDef.isRevoked && 'opacity-50'}`}>\n      <Link to={`/owner/apps/${appDef.appId}`}>\n        <h2 className=\"mb-2 flex flex-row text-xl\">\n          <Circles className=\"my-auto mr-2 h-4 w-4\" />{' '}\n          <span className=\"my-auto\">\n            {appDef.isRevoked && `${t('Revoked')}: `}\n            {appDef.name}\n          </span>\n          {permissionLevel && <span className=\"my-auto\">: {permissionLevel}</span>}\n        </h2>\n      </Link>\n    </div>\n  );\n};\n\nexport default AppMembershipView;\n","import { ReactNode } from 'react';\nimport { Link } from 'react-router-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useCircle from '../../../hooks/circles/useCircle';\nimport { CircleDefinition } from '../../../provider/connections/CircleDataTypes';\nimport Arrow from '../../ui/Icons/Arrow/Arrow';\nimport Circles from '../../ui/Icons/Circles/Circles';\nimport LoadingParagraph from '../../ui/Loaders/LoadingParagraph/LoadingParagraph';\n\nconst CirclePermissionView = ({\n  circleDef,\n  permissionDetails,\n  className,\n  isChecked,\n  onClick,\n  hideMembers,\n}: {\n  circleDef: CircleDefinition;\n  permissionDetails?: string;\n  className?: string;\n  isChecked?: boolean;\n  hideMembers?: boolean;\n  onClick?: () => void;\n}) => {\n  const { data: members, isLoading: membersLoading } = useCircle({\n    circleId: !hideMembers && circleDef?.id,\n  }).fetchMembers;\n\n  if (!circleDef) {\n    return <></>;\n  }\n\n  const LinkWrapper = ({ children, className }: { children: ReactNode; className: string }) =>\n    onClick ? (\n      <a onClick={() => onClick && onClick()} className={className ?? ''}>\n        {children}\n      </a>\n    ) : (\n      <Link\n        to={`/owner/circles/${encodeURIComponent(circleDef.id)}`}\n        className={`hover:text-slate-700 hover:underline dark:hover:text-slate-400 ${\n          className ?? ''\n        }`}\n      >\n        {children}\n      </Link>\n    );\n\n  const checkedClasses = isChecked\n    ? 'border-indigo-500 dark:border-indigo-800'\n    : isChecked === false\n    ? 'border-slate-100 dark:border-slate-800'\n    : '';\n\n  return (\n    <LinkWrapper\n      className={`flex flex-row ${className ?? ''} ${circleDef.disabled && 'opacity-50'} ${\n        onClick && 'cursor-pointer'\n      } ${checkedClasses}`}\n    >\n      <Circles className=\"mt-1 mb-auto mr-3 h-6 w-6\" />\n      <div className=\"mr-2 flex flex-col\">\n        <p className={`my-auto leading-none`}>\n          {circleDef.disabled && t('Disabled:')} {circleDef?.name}\n          {permissionDetails && `: ${permissionDetails}`}\n        </p>\n        {!hideMembers ? (\n          membersLoading ? (\n            <LoadingParagraph className=\"mt-1 h-4 w-full\" />\n          ) : (\n            <small className=\"block\">\n              {members\n                ? `${members.length} ${members.length === 1 ? t('member') : t('members')}`\n                : null}\n            </small>\n          )\n        ) : null}\n      </div>\n      {!onClick && <Arrow className=\"my-auto ml-2 h-5 w-5\" />}\n    </LinkWrapper>\n  );\n};\n\nexport default CirclePermissionView;\n","import { FC } from 'react';\n\nconst Triangle: FC<IconProps> = ({ className }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 384 512\"\n      fill=\"currentColor\"\n      className={className}\n    >\n      <path d=\"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z\" />\n    </svg>\n  );\n};\n\nexport default Triangle;\n","import React from 'react';\nimport { ReactNode, Ref } from 'react';\n\nconst Section = React.forwardRef(\n  (\n    {\n      title,\n      actions,\n      className,\n      children,\n      isOpaqueBg = false,\n      isBorderLess = false,\n    }: {\n      title?: ReactNode;\n      actions?: ReactNode;\n      className?: string;\n      children: ReactNode;\n      isOpaqueBg?: boolean;\n      isBorderLess?: boolean;\n    },\n    ref: Ref<HTMLElement>\n  ) => {\n    return (\n      <section\n        ref={ref}\n        className={`my-5 rounded-md ${\n          isOpaqueBg\n            ? isBorderLess\n              ? ''\n              : 'rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700'\n            : 'bg-slate-50 px-5 dark:bg-slate-800'\n        } dark:text-slate-300 ${className ?? ''}`}\n      >\n        {title || actions ? (\n          <div\n            className={`relative flex flex-row items-center border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700`}\n          >\n            <h3 className=\"text-2xl dark:text-white\">{title}</h3>\n            <div className=\"ml-auto\">\n              <div className=\"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center\">\n                {actions}\n              </div>\n            </div>\n          </div>\n        ) : null}\n        <div className=\"py-5 \">{children}</div>\n      </section>\n    );\n  }\n);\n\nexport default Section;\n","import { useQuery } from '@tanstack/react-query';\nimport AppManagementProvider from '../../provider/app/AppManagementProvider';\nimport useAuth from '../auth/useAuth';\n\nconst useApps = () => {\n  const { getSharedSecret } = useAuth();\n\n  const appManagementProvider = AppManagementProvider.getInstance(getSharedSecret());\n\n  const fetchRegistered = async () => {\n    const apps = await appManagementProvider.GetAppRegistrations();\n    return apps?.sort((a, b) => (a.isRevoked ? 1 : 0) - (b.isRevoked ? 1 : 0));\n  };\n\n  return {\n    fetchRegistered: useQuery(['registeredApps'], () => fetchRegistered(), {\n      refetchOnWindowFocus: false,\n    }),\n  };\n};\n\nexport default useApps;\n","import { useQuery } from '@tanstack/react-query';\nimport { CircleProvider } from '../../provider/connections/CircleProvider';\nimport useAuth from '../auth/useAuth';\n\nconst useCircles = () => {\n  const { getSharedSecret } = useAuth();\n  const circleProvider = CircleProvider.getInstance(getSharedSecret());\n\n  const fetchAll = async () => {\n    const circles = await circleProvider.getCircles();\n    return circles?.sort((a, b) => (a.disabled ? 1 : 0) - (b.disabled ? 1 : 0));\n  };\n\n  return {\n    fetch: useQuery(['circles'], () => fetchAll(), {\n      refetchOnWindowFocus: false,\n    }),\n  };\n};\n\nexport default useCircles;\n","import { useQuery } from '@tanstack/react-query';\nimport { ApiType, CoreClient, TargetDrive } from '@youfoundation/dotyoucore-js';\nimport useAuth from '../auth/useAuth';\n\nconst useDrive = ({ targetDrive }: { targetDrive: TargetDrive }) => {\n  const { getSharedSecret } = useAuth();\n  const client = new CoreClient({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const fetch = async (targetDrive: TargetDrive) => {\n    const allDrives = await (\n      await client.driveProvider.GetDrives({ pageNumber: 1, pageSize: 100 })\n    ).results;\n\n    return allDrives.find(\n      (drive) =>\n        drive.targetDriveInfo.alias === targetDrive.alias &&\n        drive.targetDriveInfo.type === targetDrive.type\n    );\n  };\n\n  return {\n    fetch: useQuery(\n      ['drive', `${targetDrive.alias}_${targetDrive.type}`],\n      () => fetch(targetDrive),\n      {\n        refetchOnWindowFocus: false,\n      }\n    ),\n  };\n};\n\nexport default useDrive;\n","import { useMutation } from '@tanstack/react-query';\nimport { AccessControlList, DriveDefinition } from '@youfoundation/dotyoucore-js';\nimport { UploadInstructionSet } from '@youfoundation/dotyoucore-js';\nimport { UploadFileMetadata } from '@youfoundation/dotyoucore-js';\nimport { AppFileMetaData } from '@youfoundation/dotyoucore-js';\nimport { DataUtil } from '@youfoundation/dotyoucore-js';\nimport { ApiType, CoreClient, DriveSearchResult, TargetDrive } from '@youfoundation/dotyoucore-js';\nimport useAuth from '../auth/useAuth';\n\nconst includeMetadataHeader = true;\nconst pageSize = 10;\nconst maxPages = 10;\n\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\n\nexport interface importable {\n  metadata: {\n    drive: DriveDefinition;\n    date: string;\n  };\n  files: importableFile[];\n}\nexport interface importableFile {\n  fileId: string;\n  fileMetadata: {\n    contentType: string;\n    senderDotYouId: string;\n    payloadIsEncrypted: boolean;\n    accessControlList: AccessControlList;\n    appData: AppFileMetaData;\n  };\n  payload: string | Record<string, unknown>;\n}\n\nexport const isImportable = (obj: unknown): obj is importable => {\n  if (typeof obj !== 'object' || !('metadata' in obj) || !('files' in obj)) {\n    return false;\n  }\n\n  if (\n    !('files' in obj) ||\n    !Array.isArray(obj['files']) ||\n    obj['files'] === null ||\n    obj['files'].length === 0\n  ) {\n    return false;\n  }\n\n  if (\n    obj['files'].some((entry) => {\n      return (\n        !('payload' in entry) ||\n        !('fileId' in entry) ||\n        !('fileMetadata' in entry) ||\n        !('contentType' in entry.fileMetadata) ||\n        !(typeof entry.payload === 'string' || typeof entry.payload === 'object')\n      );\n    })\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\nconst useExport = () => {\n  const { getSharedSecret } = useAuth();\n  const coreClient = new CoreClient({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const getAllFilesOnDrive = async (drive: TargetDrive) => {\n    const queryBatch = async (cursorState: string) => {\n      return await coreClient.driveProvider.QueryBatch(\n        { targetDrive: drive },\n        {\n          maxRecords: pageSize,\n          includeMetadataHeader: includeMetadataHeader,\n          cursorState: cursorState,\n        }\n      );\n    };\n\n    const searchResults: DriveSearchResult[] = [];\n    let cursorState: string | undefined = undefined;\n\n    for (let i = 0; i < maxPages; i++) {\n      const response = await queryBatch(cursorState);\n      searchResults.push(...response.searchResults);\n      cursorState = response.cursorState;\n\n      if (response.searchResults.length < pageSize) {\n        break;\n      }\n    }\n\n    return searchResults;\n  };\n\n  const exportUnencrypted = async (drive: DriveDefinition) => {\n    const targetDrive = drive.targetDriveInfo;\n    const searchResults = await getAllFilesOnDrive(targetDrive);\n\n    const getPayload = async (result: DriveSearchResult) => {\n      if (result.fileMetadata.contentType === 'application/json') {\n        return await coreClient.driveProvider.GetPayload(\n          targetDrive,\n          result.fileId,\n          result.fileMetadata,\n          result.sharedSecretEncryptedKeyHeader,\n          includeMetadataHeader\n        );\n      } else {\n        const keyheader = result.fileMetadata.payloadIsEncrypted\n          ? await coreClient.driveProvider.DecryptKeyHeader(result.sharedSecretEncryptedKeyHeader)\n          : undefined;\n\n        return await coreClient.driveProvider.GetPayloadBytes(\n          targetDrive,\n          result.fileId,\n          keyheader\n        );\n      }\n    };\n\n    const getFile = async (result) => {\n      return {\n        fileId: result.fileId,\n        fileMetadata: {\n          contentType: result.fileMetadata.contentType,\n          senderDotYouId: result.fileMetadata.senderDotYouId,\n          payloadIsEncrypted: result.fileMetadata.payloadIsEncrypted,\n          accessControlList: result.serverMetadata.accessControlList,\n          appData: {\n            ...result.fileMetadata.appData,\n            jsonContent: undefined,\n            previewThumbnail: undefined,\n            additionalThumbnails: undefined,\n            contentIsComplete: undefined,\n          },\n        },\n        payload: await getPayload(result),\n      };\n    };\n\n    //TODO Remove this debug code\n    let resultsWithPayload: unknown[];\n    if (localStorage.getItem('export-timeout')) {\n      const timeout = parseInt(localStorage.getItem('export-timeout'));\n      console.log('exporting with', timeout);\n      resultsWithPayload = [];\n\n      for (let i = 0; i < searchResults.length; i++) {\n        await delay(timeout);\n\n        resultsWithPayload.push(await getFile(searchResults[i]));\n      }\n    } else {\n      resultsWithPayload = await Promise.all(\n        searchResults.map(async (result) => await getFile(result))\n      );\n    }\n\n    const exportable = {\n      metadata: { drive: { ...drive }, date: new Date().toString() },\n      files: resultsWithPayload,\n    };\n\n    const stringified = DataUtil.JsonStringify64(exportable);\n    const url = window.URL.createObjectURL(\n      new Blob([stringified], { type: 'application/json;charset=utf-8' })\n    );\n\n    return url;\n  };\n\n  const clearAllFilesOnDrive = async (drive: TargetDrive) => {\n    const searchResults = await getAllFilesOnDrive(drive);\n\n    return await Promise.all(\n      searchResults.map(\n        async (result) => await coreClient.driveProvider.DeleteFile(drive, result.fileId)\n      )\n    );\n  };\n\n  const importUnencrypted = async ({\n    drive,\n    formatDrive,\n    data,\n  }: {\n    drive?: TargetDrive;\n    formatDrive?: boolean;\n    data: unknown;\n  }) => {\n    if (!isImportable(data)) {\n      return [{ fileId: 'root', status: false }];\n    }\n\n    let targetDrive = drive;\n\n    if (!targetDrive) {\n      await coreClient.driveProvider.EnsureDrive(\n        data.metadata.drive.targetDriveInfo,\n        data.metadata.drive.name,\n        data.metadata.drive.metadata,\n        data.metadata.drive.allowAnonymousReads\n      );\n\n      targetDrive = data.metadata.drive.targetDriveInfo;\n    } else if (formatDrive) {\n      await clearAllFilesOnDrive(targetDrive);\n    }\n\n    return await Promise.all(\n      data.files.map(async (file) => {\n        try {\n          // Check if image file:\n          if (\n            ['image/png', 'image/jpeg', 'image/tiff', 'image/webp', 'image/svg+xml'].includes(\n              file.fileMetadata.contentType\n            )\n          ) {\n            await coreClient.mediaProvider.uploadImage(\n              targetDrive,\n              file.fileMetadata.appData.tags,\n              file.fileMetadata.accessControlList,\n              DataUtil.base64ToUint8Array(file.payload.toString()),\n              formatDrive ? undefined : file.fileId,\n              file.fileMetadata.contentType\n            );\n          } else {\n            const instructionSet: UploadInstructionSet = {\n              transferIv: coreClient.driveProvider.Random16(),\n              storageOptions: {\n                overwriteFileId: formatDrive ? undefined : file.fileId,\n                drive: targetDrive,\n              },\n              transitOptions: null,\n            };\n\n            const payloadJson =\n              file.fileMetadata.contentType === 'application/json' &&\n              DataUtil.JsonStringify64(file.payload);\n            const payloadBytes = payloadJson\n              ? DataUtil.stringToUint8Array(payloadJson)\n              : DataUtil.base64ToUint8Array(file.payload.toString());\n\n            const shouldEmbedContent = payloadBytes.length < 3000;\n            const metadata: UploadFileMetadata = {\n              contentType: file.fileMetadata.contentType,\n              senderDotYouId: file.fileMetadata.senderDotYouId,\n              payloadIsEncrypted: file.fileMetadata.payloadIsEncrypted,\n              accessControlList: file.fileMetadata.accessControlList,\n              appData: {\n                ...file.fileMetadata.appData,\n                contentIsComplete: shouldEmbedContent,\n                jsonContent: shouldEmbedContent ? payloadJson : null,\n              },\n            };\n\n            await coreClient.driveProvider.Upload(\n              instructionSet,\n              metadata,\n              payloadBytes,\n              undefined,\n              file.fileMetadata.payloadIsEncrypted\n            );\n          }\n        } catch (ex) {\n          console.error(ex);\n          return { fileId: file.fileId, status: false };\n        }\n\n        return { fileId: file.fileId, status: true };\n      })\n    );\n  };\n\n  return {\n    exportUnencrypted: useMutation(exportUnencrypted),\n    importUnencrypted: useMutation(importUnencrypted),\n  };\n};\n\nexport default useExport;\n","import {\n  AppClientRegistrationRequest,\n  AppClientRegistrationResponse,\n  AppRegistrationRequest,\n  RedactedAppRegistration,\n  GetAppRequest,\n} from './AppManagementProviderTypes';\nimport { OwnerProviderBase } from '../OwnerProviderBase';\n\nexport default class AppManagementProvider extends OwnerProviderBase {\n  private static instance: AppManagementProvider;\n  constructor(sharedSecret: Uint8Array | undefined) {\n    super(sharedSecret);\n  }\n\n  //adds the specified client to the list of allowed clients for a given app; returns a CAT\n  async RegisterAppClient(\n    request: AppClientRegistrationRequest\n  ): Promise<AppClientRegistrationResponse> {\n    const client = this.createAxiosClient();\n    const response = await client.post<AppClientRegistrationResponse>(\n      'appmanagement/register/client',\n      request\n    );\n    return response.data;\n  }\n\n  async RegisterChatAppClient_temp(\n    request: AppClientRegistrationRequest\n  ): Promise<AppClientRegistrationResponse> {\n    const client = this.createAxiosClient();\n    const response = await client.post<AppClientRegistrationResponse>(\n      'appmanagement/register/chatclient_temp',\n      request\n    );\n    console.log('RegisterChatAppClient_temp returning response');\n    console.log(response);\n\n    return response.data;\n  }\n\n  async RegisterApp(request: AppRegistrationRequest): Promise<RedactedAppRegistration> {\n    const client = this.createAxiosClient();\n    const response = await client.post<RedactedAppRegistration>(\n      'appmanagement/register/app',\n      request\n    );\n\n    console.log('RegisterApp returning response');\n    console.log(response);\n\n    return response.data;\n  }\n\n  async GetAppRegistration(request: GetAppRequest): Promise<RedactedAppRegistration> {\n    const client = this.createAxiosClient();\n    const response = await client.post<RedactedAppRegistration>('appmanagement/app', request);\n    return response.data;\n  }\n\n  async GetAppRegistrations(): Promise<RedactedAppRegistration[]> {\n    const client = this.createAxiosClient();\n    const response = await client.get<RedactedAppRegistration[]>('appmanagement/list');\n    return response.data;\n  }\n\n  async RevokeApp(request: GetAppRequest): Promise<void> {\n    const client = this.createAxiosClient();\n    await client.post('appmanagement/revoke', request);\n  }\n\n  async AllowApp(request: GetAppRequest): Promise<void> {\n    const client = this.createAxiosClient();\n    const response = await client.post('appmanagement/allow', request);\n    console.log(response);\n  }\n\n  public static getInstance(sharedSecret): AppManagementProvider {\n    if (!AppManagementProvider.instance) {\n      AppManagementProvider.instance = new AppManagementProvider(sharedSecret);\n    }\n\n    return AppManagementProvider.instance;\n  }\n}\n","import { t } from '../../helpers/i18n/dictionary';\n\nexport const drivePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Reader'), value: 1 },\n  { name: t('Editor'), value: 3 },\n];\n\nexport const circlePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Read Connections'), value: 10 },\n  { name: t('Read Circle Members'), value: 50 },\n];\n\nexport const appPermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Read Connections'), value: 10 },\n  { name: t('Manage Connection Requests'), value: 30 },\n  { name: t('Read Circle Members'), value: 50 },\n];\n","import { DriveDefinition } from '@youfoundation/dotyoucore-js';\nimport { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useCircle from '../../../hooks/circles/useCircle';\nimport useCircles from '../../../hooks/circles/useCircles';\nimport usePortal from '../../../hooks/portal/usePortal';\nimport { CircleDefinition } from '../../../provider/connections/CircleDataTypes';\nimport { drivePermissionLevels } from '../../../provider/permission/permissionLevels';\nimport ErrorNotification from '../../ui/Alerts/ErrorNotification/ErrorNotification';\nimport ActionButton, { ActionButtonState } from '../../ui/Buttons/ActionButton';\nimport PermissionLevelEditor from '../../Form/PermissionLevelEditor';\nimport CirclePermissionView from '../../PermissionViews/CirclePermissionView/CirclePermissionView';\nimport DialogWrapper from '../../ui/Dialog/DialogWrapper';\n\nconst DriveAccessDialog = ({\n  title,\n  confirmText,\n\n  isOpen,\n  driveDefinition,\n\n  onConfirm,\n  onCancel,\n}: {\n  title: string;\n  confirmText?: string;\n\n  isOpen: boolean;\n  driveDefinition: DriveDefinition;\n\n  onConfirm: () => void;\n  onCancel: () => void;\n}) => {\n  const target = usePortal('modal-container');\n\n  const targetDriveInfo = driveDefinition.targetDriveInfo;\n\n  const [saveState, setSaveState] = useState<ActionButtonState>('idle');\n\n  const { data: circles } = useCircles().fetch;\n  const { mutateAsync: updateCircle, error: updateError } = useCircle({}).createOrUpdate;\n\n  // TODO: Add apps as well\n  // const { data: apps } = useApps().fetchRegistered;\n\n  const [newCircles, setNewCircles] = useState<CircleDefinition[]>([]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const dialog = (\n    <DialogWrapper title={title} onClose={onCancel}>\n      <>\n        <ErrorNotification error={updateError} />\n        <form\n          onSubmit={async (e) => {\n            e.preventDefault();\n            setSaveState('loading');\n\n            try {\n              await Promise.all(newCircles.map(async (circle) => await updateCircle(circle)));\n            } catch (ex) {\n              setSaveState('error');\n            }\n            setSaveState('success');\n\n            onConfirm();\n            return false;\n          }}\n        >\n          {circles?.length ? (\n            <div className=\"-my-4\">\n              {circles.map((circle) => {\n                const matchingNewCircle = newCircles?.find(\n                  (newCircle) => newCircle.id === circle.id\n                );\n\n                const driveGrant = (matchingNewCircle ?? circle).driveGrants?.find(\n                  (driveGrant) =>\n                    driveGrant.permissionedDrive.drive.alias === targetDriveInfo.alias &&\n                    driveGrant.permissionedDrive.drive.type === targetDriveInfo.type\n                );\n\n                const isChecked = driveGrant?.permissionedDrive.permission > 0;\n\n                return (\n                  <div\n                    className={`my-4 flex w-full select-none flex-row rounded-lg border p-4 dark:border-slate-800 ${\n                      isChecked && 'bg-slate-50 dark:bg-slate-700'\n                    }`}\n                    key={circle.id}\n                  >\n                    <CirclePermissionView\n                      key={circle.id}\n                      circleDef={circle}\n                      onClick={() => undefined}\n                      isChecked={isChecked}\n                    />\n                    <PermissionLevelEditor\n                      className=\"ml-auto\"\n                      permissionLevels={drivePermissionLevels}\n                      defaultValue={driveGrant?.permissionedDrive.permission}\n                      onChange={(newValue) => {\n                        setNewCircles([\n                          ...newCircles.filter((circleToUpdate) => circleToUpdate.id !== circle.id),\n                          {\n                            ...circle,\n\n                            driveGrants: [\n                              ...circle.driveGrants.filter(\n                                (driveGrant) =>\n                                  driveGrant.permissionedDrive.drive.alias !==\n                                    targetDriveInfo.alias &&\n                                  driveGrant.permissionedDrive.drive.type !== targetDriveInfo.type\n                              ),\n                              {\n                                permissionedDrive: {\n                                  drive: { ...targetDriveInfo },\n                                  permission: newValue,\n                                },\n                              },\n                            ],\n                          },\n                        ]);\n                      }}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          ) : null}\n          <div className=\"-m-2 flex flex-row-reverse py-3\">\n            <ActionButton className=\"m-2\" icon={'send'} state={saveState}>\n              {confirmText || t('Save')}\n            </ActionButton>\n            <ActionButton className=\"m-2\" type=\"secondary\" onClick={onCancel}>\n              {t('Cancel')}\n            </ActionButton>\n          </div>\n        </form>\n      </>\n    </DialogWrapper>\n  );\n\n  return createPortal(dialog, target);\n};\n\nexport default DriveAccessDialog;\n","import { DriveDefinition } from '@youfoundation/dotyoucore-js';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useApps from '../../../hooks/apps/useApps';\nimport useCircles from '../../../hooks/circles/useCircles';\nimport { drivePermissionLevels } from '../../../provider/permission/permissionLevels';\nimport AppMembershipView from '../../../components/PermissionViews/AppPermissionView/AppPermissionView';\nimport CirclePermissionView from '../../../components/PermissionViews/CirclePermissionView/CirclePermissionView';\nimport Section from '../../../components/ui/Sections/Section';\nimport { getAccessFromPermissionNumber } from '../../DemoData/helpers';\n\nconst DrivePermissionOverview = ({ driveDefinition }: { driveDefinition: DriveDefinition }) => {\n  const { data: circles } = useCircles().fetch;\n  const { data: apps } = useApps().fetchRegistered;\n\n  const targetDriveInfo = driveDefinition.targetDriveInfo;\n\n  const circlesWithAGrantOnThis = circles?.filter((circle) =>\n    circle.driveGrants?.some(\n      (grant) =>\n        grant.permissionedDrive.drive.alias === targetDriveInfo.alias &&\n        grant.permissionedDrive.drive.type === targetDriveInfo.type\n    )\n  );\n\n  const appsWithAGrantOnThis = apps?.filter((app) =>\n    app.grant.driveGrants.some(\n      (grant) =>\n        grant.permissionedDrive.drive.alias === targetDriveInfo.alias &&\n        grant.permissionedDrive.drive.type === targetDriveInfo.type\n    )\n  );\n\n  return (\n    <>\n      {circlesWithAGrantOnThis?.length ? (\n        <Section title={t('Circles with access:')} isOpaqueBg={true}>\n          <ul className=\"-my-4\">\n            {circlesWithAGrantOnThis.map((circle) => {\n              const matchingGrant = circle.driveGrants.find(\n                (grant) =>\n                  grant.permissionedDrive.drive.alias === targetDriveInfo.alias &&\n                  grant.permissionedDrive.drive.type === targetDriveInfo.type\n              );\n              return (\n                <CirclePermissionView\n                  circleDef={circle}\n                  key={circle.id}\n                  permissionDetails={\n                    getAccessFromPermissionNumber(\n                      matchingGrant?.permissionedDrive?.permission,\n                      drivePermissionLevels\n                    ).name\n                  }\n                  className=\"my-4\"\n                />\n              );\n            })}\n          </ul>\n        </Section>\n      ) : null}\n\n      {appsWithAGrantOnThis?.length ? (\n        <Section title={t('Apps with access:')} isOpaqueBg={true}>\n          <ul className=\"-my-4\">\n            {appsWithAGrantOnThis.map((app) => {\n              const matchingGrant = app.grant.driveGrants.find(\n                (grant) =>\n                  grant.permissionedDrive.drive.alias === targetDriveInfo.alias &&\n                  grant.permissionedDrive.drive.type === targetDriveInfo.type\n              );\n              return (\n                <AppMembershipView\n                  className=\"my-4\"\n                  appDef={app}\n                  key={app.appId}\n                  permissionLevel={\n                    getAccessFromPermissionNumber(\n                      matchingGrant?.permissionedDrive.permission,\n                      drivePermissionLevels\n                    ).name\n                  }\n                />\n              );\n            })}\n          </ul>\n        </Section>\n      ) : null}\n    </>\n  );\n};\n\nexport default DrivePermissionOverview;\n","import { FC, ReactNode } from 'react';\n\nimport Arrow from '../Icons/Arrow/Arrow';\nimport Check from '../Icons/Check/Check';\nimport Exclamation from '../Icons/Exclamation/Exclamation';\nimport Loader from '../Icons/Loader/Loader';\nimport Pencil from '../Icons/Pencil/Pencil';\nimport Plus from '../Icons/Plus/Plus';\nimport Save from '../Icons/Save/Save';\nimport Shield from '../Icons/Shield/Shield';\nimport Trash from '../Icons/Trash/Trash';\n\nexport type ActionLinkState = 'loading' | 'success' | 'error' | 'idle';\n\ntype ActionLinkProps = {\n  children?: ReactNode;\n  className?: string;\n  icon?: 'save' | 'send' | 'plus' | 'trash' | 'edit' | 'up' | 'down' | 'shield';\n  type?: 'primary' | 'secondary' | 'remove' | 'mute';\n  state?: ActionLinkState;\n  title?: string;\n  size?: 'large' | 'small';\n  onClick?: (e) => void;\n\n  download?: string;\n  href?: string;\n};\n\nexport const mergeStates = (stateA: ActionLinkState, stateB: ActionLinkState): ActionLinkState => {\n  if (stateA === 'error' || stateB === 'error') {\n    return 'error';\n  }\n\n  if (stateA === 'loading' || stateB === 'loading') {\n    return 'loading';\n  }\n\n  if (stateA === 'idle' && stateB === 'idle') {\n    return 'idle';\n  }\n\n  if (stateA === 'success' && stateB === 'success') {\n    return 'success';\n  }\n\n  if ((stateA === 'success' && stateB === 'idle') || (stateA === 'idle' && stateB === 'success')) {\n    return 'success';\n  }\n};\n\nconst ActionLink: FC<ActionLinkProps> = ({\n  children,\n  className,\n  icon,\n  type,\n  state,\n  title,\n  size,\n  onClick,\n\n  download,\n  href,\n}) => {\n  const Icon = (props: { className: string }) => {\n    if (state === 'loading') {\n      return <Loader {...props} />;\n    }\n    if (state === 'success') {\n      return <Check {...props} />;\n    }\n    if (state === 'error') {\n      return <Exclamation {...props} />;\n    }\n\n    return icon === 'save' ? (\n      <Save {...props} />\n    ) : icon === 'send' ? (\n      <Arrow {...props} />\n    ) : icon === 'plus' ? (\n      <Plus {...props} />\n    ) : icon === 'trash' ? (\n      <Trash {...props} />\n    ) : icon === 'edit' ? (\n      <Pencil {...props} />\n    ) : icon === 'up' ? (\n      <Arrow {...props} className={`-rotate-90 ${props.className}`} />\n    ) : icon === 'down' ? (\n      <Arrow {...props} className={`rotate-90 ${props.className}`} />\n    ) : icon === 'shield' ? (\n      <Shield {...props} fill=\"currentColor\" />\n    ) : (\n      <></>\n    );\n  };\n\n  const colorClasses =\n    state === 'error'\n      ? 'bg-red-500 hover:bg-red-600 text-white'\n      : type === 'secondary'\n      ? 'bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-800 dark:text-white'\n      : type === 'remove'\n      ? 'bg-red-200 hover:bg-red-400 dark:bg-red-700 hover:dark:bg-red-800 dark:text-white'\n      : type === 'mute'\n      ? ''\n      : 'bg-green-500 hover:bg-green-600 text-white';\n\n  const widthClasses =\n    children && type !== 'mute'\n      ? `min-w-[6rem] ${className?.indexOf('w-full') ? '' : 'w-full sm:w-auto'}`\n      : '';\n\n  const sizeClasses =\n    size === 'large' ? 'px-5 py-3' : size === 'small' ? 'px-3 py-1 text-sm' : 'px-3 py-2';\n\n  const stateClasses = state === 'loading' ? 'animate-pulse' : '';\n\n  return (\n    <>\n      <a\n        className={`relative flex flex-row rounded-md text-left ${widthClasses} ${sizeClasses} ${colorClasses} ${stateClasses} ${className}`}\n        download={download}\n        href={href}\n        title={title}\n        onClick={onClick}\n      >\n        {children && <span className=\"mr-1\">{children}</span>}\n        <Icon className={'my-auto ml-auto h-4 w-4'} />\n      </a>\n    </>\n  );\n};\n\nexport default ActionLink;\n","import { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useDrive from '../../../hooks/drives/useDrive';\nimport ActionButton from '../../../components/ui/Buttons/ActionButton';\nimport DriveAccessDialog from '../../../components/Dialog/DriveAccessDialog/DriveAccessDialog';\nimport DrivePermissionOverview from '../DrivePermissionOverview/DrivePermissionOverview';\nimport HardDrive from '../../../components/ui/Icons/HardDrive/HardDrive';\nimport PageMeta from '../../../components/ui/Layout/PageMeta/PageMeta';\nimport Section from '../../../components/ui/Sections/Section';\nimport LoadingDetailPage from '../../../components/ui/Loaders/LoadingDetailPage/LoadingDetailPage';\nimport useExport from '../../../hooks/drives/useExport';\nimport ActionLink from '../../../components/ui/Buttons/ActionLink';\nimport ImportDialog from '../../../components/Dialog/ImportDialog/ImportDialog';\n\nconst DriveDetails = () => {\n  const { driveKey } = useParams();\n  const splittedDriveKey = driveKey.split('_');\n  const {\n    fetch: { data: driveDef, isLoading: driveDefLoading },\n  } = useDrive({ targetDrive: { alias: splittedDriveKey[0], type: splittedDriveKey[1] } });\n  const { mutateAsync: exportUnencrypted, status: exportStatus } = useExport().exportUnencrypted;\n\n  const [downloadUrl, setDownloadUrl] = useState<string>();\n\n  const [isImportOpen, setIsImportOpen] = useState(false);\n  const [isEditAccess, setIsEditAccess] = useState(false);\n\n  if (driveDefLoading) {\n    return <LoadingDetailPage />;\n  }\n\n  if (!driveDef) {\n    return <>No matching drive found</>;\n  }\n\n  return (\n    <>\n      <PageMeta\n        icon={HardDrive}\n        title={`${driveDef.name}`}\n        actions={\n          <>\n            {downloadUrl ? (\n              <ActionLink\n                className=\"m-2 animate-pulse\"\n                href={downloadUrl}\n                download={`${driveDef.name}.json`}\n                onClick={() => setDownloadUrl(undefined)}\n                type=\"primary\"\n              >\n                {t('Click to Download')}\n              </ActionLink>\n            ) : (\n              <ActionButton\n                onClick={async () => setDownloadUrl(await exportUnencrypted(driveDef))}\n                className=\"m-2\"\n                state={exportStatus}\n                type=\"secondary\"\n              >\n                {t('Export')}\n              </ActionButton>\n            )}\n            <ActionButton\n              onClick={async () => setIsImportOpen(true)}\n              className=\"m-2\"\n              type=\"secondary\"\n            >\n              {t('Import files')}...\n            </ActionButton>\n            <ActionButton onClick={() => setIsEditAccess(true)} className=\"m-2\">\n              {t('Edit Access')}\n            </ActionButton>\n          </>\n        }\n        breadCrumbs={[\n          { href: '/owner/drives', title: 'My Drives' },\n          { title: driveDef.name ?? '' },\n        ]}\n      />\n      <Section title={t('Metadata')} isOpaqueBg={true}>\n        <p>{driveDef.metadata}</p>\n        <ul>\n          {driveDef.allowAnonymousReads ? <li>Allow Anonymous Reads</li> : null}\n          {driveDef.ownerOnly ? <li>Owner only</li> : null}\n          <li>Alias: {driveDef.targetDriveInfo.alias}</li>\n          <li>Type: {driveDef.targetDriveInfo.type}</li>\n        </ul>\n      </Section>\n\n      <DrivePermissionOverview driveDefinition={driveDef} />\n\n      <ImportDialog\n        title={`${t('Import to')} ${driveDef.name}`}\n        isOpen={isImportOpen}\n        onConfirm={() => setIsImportOpen(false)}\n        onCancel={() => setIsImportOpen(false)}\n        targetDrive={driveDef.targetDriveInfo}\n      />\n\n      <DriveAccessDialog\n        driveDefinition={driveDef}\n        isOpen={isEditAccess}\n        onCancel={() => {\n          setIsEditAccess(false);\n        }}\n        onConfirm={() => {\n          setIsEditAccess(false);\n        }}\n        title={`${t('Edit access on')} ${driveDef.name}`}\n      />\n    </>\n  );\n};\n\nexport default DriveDetails;\n"],"names":["title","confirmText","isOpen","targetDrive","onCancel","target","usePortal","useExport","importUnencrypted","mutateAsync","importStatus","status","importError","error","useState","errorMessage","setErrorMessage","dataObject","setDataObject","importDataStatus","setImportDataStatus","importData","formatDrive","drive","data","dialog","onClose","size","type","className","onChange","e","file","files","arrayBuffer","contents","DataUtil","Uint8Array","JSON","parse","isImportable","t","undefined","accept","metadata","targetDriveInfo","alias","name","length","Date","date","toLocaleDateString","month","day","year","hour","minute","map","find","fileId","fileMetadata","contentType","onClick","state","createPortal","Option","isChecked","children","permissionLevels","defaultValue","setIsOpen","value","setInnerValue","wrapperRef","useRef","useOutsideTrigger","currentValue","reduce","prevValue","currValue","setValue","ref","level","appDef","permissionLevel","isRevoked","to","appId","circleDef","permissionDetails","hideMembers","useCircle","circleId","id","fetchMembers","members","membersLoading","isLoading","LinkWrapper","encodeURIComponent","checkedClasses","disabled","xmlns","viewBox","fill","d","Section","React","actions","isOpaqueBg","isBorderLess","getSharedSecret","useAuth","appManagementProvider","AppManagementProvider","fetchRegistered","GetAppRegistrations","apps","sort","a","b","useQuery","refetchOnWindowFocus","circleProvider","CircleProvider","fetchAll","getCircles","circles","fetch","client","CoreClient","api","ApiType","sharedSecret","driveProvider","GetDrives","pageNumber","pageSize","results","allDrives","delay","ms","Promise","res","setTimeout","obj","Array","isArray","some","entry","payload","coreClient","getAllFilesOnDrive","queryBatch","cursorState","QueryBatch","maxRecords","includeMetadataHeader","searchResults","i","response","push","exportUnencrypted","getPayload","result","GetPayload","sharedSecretEncryptedKeyHeader","payloadIsEncrypted","DecryptKeyHeader","keyheader","GetPayloadBytes","getFile","senderDotYouId","accessControlList","serverMetadata","appData","jsonContent","previewThumbnail","additionalThumbnails","contentIsComplete","localStorage","getItem","timeout","parseInt","console","log","resultsWithPayload","all","exportable","toString","stringified","url","window","URL","createObjectURL","Blob","clearAllFilesOnDrive","DeleteFile","EnsureDrive","allowAnonymousReads","includes","mediaProvider","uploadImage","tags","instructionSet","transferIv","Random16","storageOptions","overwriteFileId","transitOptions","payloadJson","payloadBytes","shouldEmbedContent","Upload","useMutation","request","this","createAxiosClient","post","get","instance","OwnerProviderBase","drivePermissionLevels","circlePermissionLevels","appPermissionLevels","driveDefinition","onConfirm","saveState","setSaveState","useCircles","createOrUpdate","updateCircle","updateError","newCircles","setNewCircles","DialogWrapper","ErrorNotification","onSubmit","preventDefault","circle","matchingNewCircle","newCircle","driveGrant","driveGrants","permissionedDrive","permission","CirclePermissionView","PermissionLevelEditor","newValue","filter","circleToUpdate","ActionButton","icon","useApps","circlesWithAGrantOnThis","grant","appsWithAGrantOnThis","app","matchingGrant","getAccessFromPermissionNumber","download","href","Icon","props","Loader","Check","Exclamation","Save","Arrow","Plus","Trash","Pencil","Shield","colorClasses","widthClasses","indexOf","sizeClasses","stateClasses","splittedDriveKey","useParams","driveKey","split","useDrive","driveDef","driveDefLoading","exportStatus","downloadUrl","setDownloadUrl","isImportOpen","setIsImportOpen","isEditAccess","setIsEditAccess","LoadingDetailPage","PageMeta","HardDrive","breadCrumbs","ownerOnly","ImportDialog"],"sourceRoot":""}