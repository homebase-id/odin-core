"use strict";(self.webpackChunkpublic_app=self.webpackChunkpublic_app||[]).push([[59],{2161:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(885),a=n(2791),i=n(4990),s=n(7686),o=n(4164),c=n(3412),l=n(8930),u=n(8034),d=n(184),f=function(e){var t=e.isOpen,n=e.title,r=e.onCancel,a=(0,c.Z)("modal-container");if(!t)return null;var i=(0,d.jsx)(l.Z,{title:n,onClose:r,children:(0,d.jsx)(u.K,{})});return(0,o.createPortal)(i,a)},p=function(e){var t=e.className,n=(0,s.Z)(),o=n.isAuthenticated,c=n.getIdentity,l=n.isOwner,u=(0,a.useState)(!1),p=(0,r.Z)(u,2),v=p[0],h=p[1];return l?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("a",{className:"hover:bg-button-hover block flex-grow cursor-pointer rounded-md bg-button px-3 py-2 text-center text-button-text sm:flex-grow-0 md:text-left ".concat(null!==t&&void 0!==t?t:""),href:o&&!l?"https://".concat(c(),"/owner/connections/").concat(window.location.host):void 0,onClick:o?void 0:function(){return h(!0)},children:(0,i.t)("Connect")}),(0,d.jsx)(f,{isOpen:v,onCancel:function(){return h(!1)},title:(0,i.t)("Login required")})]})}},815:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(885),a=n(2791),i=n(4990),s=n(7686),o=n(4164),c=n(3412),l=n(6640),u=n(8930),d=n(3243),f=n(184),p=function(e){var t=e.title,n=e.children,r=e.confirmText,a=e.isOpen,s=e.onConfirm,p=e.onCancel,v=(0,c.Z)("modal-container");if(!a)return null;var h=(0,f.jsxs)(u.Z,{title:(0,f.jsxs)("div",{className:"flex flex-row items-center",children:[(0,f.jsx)(d.Z,{className:"mr-2 h-6 w-6"})," ",t]}),onClose:p,isSidePanel:!1,children:[n,(0,f.jsx)("div",{className:"-m-2 flex flex-row-reverse py-3",children:(0,f.jsx)(l.Z,{className:"m-2",onClick:s,children:r||(0,i.t)("Ok")})})]});return(0,o.createPortal)(h,v)},v=function(e){var t=e.className,n=(0,s.Z)().isOwner,o=(0,a.useState)(!1),c=(0,r.Z)(o,2),l=c[0],u=c[1];return n?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("a",{className:"hover:bg-button-hover block flex-grow cursor-pointer rounded-md bg-button px-3 py-2 text-center text-button-text sm:flex-grow-0 md:text-left ".concat(null!==t&&void 0!==t?t:""),onClick:function(){return u(!0)},children:(0,i.t)("Follow")}),(0,f.jsx)(p,{isOpen:l,onConfirm:function(){return u(!1)},onCancel:function(){return u(!1)},title:(0,i.t)("Coming soon"),children:(0,f.jsx)("p",{children:(0,i.t)("Unfortunately it is not possible yet to follow someone. This feature will come soon")}),confirmText:(0,i.t)("Ok")})]})}},6640:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(8683),a=n(706),i=n(184),s=function(e){var t=e.className;return(0,i.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",className:t,viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,i.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]})},o=n(3352);n(5258);var c=function(e){var t=e.className;return(0,i.jsxs)("div",{className:"loader ".concat(t),children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})},l=function(e){var t=e.className;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:t,children:(0,i.jsx)("path",{d:"M421.7 220.3L188.5 453.4L154.6 419.5L158.1 416H112C103.2 416 96 408.8 96 400V353.9L92.51 357.4C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6L137.6 429.6C143.1 427.7 149.8 424.2 154.6 419.5L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3zM492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75z"})})},u=function(e){var t=e.className;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",viewBox:"0 0 448 512",children:(0,i.jsx)("path",{d:"M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"})})},d=function(e){var t=e.className;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:t,children:(0,i.jsx)("path",{d:"M433.1 129.1l-83.9-83.9C342.3 38.32 327.1 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 152.9 441.7 137.7 433.1 129.1zM224 416c-35.34 0-64-28.66-64-64s28.66-64 64-64s64 28.66 64 64S259.3 416 224 416zM320 208C320 216.8 312.8 224 304 224h-224C71.16 224 64 216.8 64 208v-96C64 103.2 71.16 96 80 96h224C312.8 96 320 103.2 320 112V208z"})})},f=function(e){var t=e.className,n=e.fill;return(0,i.jsx)("svg",{fill:null!==n&&void 0!==n?n:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"".concat(t),viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})},p=n(6034),v=function(e){var t=e.className;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:t,children:(0,i.jsx)("path",{d:"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM31.1 128H416V448C416 483.3 387.3 512 352 512H95.1C60.65 512 31.1 483.3 31.1 448V128zM111.1 208V432C111.1 440.8 119.2 448 127.1 448C136.8 448 143.1 440.8 143.1 432V208C143.1 199.2 136.8 192 127.1 192C119.2 192 111.1 199.2 111.1 208zM207.1 208V432C207.1 440.8 215.2 448 223.1 448C232.8 448 240 440.8 240 432V208C240 199.2 232.8 192 223.1 192C215.2 192 207.1 199.2 207.1 208zM304 208V432C304 440.8 311.2 448 320 448C328.8 448 336 440.8 336 432V208C336 199.2 328.8 192 320 192C311.2 192 304 199.2 304 208z"})})},h=function(e){var t=e.children,n=e.onClick,h=e.className,m=e.icon,x=e.type,g=e.state,y=e.title,w=e.size,b=e.isDisabled,Z=function(e){return"loading"===g?(0,i.jsx)(c,(0,r.Z)({},e)):"success"===g?(0,i.jsx)(s,(0,r.Z)({},e)):"error"===g?(0,i.jsx)(o.Z,(0,r.Z)({},e)):"save"===m?(0,i.jsx)(d,(0,r.Z)({},e)):"send"===m?(0,i.jsx)(a.Z,(0,r.Z)({},e)):"plus"===m?(0,i.jsx)(u,(0,r.Z)({},e)):"trash"===m?(0,i.jsx)(v,(0,r.Z)({},e)):"edit"===m?(0,i.jsx)(l,(0,r.Z)({},e)):"up"===m?(0,i.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{className:"-rotate-90 ".concat(e.className)})):"shield"===m?(0,i.jsx)(f,(0,r.Z)((0,r.Z)({},e),{},{fill:"currentColor"})):"down"===m?(0,i.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{className:"rotate-90 ".concat(e.className)})):"check"===m?(0,i.jsx)(s,(0,r.Z)((0,r.Z)({},e),{},{className:"".concat(e.className)})):"times"===m?(0,i.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{className:"".concat(e.className)})):(0,i.jsx)(i.Fragment,{})},j=("error"===g?"bg-red-500 hover:bg-red-600 text-white":"secondary"===x?"bg-button hover:bg-button-hover":"remove"===x?"bg-red-200 hover:bg-red-400 dark:bg-red-700 hover:dark:bg-red-800 dark:text-white":"mute"===x?"":"bg-button hover:bg-button-hover text-button-text")+(b?" opacity-50 cursor-not-allowed":""),N=t&&"mute"!==x?"min-w-[6rem] ".concat(null!==h&&void 0!==h&&h.indexOf("w-full")?"":"w-full sm:w-auto"):"",k="large"===w?"px-5 py-3":"small"===w?"px-3 py-1 text-sm":"square"===w?"p-2":"px-3 py-2",I="loading"===g?"animate-pulse":"";return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("button",{className:"".concat(h&&-1!==h.indexOf("absolute")?"":"relative"," flex flex-row ").concat(h&&-1!==h.indexOf("rounded-")?"":"rounded-md"," text-left ").concat(N," ").concat(k," ").concat(j," ").concat(I," ").concat(h),disabled:b||"loading"===g,onClick:n,title:y,children:[t,(0,i.jsx)(Z,{className:"my-auto ".concat(t?"ml-1":""," h-4 w-4")})]})})}},8930:function(e,t,n){var r=n(2791),a=n(1261),i=n(6034),s=n(184);t.Z=function(e){var t=e.children,n=e.title,o=e.onClose,c=e.keepOpenOnBlur,l=e.size,u=void 0===l?"large":l,d=e.isSidePanel,f=void 0!==d&&d,p=(0,r.useRef)(null);return(0,a.Z)(p,(function(){return!c&&o&&o()})),(0,s.jsxs)("div",{className:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,s.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full ".concat(f?"justify-end":"items-end justify-center sm:items-center"," p-4 text-center sm:p-0"),children:(0,s.jsx)("div",{ref:p,className:"relative transform ".concat(f?"":"overflow-hidden rounded-lg shadow-xl"," bg-white text-left  transition-all dark:bg-black sm:w-full ").concat("normal"===u?"sm:max-w-lg":"large"===u?"sm:max-w-xl":"2xlarge"===u?"sm:max-w-2xl":"sm:max-w-4xl"),children:(0,s.jsxs)("div",{className:"bg-white dark:bg-black dark:text-slate-50",children:[n||o?(0,s.jsxs)("div",{className:"flex flex-row bg-slate-100 px-4 py-4 dark:bg-slate-700 sm:px-8",children:[n?(0,s.jsx)("h3",{className:"my-3 text-2xl font-medium leading-6 text-gray-900 dark:text-slate-50",id:"modal-title",children:n}):null,o?(0,s.jsx)("button",{onClick:o,className:"ml-auto p-2",children:(0,s.jsx)(i.Z,{className:"h-5 w-5"})}):null]}):null,(0,s.jsx)("div",{className:"max-h-[calc(100vh-112px)] overflow-y-auto px-4 py-8 sm:max-h-[calc(100vh-10rem)] sm:px-8",children:t})]})})})})]})}},706:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsxs)("svg",{className:t,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5l7 7-7 7"})]})}},2170:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{className:t,stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})})}},3352:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"})})}},3243:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"})})}},8602:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},3111:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(4165),a=n(5861),i=n(7408),s=n(9631),o=n(7686),c=function(){var e=(0,o.Z)(),t=e.getSharedSecret,n=e.getApiType,c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var a,i,o,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new s.pt({api:n(),sharedSecret:t()}),e.next=3,a.fileReadOnlyProvider.GetFile("sitedata.json");case 3:if(!(i=e.sent).has("link")){e.next=8;break}if(null===(c=null===(o=i.get("link"))||void 0===o?void 0:o.sort((function(e,t){return t.payload.priority-e.payload.priority})).map((function(e){var t=e.payload;return{text:t.data[s.bD.LinkText],target:t.data[s.bD.LinkTarget],id:t.id}})))||void 0===c||!c.length){e.next=8;break}return e.abrupt("return",c);case 8:return e.next=10,a.profileDataProvider.getAttributeVersions(s.P.StandardProfileId.toString(),void 0,s.H1.Link.type.toString());case 10:return l=e.sent,e.abrupt("return",null===l||void 0===l?void 0:l.sort((function(e,t){return t.priority-e.priority})).map((function(e){return{text:e.data[s.bD.LinkText],target:e.data[s.bD.LinkTarget],id:e.id}})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useQuery)(["link"],c,{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})},l=n(1607),u=n(6991),d=n(184),f=function(e){var t=e.className;return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:t,fill:"currentColor",children:(0,d.jsx)("path",{d:"M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 21 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"})})},p=n(302),v=n(2981),h=n(9644),m=n(2680),x=n(8670),g=function(e){var t=e.className,n=e.style,r=e.includeSocials,a=e.direction,i=(0,l.Z)().data,s=c().data;if(!s)return null;var o="secondary"===n?"border-gray border-[1px] ".concat("col"===a?"py-3 px-4":"py-2 px-3"," hover:bg-gray-100 rounded"):"rounded border-0 bg-button ".concat("col"===a?"py-3 px-4":"py-2 px-3"," text-white hover:bg-button-hover"),g="col"===a?"flex-col":"flex-row";return(0,d.jsxs)("div",{className:"-m-2 flex ".concat(g," flex-wrap ").concat(t),children:[r&&(0,d.jsx)(d.Fragment,{children:null===i||void 0===i?void 0:i.social.map((function(e,t){return(0,d.jsxs)("a",{href:"dotyouid"!==e.type?"https://".concat(e.type,".com/").concat(e.username):"https://".concat(e.username),className:"m-2 flex flex-row focus:outline-none ".concat(o),target:"_blank",rel:"noopener noreferrer",children:["facebook"===e.type?(0,d.jsx)(u.Z,{className:"my-auto mr-5 h-4 w-4"}):"twitter"===e.type?(0,d.jsx)(x.Z,{className:"my-auto mr-5 h-4 w-4"}):"linkedin"===e.type?(0,d.jsx)(v.Z,{className:"my-auto mr-5 h-4 w-4"}):"instagram"===e.type?(0,d.jsx)(p.Z,{className:"my-auto mr-5 h-4 w-4"}):"tiktok"===e.type?(0,d.jsx)(m.Z,{className:"my-auto mr-5 h-4 w-4"}):"dotyouid"===e.type?(0,d.jsx)(h.Z,{className:"my-auto mr-5 h-4 w-4"}):(0,d.jsx)(f,{className:"my-auto mr-5 h-4 w-4"}),e.username]},t)}))}),s.map((function(e){return(0,d.jsxs)("a",{href:e.target,className:"m-2 flex flex-row focus:outline-none ".concat(o),target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)(f,{className:"my-auto mr-5 h-4 w-4"}),e.text]},e.target)}))]})}},316:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className,n=void 0===t?"w-full h-2 m-0":t;return(0,r.jsx)("div",{className:"".concat(n," animate-pulse rounded bg-slate-100 dark:bg-slate-700")})}},5223:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className,n=e.items,a=e.onChange,i=e.disallowWrap;return(0,r.jsx)("ul",{className:"-m-2 flex flex-row ".concat(i?"":"flex-wrap"," ").concat(null!==t&&void 0!==t?t:""," "),children:n.map((function(e){return(0,r.jsx)("li",{className:"p-2",children:(0,r.jsx)("a",{className:"block cursor-pointer select-none rounded-lg px-4 py-2 ".concat(e.isActive?"bg-button text-white":"hover:bg-button hover:bg-opacity-20"),onClick:function(){return a(e.key)},children:e.title})},e.key)}))})}},7764:function(e,t,n){var r=n(4165),a=n(8683),i=n(5861),s=n(7408),o=n(9631),c=n(7686),l=n(805);t.Z=function(e){var t=e.channelSlug,n=e.channelId,u=(0,c.Z)(),d=u.getSharedSecret,f=u.getApiType,p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s,c,u,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channelSlug,i=t.channelId,n||i){e.next=3;break}return e.abrupt("return");case 3:return s=new o.pt({api:f(),sharedSecret:d()}),c=void 0,e.next=7,s.fileReadOnlyProvider.GetFile("blogs.json");case 7:if((u=e.sent)&&u.forEach((function(e){var t=e.find((function(e){return e.header.fileMetadata.appData.fileType===o.Hm.ChannelDefinitionFileType&&(n?e.payload.slug===n:e.payload.channelId===i)}));t&&(c=t.payload)})),c){e.next=25;break}if(!n){e.next=16;break}return e.next=13,s.blogPostReadonlyProvider.getChannelDefinitionBySlug(n);case 13:e.t0=e.sent,e.next=24;break;case 16:if(!i){e.next=22;break}return e.next=19,s.blogPostReadonlyProvider.getChannelDefinition(i);case 19:e.t1=e.sent,e.next=23;break;case 22:e.t1=void 0;case 23:e.t0=e.t1;case 24:c=e.t0;case 25:if(!c){e.next=27;break}return e.abrupt("return",(0,a.Z)((0,a.Z)({},c),{},{template:(0,l.B)(null===(p=c)||void 0===p?void 0:p.templateId)}));case 27:return e.abrupt("return");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useQuery)(["channel",t||n],(function(){return p({channelSlug:t,channelId:n})}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}},805:function(e,t,n){n.d(t,{B:function(){return u}});var r=n(4165),a=n(8683),i=n(2982),s=n(5861),o=n(7408),c=n(9631),l=n(7686),u=function(e){return parseInt(e+"")===c.rJ.LargeCards?c.rJ.LargeCards:parseInt(e+"")===c.rJ.MasonryLayout?c.rJ.MasonryLayout:c.rJ.ClassicBlog};t.Z=function(){var e=(0,l.Z)(),t=e.getSharedSecret,n=e.getApiType,d=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var s,o,l,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new c.pt({api:n(),sharedSecret:t()}),l=[],e.next=4,o.fileReadOnlyProvider.GetFile("blogs.json");case 4:if((d=e.sent)&&d.forEach((function(e){var t=e.filter((function(e){return e.header.fileMetadata.appData.fileType===c.Hm.ChannelDefinitionFileType}));l=[].concat((0,i.Z)(l),(0,i.Z)(t.map((function(e){return(0,a.Z)({},e.payload)}))))})),null!==(s=l)&&void 0!==s&&s.length){e.next=10;break}return e.next=9,o.blogPostReadonlyProvider.getChannels();case 9:l=e.sent;case 10:return e.abrupt("return",l.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{template:u(null===e||void 0===e?void 0:e.templateId)})})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useQuery)(["channels"],(function(){return d()}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}},4257:function(e,t,n){var r=n(4165),a=n(5861),i=n(7408),s=n(9631),o=n(7686);t.Z=function(e){var t=e.pageSize,n=(0,o.Z)(),c=n.getSharedSecret,l=n.getApiType,u=c(),d=new s.pt({api:l(),sharedSecret:u}),f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pageSize,u){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,d.circleNetworkReadOnlyProvider.getConnections({pageNumber:1,pageSize:null!==n&&void 0!==n?n:10});case 6:return e.abrupt("return",e.sent.results);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["connections",t],(function(){return f({pageSize:t})}),{enabled:!!u,refetchOnMount:!1,refetchOnWindowFocus:!1,retry:!1})}}},3412:function(e,t,n){var r=n(2791);t.Z=function(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n,r=document.querySelector("#".concat(e)),a=r||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);if(r||(n=a,document.body.lastElementChild&&document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)),null!==t&&void 0!==t&&t.current)return a.appendChild(t.current),function(){t.current&&t.current.remove(),a.childElementCount||a.remove()}}),[e]),t.current||(t.current=document.createElement("div")),t.current}},4636:function(e,t,n){var r=n(9631),a=n(1607),i=n(1824),s=n(3111),o=n(190),c=n(2161),l=n(815),u=n(184);t.Z=function(e){var t,n,d,f=e.hideLinks,p=null!==(t=(0,a.Z)().data)&&void 0!==t?t:{},v=p.owner,h=p.home,m=p.social,x=(0,r.H3)(r.P.StandardProfileId),g=(null===v||void 0===v?void 0:v.profileImageId)&&x;return(0,u.jsxs)("section",{className:"bg-slate-500 bg-opacity-10 dark:bg-slate-500 dark:bg-opacity-10",children:[(0,u.jsxs)("div",{className:"relative h-[27vh] min-h-[330px]",children:[(0,u.jsx)(i.Z,{fileId:null===h||void 0===h?void 0:h.headerImageFileId,targetDrive:r.Ib.HomepageTargetDrive,className:"absolute inset-0",cover:!0}),(0,u.jsx)("div",{className:"container absolute top-0 left-0 right-0 bottom-0 mx-auto flex justify-center px-5 md:block",children:g?(0,u.jsx)("div",{className:"absolute bottom-[-4.5rem] h-60 w-60 overflow-hidden rounded-full border-8 border-neutral-200 md:bottom-[-7.5rem] ",children:(0,u.jsx)(i.Z,{fileId:null===v||void 0===v?void 0:v.profileImageId,targetDrive:x,className:"h-full w-full",cover:!0})}):null})]}),(0,u.jsx)("div",{className:"container mx-auto flex min-h-[8.5rem] px-5 xl:h-[8.5rem]",children:(0,u.jsx)("div",{className:"my-auto w-full ".concat(g?"pt-[5rem] md:py-4 md:pl-60":""),children:(0,u.jsxs)("div",{className:"flex flex-col ".concat(g?"md:pl-10":""," lg:flex-row"),children:[(0,u.jsxs)("div",{className:"text-center md:text-left",children:[(0,u.jsx)("h1",{className:"text-2xl",children:"".concat(null!==(n=null===v||void 0===v?void 0:v.firstName)&&void 0!==n?n:""," ").concat(null!==(d=null===v||void 0===v?void 0:v.surName)&&void 0!==d?d:"")}),(0,u.jsx)("small",{className:"block text-base",children:null===h||void 0===h?void 0:h.tagLine})]}),(0,u.jsxs)("div",{className:"my-3 flex flex-col justify-center md:my-auto md:ml-auto",children:[(0,u.jsx)("div",{className:"hidden md:contents",children:(0,u.jsx)(o.Z,{socialHandles:m,className:"mt-4 justify-center sm:mt-0 md:ml-auto md:justify-start"})}),(0,u.jsxs)("div",{className:"flex flex-row ".concat(f?"":"flex-wrap"," -my-1 justify-center md:ml-4 md:mt-3"),children:[(0,u.jsx)(l.Z,{className:"my-1 mr-3"}),(0,u.jsx)(c.Z,{className:"my-1"}),!f&&(0,u.jsx)("div",{className:"my-1",children:(0,u.jsx)(s.Z,{className:"ml-1",direction:"row"})})]})]})]})})})]})}},4059:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var r=n(8683),a=n(885),i=n(4165),s=n(5861),o=n(7408),c=n(5671),l=n(3144),u=n(1752),d=n(1120),f=n(9340),p=n(1129),v=n(9631),h=n(2008),m=new Map,x=function(e){(0,f.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e.sharedSecret)).driveProvider=void 0,r.driveProvider=e.driveProvider,r}return(0,l.Z)(n,[{key:"QueryBatch",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.createAxiosClient(),r||(r={cursorState:void 0,maxRecords:10,includeMetadataHeader:!0}),s={queryParams:n,resultOptionsRequest:r,dotYouId:t},e.abrupt("return",a.post("/transit/query/batch",s).then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"GetPayload",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,a,s,o){var c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.payloadIsEncrypted){e.next=6;break}return e.next=3,this.DecryptKeyHeader(s);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:if(c=e.t0,!a.appData.contentIsComplete||!o){e.next=14;break}return e.next=11,this.driveProvider.DecryptJsonContent(a,c);case 11:return e.abrupt("return",e.sent);case 14:return e.next=16,this.GetPayloadAsJson(t,n,r,c);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}()},{key:"GetPayloadAsJson",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.GetPayloadBytes(t,n,r,a).then((function(e){var t=v.j4.byteArrayToString(new Uint8Array(e));try{return JSON.parse(t)}catch(s){console.warn("base JSON.parse failed");var n=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},r=n(t,"\x19",""),a=n(r,"\x14",""),i=JSON.parse(a);return console.warn("... but we fixed it"),i}})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"GetPayloadBytesNoPriorHeader",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,c,l=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.createAxiosClient(),o={dotYouId:t,file:{targetDrive:n,fileId:r}},c={responseType:"arraybuffer"},e.abrupt("return",a.post("/transit/query/payload",o,c).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("True"===t.headers.payloadencrypted)){e.next=10;break}return n=v.j4.base64ToUint8Array(t.headers.sharedsecretencryptedheader64),console.log(t),r=v.j4.base64ToUint8Array(t.data.iv),console.log({iv:r}),e.next=8,v.hu.CbcDecrypt(n,r,l.getSharedSecret());case 8:a=e.sent,console.log(a);case 10:return e.abrupt("return",new Uint8Array(t.data));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw console.error(e),e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"GetPayloadBytes",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,a){var s,o,c,l=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.createAxiosClient(),o={dotYouId:t,file:{targetDrive:n,fileId:r}},c={responseType:"arraybuffer"},e.abrupt("return",s.post("/transit/query/payload",o,c).then((function(e){if(a){var t=new Uint8Array(e.data);return l.driveProvider.DecryptUsingKeyHeader(t,a).then((function(e){return e}))}return new Uint8Array(e.data)})).catch((function(e){throw console.error(e),e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"GetThumbBytes",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,a,s,o,c){var l,u,d,f=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=this.createAxiosClient(),u={dotYouId:t,file:{targetDrive:n,fileId:a}},d={responseType:"arraybuffer"},e.abrupt("return",l.post("/transit/query/thumb",(0,r.Z)((0,r.Z)({},u),{},{width:o,height:c}),d).then((function(e){if(s){var t=new Uint8Array(e.data);return f.driveProvider.DecryptUsingKeyHeader(t,s).then((function(e){return e}))}return new Uint8Array(e.data)})).catch((function(e){throw e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}()},{key:"GetFileHeader",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){var a,s,o,c,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="".concat(t,"+").concat(n.alias,"-").concat(n.type,"+").concat(r),!m.has(a)){e.next=7;break}return e.next=4,m.get(a);case 4:if(!(s=e.sent)){e.next=7;break}return e.abrupt("return",s);case 7:return o=this.createAxiosClient(),c={dotYouId:t,file:{targetDrive:n,fileId:r}},l=o.post("/transit/query/header",c).then((function(e){return e.data})).catch((function(e){throw console.error(e),e})),m.set(a,l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"DecryptKeyHeader",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.driveProvider.DecryptKeyHeader(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetDrivesByType",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,a,s){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={driveType:t,pageNumber:n,pageSize:a,dotYouId:s},c=this.createAxiosClient(),e.abrupt("return",c.post("transit/query/metadata/type",o).then((function(e){var t,n;return(0,r.Z)((0,r.Z)({},e.data),{},{results:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targetDriveInfo:e.targetDrive})}))})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){if(!e)throw new Error("Shared Secret not set for OwnerProvider");if(!n.instance){var t=new v.l$({api:v.Ii.Owner,sharedSecret:e});n.instance=new n({sharedSecret:e,driveProvider:t})}return n.instance}}]),n}(h.$);x.instance=void 0;var g=new Map,y=function(e){(0,f.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).transitProvider=void 0,r.transitProvider=x.getInstance(e),r}return(0,l.Z)(n,[{key:"getRecentsFromConnections",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var a,o,c,l,f,p,h,m,x=this,g=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>1&&void 0!==g[1]?g[1]:10,o=g.length>2?g[2]:void 0,c=g.length>3?g[3]:void 0,l=new v.pt({api:(0,u.Z)((0,d.Z)(n.prototype),"getType",this).call(this),sharedSecret:(0,u.Z)((0,d.Z)(n.prototype),"getSharedSecret",this).call(this)}),f={},e.next=7,Promise.all(t.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getChannels(t);case 2:return n=e.sent,f[t]={},e.next=6,Promise.all(n.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getRecents(t,a,null===o||void 0===o||null===(r=o[t])||void 0===r?void 0:r[n.channelId],n.channelId);case 2:return s=e.sent,f[t][n.channelId]=s.cursorState,e.abrupt("return",s.results);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:if(p=e.sent,!c){e.next=15;break}return h=window.location.hostname,e.next=12,l.blogPostReadonlyProvider.getRecentPosts(void 0,a,null===o||void 0===o?void 0:o[h]);case 12:m=e.sent,f[h]=m.cursorState,p.push([m.results.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{dotYouId:h})}))]);case 15:return e.abrupt("return",{results:p.flat(2),cursorState:f});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannels",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,c,l=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(t),!g.has(n)){e.next=7;break}return e.next=4,g.get(n);case 4:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,this.transitProvider.GetDrivesByType(v.Hm.DriveType,1,1e3,t);case 9:return a=e.sent,o=a.results.map((function(e){return{id:e.targetDriveInfo.alias,name:e.name}})),c=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(o.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getChannel(t,n.id);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.filter((function(e){return void 0!==e})));case 3:case"end":return e.stop()}}),e)})))(),g.set(n,c),e.next=15,c;case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecents",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,c,l,u,d,f=this,p=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:10,r=p.length>2?p[2]:void 0,a=p.length>3?p[3]:void 0,o=a?(0,v.V7)(a):v.Hm.PublicChannelDrive,c={targetDrive:o,fileType:[v.Hm.PostFileType]},l={cursorState:r,maxRecords:n,includeMetadataHeader:!0},e.next=8,this.transitProvider.QueryBatch(t,c,l);case 8:return u=e.sent,e.next=11,Promise.all(u.searchResults.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.fileId,e.t1=null===(r=n.serverMetadata)||void 0===r?void 0:r.accessControlList,e.next=4,f.transitProvider.GetPayload(t,o,n.fileId,n.fileMetadata,n.sharedSecretEncryptedKeyHeader,u.includeMetadataHeader);case 4:return e.t2=e.sent,e.t3=t,e.abrupt("return",{fileId:e.t0,acl:e.t1,content:e.t2,dotYouId:e.t3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return d=e.sent.filter((function(e){return!!e})),e.abrupt("return",{cursorState:u.cursorState,results:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannel",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,v.V7)(n),a={targetDrive:r,fileType:[v.Hm.ChannelDefinitionFileType]},s={cursorState:void 0,maxRecords:1,includeMetadataHeader:!0},e.next=5,this.transitProvider.QueryBatch(t,a,s);case 5:if(o=e.sent,e.prev=6,1!=o.searchResults.length){e.next=12;break}return c=o.searchResults[0],e.next=11,this.transitProvider.GetPayload(t,r,c.fileId,c.fileMetadata,c.sharedSecretEncryptedKeyHeader,o.includeMetadataHeader);case 11:return e.abrupt("return",e.sent);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(6);case 16:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){if(!e)throw new Error("Shared Secret not set for OwnerProvider");return n.instance||(n.instance=new n(e)),n.instance}}]),n}(h.$);y.instance=void 0;var w=n(7686),b=n(4257),Z=function(e){var t=e.pageSize,n=void 0===t?10:t,r=(0,w.Z)().getSharedSecret,a=(0,b.Z)({pageSize:100}).fetch,c=a.data,l=a.isFetched,u=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageParam,s=y.getInstance(r()),e.next=4,s.getRecentsFromConnections(null===c||void 0===c?void 0:c.map((function(e){return e.dotYouId})).filter(Boolean),n,a,!0);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetchAll:(0,o.useInfiniteQuery)(["social-feeds"],(function(e){var t=e.pageParam;return u({pageParam:t})}),{getNextPageParam:function(e){var t,n;return null!==(t=(null===e||void 0===e||null===(n=e.results)||void 0===n?void 0:n.length)>=1&&(null===e||void 0===e?void 0:e.cursorState))&&void 0!==t?t:void 0},refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,enabled:l})}},j=n(2791),N=n(6430),k=n(3990),I=n(316),C=n(7764),S=function(e){var t=e.dotYouId,n=e.channelId,r=(0,w.Z)().getSharedSecret,a=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dotYouId,a=t.channelId,n&&a){e.next=3;break}return e.abrupt("return");case 3:return s=y.getInstance(r()),e.next=6,s.getChannel(n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["channel",t,n],(function(){return a({dotYouId:t,channelId:n})}),{enabled:!!t&&!!n,refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}},P=n(2170),D=n(8602),T=n(8074),F=function(e){(0,f.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).transitProvider=void 0,r.transitProvider=x.getInstance(e),r}return(0,l.Z)(n,[{key:"getDecryptedMetadata",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transitProvider.GetFileHeader(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getDecryptedThumbnailMeta",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getDecryptedMetadata(t,n,r).then((function(e){var t;if(e.fileMetadata.appData.previewThumbnail){var n=e.fileMetadata.appData.previewThumbnail,r=v.j4.base64ToUint8Array(n.content),a=window.URL.createObjectURL(new Blob([r],{type:n.contentType}));return{naturalSize:{width:n.pixelWidth,height:n.pixelHeight},sizes:null!==(t=e.fileMetadata.appData.additionalThumbnails)&&void 0!==t?t:[],url:a}}})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getDecryptedImageUrl",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getDecryptedImageData(t,n,r,a).then((function(e){return window.URL.createObjectURL(new Blob([e.content],{type:e.contentType}))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getDecryptedImageData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,a){var s,o,c,l,u,d,f,p,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transitProvider.GetFileHeader(t,n,r);case 2:if(!(f=e.sent).fileMetadata.payloadIsEncrypted){e.next=9;break}return e.next=6,this.transitProvider.DecryptKeyHeader(f.sharedSecretEncryptedKeyHeader);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=void 0;case 10:return p=e.t0,v=a?this.transitProvider.GetThumbBytes(t,n,r,p,a.pixelWidth,a.pixelHeight):this.transitProvider.GetPayloadBytes(t,n,r,p),e.t1=null!==(s=null===(o=f.fileMetadata.appData.previewThumbnail)||void 0===o?void 0:o.pixelHeight)&&void 0!==s?s:0,e.t2=null!==(c=null===(l=f.fileMetadata.appData.previewThumbnail)||void 0===l?void 0:l.pixelWidth)&&void 0!==c?c:0,e.t3=null!==(u=null===(d=f.fileMetadata.appData.previewThumbnail)||void 0===d?void 0:d.contentType)&&void 0!==u?u:"",e.next=17,v;case 17:return e.t4=e.sent,e.abrupt("return",{pixelHeight:e.t1,pixelWidth:e.t2,contentType:e.t3,content:e.t4});case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){if(!e)throw new Error("Shared Secret not set for OwnerProvider");return n.instance||(n.instance=new n(e)),n.instance}}]),n}(h.$);F.instance=void 0;var M=function(e,t,n,r){var a=(0,w.Z)().getSharedSecret,c=(0,o.useQueryClient)(),l=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,r,s){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&""!==n&&r){e.next=2;break}return e.abrupt("return");case 2:return o=F.getInstance(a()),e.next=5,o.getDecryptedImageUrl(t,r,n,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["external-image",e,t,n,r],(function(){return l(e,t,n,r)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,enabled:!!e&&!!t&&!!n}),testCache:function(e,t){return!!c.getQueryData(["image",e,t])}}},O=function(e,t,n){var r=(0,w.Z)().getSharedSecret,a=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&void 0!==n&&""!==n&&a){e.next=2;break}return e.abrupt("return");case 2:return s=F.getInstance(r()),e.next=5,s.getDecryptedThumbnailMeta(t,a,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,o.useQuery)(["tinyThumb",e,t,n],(function(){return a(e,t,n)}),{enabled:!!e&&!!t&&!!n,refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,onError:function(e){return console.error(e)}})},H=n(184),L=function(e){var t,n,r,i=e.dotYouId,s=e.targetDrive,o=e.fileId,c=e.cover,l=e.className,u=e.alt,d=e.title,f=(0,j.useState)(!1),p=(0,a.Z)(f,2),v=p[0],h=p[1],m=(0,j.useState)(void 0),x=(0,a.Z)(m,2),g=x[0],y=x[1],w=(0,j.useRef)(null),b=O(i,v?o:void 0,s).data,Z=M(i,void 0!==g?o:void 0,s,"full"!==g?g:void 0),k=Z.fetch.data,I=Z.testCache;(0,N.s)(w,(function(){o&&I(o,s)&&C(),h(!0)})),(0,j.useEffect)((function(){var e;b&&null!==(e=b.url)&&void 0!==e&&e.length&&setTimeout((function(){C()}),100)}),[b]);var C=function(){var e,t,n;if(null!==b&&void 0!==b&&null!==(e=b.sizes)&&void 0!==e&&e.length&&w.current){var r=null===(t=w.current)||void 0===t?void 0:t.clientWidth,a=null===(n=w.current)||void 0===n?void 0:n.clientHeight,i=b.sizes.find((function(e){return r<e.pixelWidth&&a<e.pixelHeight}));y(null!==i&&void 0!==i?i:"full")}else y("full")},S=g?k?"loaded":"loading-full":v?b&&null!==(t=b.url)&&void 0!==t&&t.length?"tiny":"loading-tiny":"idle";return(0,H.jsx)("figure",{className:"".concat(-1!==(null===l||void 0===l?void 0:l.indexOf("absolute"))?"":"relative"," overflow-hidden ").concat(l),children:"loading-tiny"!==S?(0,H.jsx)("img",{src:"loaded"===S?k:null===b||void 0===b?void 0:b.url,alt:v&&null!==b&&void 0!==b&&b.url?u:" ",className:"".concat("loaded"!==S?"blur-[50px]":""," ").concat(c?"h-full w-full object-cover":"h-auto w-full"),title:d||"".concat(o,"@").concat(void 0!==g&&"full"!==g?"".concat(g.pixelWidth,"x").concat(g.pixelHeight):g),ref:w,width:null===b||void 0===b||null===(n=b.naturalSize)||void 0===n?void 0:n.width,height:null===b||void 0===b||null===(r=b.naturalSize)||void 0===r?void 0:r.height}):null})},A=n(1824),z=n(1607),R=n(3504),U=function(e){var t,n,r=e.className,a=e.post,i=(0,C.Z)({channelId:a.channelId}).data,s=(null!==(t=(0,z.Z)().data)&&void 0!==t?t:{}).owner,o=window.location.hostname,c=(0,v.H3)(v.P.StandardProfileId),l=a.imageFileIds;return(0,H.jsx)("div",{className:"w-full rounded-lg ".concat(null!==r&&void 0!==r?r:""),children:(0,H.jsxs)(R.rU,{to:"/home/posts/".concat(i?i.slug:"public-posts","/").concat(null!==(n=a.slug)&&void 0!==n?n:a.id),className:"relative flex h-full flex-col rounded-lg border border-gray-200 border-opacity-60 transition-colors hover:shadow-md dark:border-gray-800 hover:dark:shadow-slate-600 sm:flex-row",children:[(0,H.jsx)("div",{className:"py-4 pl-4",children:(0,H.jsx)(A.Z,{fileId:null===s||void 0===s?void 0:s.profileImageId,targetDrive:c,className:"h-[5rem] w-[5rem] rounded-full",cover:!0})}),(0,H.jsxs)("div",{className:"flex max-w-lg flex-grow flex-col py-3 px-4",children:[(0,H.jsxs)("div",{className:"pr-6",children:[(0,H.jsxs)("div",{className:"mb-1 flex flex-row items-center text-foreground text-opacity-60",children:[(0,H.jsx)("h2",{className:"mr-4",children:o}),(0,H.jsx)("span",{className:"text-xs font-medium",children:new Date(a.dateUnixTime).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,H.jsxs)("h2",{className:"ml-2 border-l pl-2 text-xs font-medium uppercase tracking-wide dark:border-slate-500",children:[a.type,null!==i&&void 0!==i&&i.name?" - ".concat(null===i||void 0===i?void 0:i.name):""]})]}),"Article"===a.type?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h1",{className:"text-foreground text-opacity-80",children:a.caption}),(0,H.jsx)("p",{className:"leading-relaxed text-foreground text-opacity-70",children:a.abstract})]}):(0,H.jsx)("h1",{className:"text-foreground text-opacity-70",children:a.caption})]}),a.primaryImageFileId&&(l&&l.length>1?(0,H.jsx)(V,{channelId:a.channelId,fileIds:l,className:"my-4"}):(0,H.jsxs)("div",{className:"relative py-4 pr-6",children:[(0,H.jsx)(A.Z,{className:"sm:rounded-lg".concat(" ","Image"===a.type||"Video"===a.type?"h-full max-h-[30rem] w-auto":"h-64 w-full md:h-36 lg:h-48"," ").concat("Video"===a.type?"aspect-video":""),fileId:a.primaryImageFileId,targetDrive:(0,v.V7)(a.channelId),alt:"post"}),"Video"===a.type&&(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(D.Z,{className:"text-color absolute top-[calc(50%-2.5rem)] left-[calc(50%-2.5rem)] h-20 w-20"})})]})),(0,H.jsx)("div",{className:"mt-auto flex items-center pr-6 text-sm text-foreground text-opacity-10",children:(0,H.jsxs)("span",{className:"inline-flex items-center",children:[(0,H.jsx)(P.Z,{className:"mr-1 inline-block h-4 w-4"})," 6"]})})]})]})})},V=function(e){var t=e.channelId,n=e.fileIds,r=e.className,a=e.maxVisible,i=void 0===a?4:a,s=n.length>i?n.slice(0,i):n,o=n.length-s.length;return(0,H.jsx)("div",{className:"overflow-hidden sm:rounded-lg ".concat(null!==r&&void 0!==r?r:""),children:(0,H.jsx)("div",{className:"-m-[2px] flex flex-row flex-wrap",children:s.map((function(e,n){return(0,H.jsx)("div",{className:"p-[2px] md:w-1/2",children:(0,H.jsxs)("div",{className:"relative h-full w-full",children:[(0,H.jsx)(A.Z,{className:"h-full max-h-[30rem] w-auto ",fileId:e,targetDrive:(0,v.V7)(t),alt:"post",cover:!0}),n===i-1&&o>0?(0,H.jsx)("div",{className:"absolute inset-0 flex flex-col justify-center bg-black bg-opacity-40 text-6xl font-light text-white",children:(0,H.jsxs)("span",{className:"block text-center",children:["+",o]})}):null]})},e)}))})})},B=function(e){var t=e.dotYouId,n=e.channelId,r=e.fileIds,a=e.className,i=e.maxVisible,s=void 0===i?4:i,o=r.length>s?r.slice(0,s):r,c=r.length-o.length;return(0,H.jsx)("div",{className:"overflow-hidden sm:rounded-lg ".concat(null!==a&&void 0!==a?a:""),children:(0,H.jsx)("div",{className:"-m-[2px] flex flex-row flex-wrap",children:o.map((function(e,r){return(0,H.jsx)("div",{className:"w-1/2 p-[2px]",children:(0,H.jsxs)("div",{className:"relative h-full w-full",children:[(0,H.jsx)(L,{className:"h-full max-h-[30rem] w-auto",fileId:e,targetDrive:(0,v.V7)(n),alt:"post",cover:!0,dotYouId:t}),r===s-1&&c>0?(0,H.jsx)("div",{className:"absolute inset-0 flex flex-col justify-center bg-black bg-opacity-40 text-6xl font-light text-white",children:(0,H.jsxs)("span",{className:"block text-center",children:["+",c]})}):null]})},e)}))})})},E=function(e){var t,n=e.className,r=e.dotYouId,a=e.post,i=S({dotYouId:r,channelId:a.channelId}).fetch.data,s=a.imageFileIds;return(0,H.jsx)("div",{className:"w-full rounded-lg ".concat(null!==n&&void 0!==n?n:""),children:(0,H.jsxs)("a",{href:"https://".concat(r,"/home/posts/").concat(i?i.slug:"public-posts","/").concat(null!==(t=a.slug)&&void 0!==t?t:a.id),target:"__blank",rel:"nofollow noreferrer",className:"relative flex h-full flex-col rounded-lg border border-gray-200 border-opacity-60 transition-colors hover:shadow-md dark:border-gray-800 hover:dark:shadow-slate-600 sm:flex-row",children:[(0,H.jsx)("div",{className:"py-4 pl-4",children:(0,H.jsx)(T.Z,{dotYouId:r,className:"h-[5rem] w-[5rem] rounded-full"})}),(0,H.jsxs)("div",{className:"flex max-w-lg flex-grow flex-col py-3 px-4",children:[(0,H.jsxs)("div",{className:"pr-6",children:[(0,H.jsxs)("div",{className:"mb-1 flex flex-row items-center text-foreground text-opacity-60",children:[(0,H.jsx)("h2",{className:"mr-4",children:r}),(0,H.jsx)("span",{className:"text-xs font-medium",children:new Date(a.dateUnixTime).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,H.jsxs)("h2",{className:"ml-2 border-l pl-2 text-xs font-medium uppercase tracking-wide dark:border-slate-500",children:[a.type,null!==i&&void 0!==i&&i.name?" - ".concat(null===i||void 0===i?void 0:i.name):""]})]}),"Article"===a.type?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h1",{className:"text-foreground text-opacity-80",children:a.caption}),(0,H.jsx)("p",{className:"leading-relaxed text-foreground text-opacity-70",children:a.abstract})]}):(0,H.jsx)("h1",{className:"text-foreground text-opacity-70",children:a.caption})]}),a.primaryImageFileId&&(s&&s.length>1?(0,H.jsx)(B,{dotYouId:r,channelId:a.channelId,fileIds:s,className:"my-4"}):(0,H.jsxs)("div",{className:"relative py-4 pr-6",children:[(0,H.jsx)(L,{className:"sm:rounded-lg".concat(" ","Image"===a.type||"Video"===a.type?"h-full max-h-[30rem] w-auto":"h-64 w-full md:h-36 lg:h-48"," ").concat("Video"===a.type?"aspect-video":""),dotYouId:r,fileId:a.primaryImageFileId,targetDrive:(0,v.V7)(a.channelId),alt:"post"}),"Video"===a.type&&(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(D.Z,{className:"text-color absolute top-[calc(50%-2.5rem)] left-[calc(50%-2.5rem)] h-20 w-20"})})]})),(0,H.jsx)("div",{className:"mt-auto flex items-center pr-6 text-sm text-foreground text-opacity-10",children:(0,H.jsxs)("span",{className:"inline-flex items-center",children:[(0,H.jsx)(P.Z,{className:"mr-1 inline-block h-4 w-4"})," 6"]})})]})]})})},G=n(6871),Y=n(2667),W=n(5223),q=n(4636),Q=n(2982),J=n(4990),_=n(805),K=function(e){(0,f.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,{api:e.api,sharedSecret:e.sharedSecret,driveProvider:e.driveProvider,blogDefinitionProvider:e.blogDefinitionProvider})}return(0,l.Z)(n,[{key:"savePost",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,c,l,u,d,f,p,h,m,x;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.content.id){e.next=4;break}t.content.id=t.content.slug?v.j4.toGuidId(t.content.slug):v.j4.getNewId(),e.next=26;break;case 4:if(t.fileId){e.next=26;break}return e.next=7,this.getPost(n,t.content.id);case 7:if(e.t2=c=e.sent,e.t1=null===e.t2,e.t1){e.next=11;break}e.t1=void 0===c;case 11:if(!e.t1){e.next=15;break}e.t3=void 0,e.next=16;break;case 15:e.t3=c.fileId;case 16:if(e.t4=o=e.t3,e.t0=null!==e.t4,!e.t0){e.next=20;break}e.t0=void 0!==o;case 20:if(!e.t0){e.next=24;break}e.t5=o,e.next=25;break;case 24:e.t5=void 0;case 25:t.fileId=e.t5;case 26:return l=!((null===(r=t.acl)||void 0===r?void 0:r.requiredSecurityGroup)===v.hh.Anonymous||(null===(a=t.acl)||void 0===a?void 0:a.requiredSecurityGroup)===v.hh.Authenticated),u={transferIv:this._driveProvider.Random16(),storageOptions:{overwriteFileId:null!==(s=null===t||void 0===t?void 0:t.fileId)&&void 0!==s?s:"",drive:this._blogDefinitionProvider.getTargetDrive(n)},transitOptions:null},d=v.j4.JsonStringify64(t.content),f=v.j4.stringToUint8Array(d),p=t.content.slug?v.j4.toGuidId(t.content.slug):t.content.id,h=f.length<3e3,m={contentType:"application/json",appData:{tags:[(0,v.iY)("type"in t.content?t.content.type:"Article").toString(),t.content.id].concat((0,Q.Z)(p&&p!==t.content.id?[p]:[])),uniqueId:p,contentIsComplete:h,fileType:v.Hm.PostFileType,jsonContent:h?d:null},payloadIsEncrypted:l,accessControlList:t.acl},e.next=35,this._driveProvider.Upload(u,m,f,void 0,l);case 35:return x=e.sent,e.abrupt("return",x.file.fileId);case 37:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removePost",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this._blogDefinitionProvider.getTargetDrive(n),this._driveProvider.DeleteFile(r,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){if(!e)throw new Error("Shared Secret not set for OwnerProvider");if(!n.instance){var t=new v.l$({api:v.Ii.Owner,sharedSecret:e}),r=new v.ax({api:v.Ii.Owner,sharedSecret:e,driveProvider:t});n.instance=new n({api:v.Ii.Owner,sharedSecret:e,driveProvider:t,blogDefinitionProvider:r})}return n.instance}}]),n}(v.j_);K.instance=void 0;var $=function(){var e=(0,w.Z)().getSharedSecret,t=(0,o.useQueryClient)(),n=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n){var r,a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.blogFile,a=n.channelId,s=K.getInstance(e()),t.next=4,s.savePost(r,a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n){var r,a,o,c,l,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.files,a=n.acl,o=n.channelId,c=new v.AO({api:v.Ii.Owner,sharedSecret:e()}),l=(0,v.V7)(o),t.next=5,Promise.all(r.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t.arrayBuffer();case 3:return e.t1=e.sent,n=new e.t0(e.t1),e.next=7,c.mediaProvider.uploadImage(l,void 0,a,n,void 0,t.type);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return u=t.sent,t.abrupt("return",u.filter(Boolean));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{save:(0,o.useMutation)(n,{onSuccess:function(e,n){n.blogFile.content.slug?t.invalidateQueries(["blog",n.blogFile.content.slug]):t.invalidateQueries(["blog"]),t.removeQueries(["blogs"])},onMutate:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cancelQueries(["social-feeds"]);case 2:return(a=t.getQueryData(["social-feeds"]))&&((s=(0,r.Z)({},a)).pages[0].results=[(0,r.Z)((0,r.Z)({},n.blogFile),{},{dotYouId:window.location.hostname})].concat((0,Q.Z)(s.pages[0].results)),t.setQueryData(["social-feeds"],s),console.log(s.pages[0].results)),e.abrupt("return",{newPost:n,previousFeed:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){console.error(e),t.setQueryData(["social-feeds"],null===r||void 0===r?void 0:r.previousFeed)}}),saveFiles:(0,o.useMutation)(a)}},X=n(6034),ee=n(3352),te=n(3243),ne=function(e){var t=e.type,n=e.title,r=e.children,a=e.className,i=e.isCompact,s="critical"===t?"bg-red-50 dark:bg-red-900 border-red-100 dark:border-red-800 dark:text-white":"warning"===t?"bg-orange-50 border-orange-100":"bg-slate-100 dark:bg-slate-700 dark:border-slate-900";return(0,H.jsx)("section",{className:"bg-red rounded-lg border p-5 ".concat(s," ").concat(null!==a&&void 0!==a?a:""),children:(0,H.jsxs)("div",{className:"flex w-full flex-row flex-wrap sm:flex-nowrap",children:["critical"===t?(0,H.jsx)("div",{className:"mb-2 flex h-8 w-8 flex-shrink-0 text-red-400 dark:text-red-300 ".concat(i?"mb-2 mr-2":"sm:my-auto sm:mx-0 sm:h-10 sm:w-10"),children:(0,H.jsx)(ee.Z,{})}):"warning"===t?(0,H.jsx)("div",{className:"mb-2 flex h-8 w-8 flex-shrink-0 text-orange-400 ".concat(i?"mb-2 mr-2":"sm:my-auto sm:mx-0 sm:h-10 sm:w-10"),children:(0,H.jsx)(ee.Z,{})}):(0,H.jsx)("div",{className:"mb-2 flex h-8 w-8 flex-shrink-0 text-blue-400 ".concat(i?"mb-2 mr-2":"sm:my-auto sm:mx-0 sm:h-10 sm:w-10"),children:(0,H.jsx)(te.Z,{})}),(0,H.jsxs)("div",{className:"ml-5 flex-grow ".concat(i?"contents":"contents sm:block"),children:[n&&(0,H.jsx)("p",{className:"ml-3 mb-2 text-2xl sm:ml-0",children:n}),r]})]})})},re=function(e){var t,n,r=e.error,i=(0,j.useState)(!1),s=(0,a.Z)(i,2),o=s[0],c=s[1];if((0,j.useEffect)((function(){r&&c(!1)}),[r]),!r||o)return null;var l=function(e){if(e){switch(e){case 1001:return(0,J.t)("InvalidAuthToken");case 2001:return(0,J.t)("InvalidNotificationType");case 2002:return(0,J.t)("UnknownNotificationId");case 3001:return(0,J.t)("A circle cannot have no permissions, please review and try again");case 3002:return(0,J.t)("CannotAllowCirclesOnAuthenticatedOnly");case 3003:return(0,J.t)("CannotAllowCirclesOrIdentitiesOnAnonymousOrOwnerOnly");case 3004:return(0,J.t)("CannotDeleteCircleWithMembers");case 3005:return(0,J.t)("IdentityAlreadyMemberOfCircle");case 4001:return(0,J.t)("CannotAllowAnonymousReadsOnOwnerOnlyDrive");case 4002:return(0,J.t)("CannotUpdateDeletedFile");case 4003:return(0,J.t)("DriveAliasAndTypeAlreadyExists");case 4004:return(0,J.t)("InvalidGrantNonExistingDrive");case 4101:return(0,J.t)("CannotOverwriteNonExistentFileStef");case 4102:return(0,J.t)("CannotUploadEncryptedFileForAnonymous");case 4103:return(0,J.t)("CannotUseGlobalTransitIdOnTransientFile");case 4104:return(0,J.t)("DriveSecurityAndAclMismatch");case 4105:return(0,J.t)("ExistingFileWithUniqueId");case 4106:return(0,J.t)("FileNotFound");case 4107:return(0,J.t)("IdAlreadyExists");case 4108:return(0,J.t)("InvalidInstructionSet");case 4109:return(0,J.t)("InvalidKeyHeader");case 4110:return(0,J.t)("InvalidRecipient");case 4111:return(0,J.t)("InvalidTargetDrive");case 4112:return(0,J.t)("InvalidThumnbnailName");case 4113:return(0,J.t)("InvalidTransferFileType");case 4114:return(0,J.t)("InvalidTransferType");case 4115:return(0,J.t)("MalformedMetadata");case 4116:return(0,J.t)("MissingUploadData");case 4117:return(0,J.t)("TransferTypeNotSpecified");case 4118:return(0,J.t)("UnknownId");case 5001:return(0,J.t)("CannotSendConnectionRequestToExistingIncomingRequest");case 5002:return(0,J.t)("CannotSendMultipleConnectionRequestToTheSameIdentity");case 5003:return(0,J.t)("You cannot send a connection request to yourself");case 6001:return(0,J.t)("AppNotRegistered");case 9001:return(0,J.t)("InvalidFlagName");case 9002:return(0,J.t)("NotInitialized");case 9003:return(0,J.t)("UnknownFlagName")}console.log("Error code found, but no corresponding message in the dictionary",e)}}(null===r||void 0===r||null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorCode);return(0,H.jsx)("div",{className:"fixed inset-0 z-10 flex bg-black bg-opacity-10",onClick:function(){return c(!0)},children:(0,H.jsx)(ne,{type:l?"warning":"critical",className:"mx-auto mt-10 mb-auto cursor-pointer",children:(0,H.jsxs)("div",{className:"flex flex-row",children:[null!==l&&void 0!==l?l:r instanceof Error?r.message:(0,J.t)("Something went wrong, please try again later"),(0,H.jsx)(X.Z,{className:"my-auto ml-5 h-5 w-5"})]})})})},ae=n(6640),ie={id:"",channelId:v.Hm.PublicChannel.channelId,slug:"",dateUnixTime:0,type:"Tweet",caption:""},se=j.forwardRef((function(e,t){var n=e.className,r=e.defaultValue,a=e.onChange,i=(0,_.Z)(),s=i.data,o=i.isLoading;return(0,H.jsx)("select",{className:"cursor-pointer bg-transparent px-3 py-2 text-sm ".concat(null!==n&&void 0!==n?n:""),defaultValue:r,onChange:function(e){return a(null===s||void 0===s?void 0:s.find((function(t){return t.channelId===e.target.value})))},ref:t,children:o||!s?(0,H.jsx)("option",{children:(0,J.t)("Public Posts")}):(0,H.jsx)(H.Fragment,{children:s.map((function(e){return(0,H.jsx)("option",{value:e.channelId,children:e.name},e.channelId)}))})})})),oe=function(e){var t=e.onChange;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("label",{htmlFor:"file-select",className:"cursor-pointer px-2 py-1",children:"+"}),(0,H.jsx)("input",{id:"file-select",name:"file-select",onChange:function(e){var n,r=null===(n=e.target)||void 0===n?void 0:n.files;r&&t&&t(Array.from(r))},type:"file",accept:"image/png, image/jpeg, image/tiff, image/webp, image/svg+xml",multiple:!0,className:"sr-only"})]})},ce=function(e){var t=e.files,n=e.setFiles,r=e.className;return t&&t.length?(0,H.jsx)("div",{className:"-m-1 flex flex-row flex-wrap ".concat(null!==r&&void 0!==r?r:""),children:t.map((function(e){var r=URL.createObjectURL(e);return(0,H.jsxs)("div",{className:"relative p-1 md:w-1/2",children:[(0,H.jsx)("img",{src:r,onLoad:function(){return URL.revokeObjectURL(r)}}),(0,H.jsx)(ae.Z,{className:"absolute top-3 right-3",icon:"times",type:"remove",size:"square",onClick:function(){return n((0,Q.Z)(t.filter((function(t){return t.name!==e.name}))))}})]},r)}))}):null},le=function(e){var t,n,o=e.onPost,c=$().save,l=c.mutateAsync,u=c.error,d=$().saveFiles,f=d.mutateAsync,p=d.error,h=(0,j.useRef)(null),m=(0,j.useRef)(null),x=(0,j.useState)((0,r.Z)({},ie)),g=(0,a.Z)(x,2),y=g[0],w=g[1],b=(0,j.useState)(v.Hm.PublicChannel),Z=(0,a.Z)(b,2),N=Z[0],k=Z[1],I=(0,j.useState)(),C=(0,a.Z)(I,2),S=C[0],P=C[1],D=(0,j.useState)("idle"),T=(0,a.Z)(D,2),F=T[0],M=T[1],O=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,a,s,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M("loading"),e.prev=1,a=void 0,null===S||void 0===S||!S.length||null===N||void 0===N||!N.acl){e.next=7;break}return e.next=6,f({acl:N.acl,channelId:N.channelId,files:S});case 6:a=e.sent;case 7:return s=v.j4.getNewId(),c=(0,r.Z)((0,r.Z)({},y),{},{dateUnixTime:(new Date).getTime(),id:s,slug:s,channelId:N.channelId,primaryImageFileId:null!==(t=null===(n=a)||void 0===n?void 0:n[0])&&void 0!==t?t:void 0}),a&&a.length>1&&(c.type="Image",c.imageFileIds=a),u={content:c,acl:N.acl?(0,r.Z)({},N.acl):{requiredSecurityGroup:v.hh.Owner}},e.next=13,l({blogFile:u,channelId:N.channelId});case 13:w((0,r.Z)({},ie)),k(v.Hm.PublicChannel),P(void 0),h.current&&(h.current.value=ie.caption),m.current&&(m.current.value=v.Hm.PublicChannel.channelId),o&&o(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),M("error");case 24:M("idle");case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}();return(0,H.jsxs)("div",{className:"mb-5 w-full rounded-md border border-gray-200 border-opacity-60 p-4 dark:border-gray-800",children:[(0,H.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),O(),!1},children:[(0,H.jsx)("textarea",{defaultValue:y.caption,onChange:function(e){return w((0,r.Z)((0,r.Z)({},y),{},{caption:e.target.value}))},placeholder:(0,J.t)("What's up?"),className:"w-full resize-none rounded-sm bg-transparent p-2 ".concat(null!==(t=y.caption)&&void 0!==t&&t.length?"":"h-[2.5rem]"),ref:h,required:!0}),(0,H.jsx)(ce,{files:S,setFiles:P,className:"mt-2"}),(0,H.jsxs)("div",{className:"-m-2 mt-3 flex flex-row flex-wrap items-center md:flex-nowrap",children:[(0,H.jsx)("div",{className:"m-2 text-xl font-extralight leading-4 text-opacity-50",children:(0,H.jsx)(oe,{onChange:function(e){return P(e)}})}),(0,H.jsx)(se,{className:"m-2 ml-auto",defaultValue:null===y||void 0===y?void 0:y.channelId,onChange:function(e){return e&&k(e)},ref:m}),(0,H.jsx)(ae.Z,{className:"m-2 w-full md:w-auto ".concat(null!==(n=y.caption)&&void 0!==n&&n.length?"":"pointer-events-none opacity-20 grayscale"," ").concat("loading"===F?"pointer-events-none animate-pulse":""),children:(0,J.t)("Post")})]})]}),"error"===F?(0,H.jsx)(re,{error:u||p}):null]})},ue=function(e){var t=e.className,n=(0,Y.Z)(),i=n.tabs,s=n.isTabs,o=(0,G.s0)(),c=(0,j.useState)(!1),l=(0,a.Z)(c,2),u=l[0],d=l[1],f=Z({pageSize:10}).fetchAll,p=f.data,v=f.hasNextPage,h=f.isLoading,m=f.fetchNextPage,x=(0,j.useRef)(null);(0,N.s)(v?x:void 0,(function(){m()}),!0);var g=(0,k.bJ)(p,10,(function(e,t){var n,r;return(null===(n=t.content)||void 0===n?void 0:n.dateUnixTime)-(null===(r=e.content)||void 0===r?void 0:r.dateUnixTime)}));return(0,j.useEffect)((function(){u&&d(!1)}),[u]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(q.Z,{hideLinks:!0}),(0,H.jsx)("section",{className:"body-font text-gray-600 dark:text-gray-400",children:(0,H.jsxs)(H.Fragment,{children:[s?(0,H.jsx)("div",{className:"bg-slate-500 bg-opacity-5 dark:bg-slate-500 dark:bg-opacity-5",children:(0,H.jsx)("div",{className:"container mx-auto overflow-auto px-5 py-4",children:(0,H.jsx)(W.Z,{onChange:function(e){return o("/home/".concat(e))},items:i.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isActive:"feed"===e.key})})),disallowWrap:!0})})}):null,(0,H.jsx)("div",{className:"container mx-auto px-5",children:(0,H.jsx)("div",{className:"py-10",children:(0,H.jsx)("div",{className:t,children:(0,H.jsx)("div",{className:"-mx-2 flex max-w-6xl flex-col lg:flex-row xl:-mx-4",children:(0,H.jsxs)("div",{className:"py-2 px-2 lg:w-2/3 xl:px-4",children:[(0,H.jsx)(le,{onPost:function(){return d(!0)}}),h?(0,H.jsxs)("div",{className:"-mx-4",children:[(0,H.jsx)(I.Z,{className:"m-4 h-10"}),(0,H.jsx)(I.Z,{className:"m-4 h-10"}),(0,H.jsx)(I.Z,{className:"m-4 h-10"})]}):null!==g&&void 0!==g&&g.length?(0,H.jsxs)(H.Fragment,{children:[g.map((function(e){return e.dotYouId===window.location.hostname?(0,H.jsx)(U,{post:e.content,className:"my-2 ".concat(e.fileId?"":"overflow-hidden bg-slate-100 dark:bg-slate-600")},e.fileId||e.content.id):(0,H.jsx)(E,{post:e.content,dotYouId:e.dotYouId,className:"my-2"},e.fileId||e.content.id)})),(0,H.jsx)("div",{ref:x,className:"h-1 w-full"})]}):null]})})})})})]})})]})}},5258:function(e,t,n){n.r(t),t.default={}}}]);
//# sourceMappingURL=59.3bc95609.chunk.js.map