"use strict";(self.webpackChunkpublic_app=self.webpackChunkpublic_app||[]).push([[109],{1364:function(e,n,t){var r=t(9631),a=t(3504),s=t(1824),l=t(706),i=t(4990),o=t(8602),c=t(2170),u=t(7764),d=t(184);n.Z=function(e){var n,t=e.className,p=e.blog,h=e.isSingleCol,f=e.hideImageWhenNone,m=e.showChannel,x=(0,u.Z)({channelId:p.channelId}).data;return(0,d.jsx)("div",{className:"w-full ".concat(null!==t&&void 0!==t?t:""),children:(0,d.jsx)(a.rU,{to:"/home/posts/".concat(null===x||void 0===x?void 0:x.slug,"/").concat(null!==(n=p.slug)&&void 0!==n?n:"#"),className:"contents",children:(0,d.jsxs)("div",{className:"relative h-full overflow-hidden rounded-lg border border-gray-200 border-opacity-60 transition-colors hover:shadow-md dark:border-gray-800 hover:dark:shadow-slate-600 ",children:[(!f||p.primaryImageFileId)&&(0,d.jsx)("div",{className:"relative ".concat(h?"sm:p-6 sm:pb-2":""),children:p.primaryImageFileId?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z,{className:"".concat(h&&"sm:rounded-lg"," ").concat("Image"===p.type||"Video"===p.type?"h-full max-h-[30rem] w-auto":"h-64 w-full md:h-36 lg:h-48"," ").concat("Image"===p.type&&""," ").concat("Video"===p.type&&"aspect-video"),fileId:p.primaryImageFileId,targetDrive:(0,r.V7)(p.channelId),alt:"blog",cover:!0}),"Video"===p.type&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.Z,{className:"absolute top-[calc(50%-2.5rem)] left-[calc(50%-2.5rem)] h-20 w-20 text-white"})})]}):f?null:(0,d.jsx)("div",{className:"max-w-full overflow-hidden text-ellipsis whitespace-nowrap bg-slate-50 text-slate-200 dark:bg-slate-700 dark:text-slate-600 ".concat(h&&"sm:rounded-lg"," ").concat("Image"===p.type||"Video"===p.type?"h-full max-h-[30rem] w-auto":"h-64 w-full md:h-36 lg:h-48"," ").concat("Video"===p.type&&"aspect-video"),children:(0,d.jsx)("p",{className:"p-2 text-9xl ",children:p.caption})})}),(0,d.jsxs)("div",{className:"px-6 py-4",children:[(0,d.jsxs)("div",{className:"flex flex-row text-foreground text-opacity-40",children:[(0,d.jsx)("span",{className:"my-auto text-xs",children:new Date(p.dateUnixTime).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,d.jsxs)("h2",{className:"my-auto ml-2 border-l pl-2 text-xs font-medium uppercase tracking-wide dark:border-slate-500",children:[p.type,m&&null!==x&&void 0!==x&&x.name?" - ".concat(null===x||void 0===x?void 0:x.name):""]})]}),(0,d.jsx)("h1",{className:"text-lg font-medium text-foreground text-opacity-90",children:p.caption}),"Article"===p.type?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"my-3 leading-relaxed",children:p.abstract}),(0,d.jsx)("div",{className:"flex flex-wrap items-center ",children:(0,d.jsxs)("span",{className:"inline-flex items-center text-button md:mb-2 lg:mb-0",children:[(0,i.t)("Read more"),(0,d.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})})]}):null]}),(0,d.jsx)("div",{className:"absolute bottom-0 right-0 flex items-center p-5 text-sm text-gray-300",children:(0,d.jsxs)("span",{className:"inline-flex items-center",children:[(0,d.jsx)(c.Z,{className:"mr-1 inline-block h-4 w-4"})," 6"]})})]})})})}},2744:function(e,n,t){var r=t(1364),a=t(184);n.Z=function(e){var n=e.blogPosts,t=e.showChannel;return(0,a.jsx)("div",{className:"-my-4 max-w-4xl",children:null===n||void 0===n?void 0:n.map((function(e){return(0,a.jsx)(r.Z,{blog:e,className:"my-4",isSingleCol:!0,hideImageWhenNone:!0,showChannel:t},e.id)}))})}},706:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.className;return(0,r.jsxs)("svg",{className:n,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5l7 7-7 7"})]})}},2170:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.className;return(0,r.jsx)("svg",{className:n,stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})})}},8602:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:n,children:(0,r.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},5322:function(e,n,t){var r=t(4165),a=t(2982),s=t(7762),l=t(5861),i=t(7408),o=t(9631),c=t(7686);n.Z=function(e){var n=e.channelId,t=e.postType,u=e.pageSize,d=void 0===u?10:u,p=(0,c.Z)(),h=p.getSharedSecret,f=p.getApiType,m=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var l,i,c,u,p,m,x,v,g,y,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.channelId,i=new o.pt({api:f(),sharedSecret:h()}),e.next=4,i.fileReadOnlyProvider.GetFile("blogs.json");case 4:if(c=e.sent,!l){e.next=15;break}if(!c.has(l)){e.next=10;break}u=null!==(p=null===(m=c.get(l))||void 0===m?void 0:m.map((function(e){return e.payload})).filter((function(e){return!t||e.type===t})))&&void 0!==p?p:[],e.next=13;break;case 10:return e.next=12,i.blogPostReadonlyProvider.getPosts(l,t,void 0,d);case 12:u=e.sent.results.map((function(e){return e.content}));case 13:e.next=24;break;case 15:if(!(c.size>=1)){e.next=21;break}u=[],x=(0,s.Z)(c.keys());try{for(x.s();!(v=x.n()).done;)b=v.value,(u=[].concat((0,a.Z)(u),(0,a.Z)(null!==(g=null===(y=c.get(b))||void 0===y?void 0:y.map((function(e){return e.payload})).filter((function(e){return!t||e.type===t})))&&void 0!==g?g:[]))).sort((function(e,n){return n.dateUnixTime-e.dateUnixTime}))}catch(r){x.e(r)}finally{x.f()}e.next=24;break;case 21:return e.next=23,i.blogPostReadonlyProvider.getRecentPosts(t,d);case 23:u=e.sent.results.map((function(e){return e.content}));case 24:return e.abrupt("return",u.filter((function(e){return void 0!==e&&void 0!==e.id})).slice(0,d));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.useQuery)(["blog-recents",n],(function(){return m({channelId:n})}),{refetchOnMount:!1,refetchOnWindowFocus:!1,onError:function(e){console.log(e)}})}},4999:function(e,n,t){var r=t(4165),a=t(5861),s=t(7408),l=t(9631),i=t(7686);n.Z=function(e){var n=e.channelId,t=e.pageSize,o=void 0===t?30:t,c=e.enabled,u=void 0===c||c,d=(0,i.Z)(),p=d.getSharedSecret,h=d.getApiType,f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,s,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.channelId,a=n.pageParam,s=new l.pt({api:h(),sharedSecret:p()}),!t){e.next=9;break}return e.next=5,s.blogPostReadonlyProvider.getPosts(t,void 0,"string"===typeof a?a:void 0,o);case 5:return i=e.sent,e.abrupt("return",{results:i.results.map((function(e){return e.content})),cursorState:i.cursorState});case 9:return e.next=11,s.blogPostReadonlyProvider.getRecentPosts(void 0,o,"object"===typeof a?a:void 0);case 11:return c=e.sent,e.abrupt("return",{results:c.results.map((function(e){return e.content})),cursorState:c.cursorState});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useInfiniteQuery)(["blogs",n],(function(e){var t=e.pageParam;return f({channelId:n,pageParam:t})}),{getNextPageParam:function(e){var n,t;return null!==(n=(null===e||void 0===e||null===(t=e.results)||void 0===t?void 0:t.length)>=o&&(null===e||void 0===e?void 0:e.cursorState))&&void 0!==n?n:void 0},refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,enabled:u})}},7764:function(e,n,t){var r=t(4165),a=t(8683),s=t(5861),l=t(7408),i=t(9631),o=t(7686),c=t(805);n.Z=function(e){var n=e.channelSlug,t=e.channelId,u=(0,o.Z)(),d=u.getSharedSecret,p=u.getApiType,h=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s,l,o,u,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.channelSlug,s=n.channelId,t||s){e.next=3;break}return e.abrupt("return");case 3:return l=new i.pt({api:p(),sharedSecret:d()}),o=void 0,e.next=7,l.fileReadOnlyProvider.GetFile("blogs.json");case 7:if((u=e.sent)&&u.forEach((function(e){var n=e.find((function(e){return e.header.fileMetadata.appData.fileType===i.Hm.ChannelDefinitionFileType&&(t?e.payload.slug===t:e.payload.channelId===s)}));n&&(o=n.payload)})),o){e.next=25;break}if(!t){e.next=16;break}return e.next=13,l.blogPostReadonlyProvider.getChannelDefinitionBySlug(t);case 13:e.t0=e.sent,e.next=24;break;case 16:if(!s){e.next=22;break}return e.next=19,l.blogPostReadonlyProvider.getChannelDefinition(s);case 19:e.t1=e.sent,e.next=23;break;case 22:e.t1=void 0;case 23:e.t0=e.t1;case 24:o=e.t0;case 25:if(!o){e.next=27;break}return e.abrupt("return",(0,a.Z)((0,a.Z)({},o),{},{template:(0,c.B)(null===(h=o)||void 0===h?void 0:h.templateId)}));case 27:return e.abrupt("return");case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.useQuery)(["channel",n||t],(function(){return h({channelSlug:n,channelId:t})}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}},805:function(e,n,t){t.d(n,{B:function(){return u}});var r=t(4165),a=t(8683),s=t(2982),l=t(5861),i=t(7408),o=t(9631),c=t(7686),u=function(e){return parseInt(e+"")===o.rJ.LargeCards?o.rJ.LargeCards:parseInt(e+"")===o.rJ.MasonryLayout?o.rJ.MasonryLayout:o.rJ.ClassicBlog};n.Z=function(){var e=(0,c.Z)(),n=e.getSharedSecret,t=e.getApiType,d=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var l,i,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new o.pt({api:t(),sharedSecret:n()}),c=[],e.next=4,i.fileReadOnlyProvider.GetFile("blogs.json");case 4:if((d=e.sent)&&d.forEach((function(e){var n=e.filter((function(e){return e.header.fileMetadata.appData.fileType===o.Hm.ChannelDefinitionFileType}));c=[].concat((0,s.Z)(c),(0,s.Z)(n.map((function(e){return(0,a.Z)({},e.payload)}))))})),null!==(l=c)&&void 0!==l&&l.length){e.next=10;break}return e.next=9,i.blogPostReadonlyProvider.getChannels();case 9:c=e.sent;case 10:return e.abrupt("return",c.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{template:u(null===e||void 0===e?void 0:e.templateId)})})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useQuery)(["channels"],(function(){return d()}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}},2109:function(e,n,t){t.r(n);var r=t(2982),a=t(885),s=t(6907),l=t(4990),i=t(2744),o=t(805),c=t(9259),u=t(4999),d=t(2791),p=t(6430),h=t(3990),f=t(5322),m=t(184);n.default=function(){var e=(0,d.useState)(!0),n=(0,a.Z)(e,2),t=n[0],x=n[1],v=(0,o.Z)().data,g=(0,f.Z)({pageSize:10}),y=g.data,b=g.isFetchedAfterMount,w=(0,u.Z)({pageSize:10,enabled:!t}),j=w.data,Z=w.hasNextPage,N=w.fetchNextPage,k=w.isFetchedAfterMount,I=(0,d.useRef)(null);(0,p.s)(Z||t&&b?I:void 0,(function(){t?x(!1):N()}),!0);var S=(0,h.bJ)(j,10),P=[].concat((0,r.Z)(y||[]),(0,r.Z)(S||[])).reduce((function(e,n){return e.some((function(e){return e.id===n.id}))?e:[].concat((0,r.Z)(e),[n])}),[]);return P.sort((function(e,n){return n.dateUnixTime-e.dateUnixTime})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.ql,{children:(0,m.jsxs)("title",{children:[(0,l.t)("Wall")," | Youniverse"]})}),(0,m.jsx)("section",{className:"py-5",children:(0,m.jsx)("div",{className:"container mx-auto px-5",children:(0,m.jsxs)("div",{className:"-mx-2 flex max-w-6xl flex-col lg:flex-row xl:-mx-4",children:[(0,m.jsxs)("div",{className:"py-2 px-2 lg:w-2/3 xl:px-4",children:[P&&(0,m.jsx)(i.Z,{blogPosts:P,showChannel:!0}),(0,m.jsx)("div",{ref:I,className:"h-1 w-full"}),!Z&&k&&(0,m.jsx)("div",{className:"mt-5 bg-button p-2 text-center text-white",children:(0,l.t)("No more posts")})]}),(0,m.jsx)("div",{className:"hidden py-2 px-2 lg:block lg:w-1/3 xl:px-4",children:(0,m.jsx)("div",{className:"-my-2",children:null===v||void 0===v?void 0:v.map((function(e){return(0,m.jsx)(c.Z,{channel:e,className:"w-full py-2"},e.channelId)}))})})]})})})]})}},9259:function(e,n,t){var r=t(6871),a=t(3504),s=t(4990),l=t(706),i=t(184);n.Z=function(e){var n,t=e.className,o=e.channel,c=(0,r.s0)(),u="/home/posts/".concat(null!==(n=o.slug)&&void 0!==n?n:"#");return(0,i.jsx)("div",{className:t,onClick:function(){return c(u)},children:(0,i.jsxs)("div",{className:"relative h-full overflow-hidden rounded-lg bg-gray-100 bg-opacity-75 px-4 py-4 dark:bg-gray-800 dark:bg-opacity-40 lg:px-8 lg:py-16",children:[(0,i.jsx)("h1",{className:"title-font mb-3 text-xl font-medium sm:text-2xl",children:o.name}),o.description&&(0,i.jsx)("p",{className:"mb-3 leading-relaxed",children:o.description}),(0,i.jsxs)(a.rU,{className:"inline-flex items-center text-button",to:u,children:[(0,s.t)("See all"),(0,i.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})]})})}}}]);
//# sourceMappingURL=109.b3342208.chunk.js.map