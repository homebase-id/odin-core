"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[546],{9636:function(e,r,n){var t=n(4165),s=n(5861),a=n(1413),i=n(9439),o=n(2791),l=n(4164),c=n(4990),u=n(3412),f=n(3431),d=n(2042),m=n(2851),x=n(6916),p=n(3147),h=n(2465),v=n(8930),j=n(184);r.Z=function(e){var r=e.title,n=e.confirmText,Z=e.isOpen,g=e.defaultValue,w=e.onConfirm,b=e.onCancel,N=(0,u.Z)("modal-container"),y=(0,f.Z)().saveProfile,k=y.mutateAsync,P=y.status,D=y.error,C=(0,o.useState)((0,a.Z)({},g)),S=(0,i.Z)(C,2),F=S[0],Q=S[1];if(!Z)return null;var O=(0,j.jsx)(v.Z,{title:r,onClose:b,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Z,{error:D}),(0,j.jsxs)("form",{onSubmit:function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,k(F);case 3:return w(),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)(p.Z,{htmlFor:"name",children:(0,c.t)("Name")}),(0,j.jsx)(x.Z,{id:"name",name:"profileName",defaultValue:F.name,onChange:function(e){Q((0,a.Z)((0,a.Z)({},F),{},{name:e.target.value}))},required:!0})]}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)(p.Z,{htmlFor:"name",children:(0,c.t)("Description")}),(0,j.jsx)(h.Z,{id:"description",name:"profileDescription",defaultValue:F.description,onChange:function(e){Q((0,a.Z)((0,a.Z)({},F),{},{description:e.target.value}))},required:!0})]}),(0,j.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,j.jsx)(m.Z,{className:"m-2",state:P,icon:"send",children:n||(0,c.t)("Add Profile")}),(0,j.jsx)(m.Z,{className:"m-2",type:"secondary",onClick:b,children:(0,c.t)("Cancel")})]})]})]})});return(0,l.createPortal)(O,N)}},2465:function(e,r,n){var t=n(1413),s=n(184);r.Z=function(e){return(0,s.jsx)("textarea",(0,t.Z)((0,t.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},3756:function(e,r,n){var t=n(9439),s=n(2791),a=n(4990),i=n(9747),o=n(184);r.Z=function(e){var r=e.className,n=e.state,l=e.error,c=(0,s.useState)(null),u=(0,t.Z)(c,2),f=u[0],d=u[1],m=(0,s.useState)(new Date),x=(0,t.Z)(m,2),p=x[0],h=x[1];if((0,s.useEffect)((function(){"success"===n&&d(new Date)}),[n]),(0,s.useEffect)((function(){var e=setTimeout((function(){h(new Date)}),3e4);return function(){clearTimeout(e)}}),[p]),"loading"===n)return(0,o.jsx)("p",{className:"".concat(r," text-sm"),children:"Saving..."});if("error"===n)return(0,o.jsx)(i.Z,{type:"critical",className:r,children:l instanceof Error?l.message:(0,a.t)("Something went wrong")});if(!f)return null;var v=p.getTime()-f.getTime(),j=f?v<=6e4?"a few seconds ago":v<=6e5?"a few minutes ago":f.toLocaleString():"";return j?(0,o.jsxs)("p",{className:"".concat(r," text-sm"),children:["Last saved ",j]}):null}},9080:function(e,r,n){var t=n(6907),s=n(3504),a=n(3756),i=n(184);r.Z=function(e){var r=e.title,n=e.actions,o=e.saveStatus,l=e.breadCrumbs,c=e.icon;return(0,i.jsx)("section",{className:"-mx-5 -mt-4 mb-10 border-b-2 border-gray-100 bg-slate-50 py-4 pr-5 pl-10 dark:border-gray-700 dark:bg-slate-800 sm:-mx-10 sm:-mt-8 sm:py-8 sm:px-10",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,i.jsxs)("div",{className:"flex-col",children:[l&&(0,i.jsx)("ul",{className:"mb-2 hidden flex-row sm:flex",children:l.map((function(e,r){return(0,i.jsx)("li",{className:"mr-2",children:e.href?(0,i.jsxs)(s.rU,{to:e.href,className:"",children:[e.title,(0,i.jsx)("span",{className:"ml-2",children:">"})]}):(0,i.jsx)("span",{className:"text-slate-500",children:e.title})},r)}))}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h1",{className:"mb-5 flex flex-row text-4xl dark:text-white",children:[c&&c({className:"h-8 w-8 my-auto mr-4"})," ",r]}),(0,i.jsx)(t.ql,{children:(0,i.jsxs)("title",{children:["object"!==typeof r&&"".concat(r)||window.location.pathname.split("/").pop()," ","| Owner console"]})})]})]}),(0,i.jsxs)("div",{className:"ml-auto",children:[(0,i.jsx)("div",{className:"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center",children:n}),o&&(0,i.jsx)(a.Z,{className:"mt-1",state:o})]})]})})}},3431:function(e,r,n){var t=n(4165),s=n(1413),a=n(5861),i=n(7408),o=n(5274),l=n(3990),c=n(8609);r.Z=function(){var e=(0,i.useQueryClient)(),r=(0,c.ZP)().getSharedSecret,n=new o.KU({api:o.Ii.Owner,sharedSecret:r()}),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.getProfileDefinitions();case 2:return e.next=4,e.sent.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{slug:(0,l.Vj)(e.name)})}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.saveProfileDefinition(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetchProfiles:(0,i.useQuery)(["profiles"],(function(){return u()}),{refetchOnWindowFocus:!1,retry:!1}),saveProfile:(0,i.useMutation)(f,{onMutate:function(){var r=(0,a.Z)((0,t.Z)().mark((function r(n){var a,i;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.cancelQueries(["profiles"]);case 2:return a=e.getQueryData(["profiles"]),i=null===a||void 0===a?void 0:a.map((function(e){return e.profileId===n.profileId?(0,s.Z)((0,s.Z)({},n),{},{slug:(0,l.Vj)(n.name)}):e})),e.setQueryData(["profiles"],i),r.abrupt("return",{previousProfiles:a,newProfile:n});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),onError:function(r,n,t){console.error(r),e.setQueryData(["profiles"],t.previousProfiles)},onSettled:function(){e.invalidateQueries(["profiles"])}})}}},3546:function(e,r,n){n.r(r);var t=n(9439),s=n(2791),a=n(3504),i=n(4990),o=n(3431),l=n(2851),c=n(9636),u=n(5284),f=n(9080),d=n(4411),m=n(184),x=function(e){var r=e.profileDef;return(0,m.jsxs)(a.rU,{to:r.slug,className:"block h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:shadow-md dark:border-gray-800 dark:bg-gray-800 hover:dark:shadow-slate-600",children:[(0,m.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:r.name}),(0,m.jsx)("div",{className:"p-4",children:(0,m.jsx)("p",{children:r.description})})]})};r.default=function(){var e=(0,o.Z)().fetchProfiles,r=e.data,n=e.isLoading,a=(0,s.useState)(!1),p=(0,t.Z)(a,2),h=p[0],v=p[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("section",{children:[(0,m.jsx)(f.Z,{icon:u.Z,title:(0,i.t)("My Profiles"),actions:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.Z,{icon:"plus",onClick:function(){return v(!0)},className:"m-2",children:(0,i.t)("Add Profile")})})}),n?(0,m.jsxs)("div",{className:"-m-2 flex",children:[(0,m.jsx)(d.Z,{className:"m-2 h-10 w-1/4"}),(0,m.jsx)(d.Z,{className:"m-2 h-10 w-1/4"})]}):(0,m.jsx)("div",{className:"-m-2 flex flex-row flex-wrap items-stretch",children:null===r||void 0===r?void 0:r.map((function(e){return(0,m.jsx)("div",{className:"w-full p-2 md:w-1/4",children:(0,m.jsx)(x,{profileDef:e})},e.name)}))})]}),(0,m.jsx)(c.Z,{isOpen:h,title:(0,i.t)("New Profile"),onCancel:function(){v(!1)},onConfirm:function(){v(!1)}})]})}}}]);
//# sourceMappingURL=546.2aa9674d.chunk.js.map