"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[104],{1869:function(e,n,r){var t=r(3504),a=r(4990),i=r(5809),s=r(2562),o=r(706),u=r(7927),c=r(4411),p=r(7385),l=r(184);n.Z=function(e){var n,r,d,v,f,m=e.driveGrant,h=e.permissionTree,x=e.className,Z=(0,i.Z)({targetDrive:m.permissionedDrive.drive}).fetch,w=Z.data;return Z.isLoading?(0,l.jsx)(c.Z,{className:"h-4 max-w-xs ".concat(x)}):(0,l.jsx)("div",{className:"flex flex-row ".concat(x),title:h,children:(0,l.jsxs)(t.rU,{to:"/owner/drives/".concat(null===w||void 0===w||null===(v=w.targetDriveInfo)||void 0===v?void 0:v.alias,"_").concat(null===w||void 0===w||null===(f=w.targetDriveInfo)||void 0===f?void 0:f.type),className:"flex flex-row hover:text-slate-700 hover:underline dark:hover:text-slate-400",children:[(0,l.jsx)(u.Z,{className:"mt-1 mb-auto mr-3 h-6 w-6"}),(0,l.jsxs)("div",{className:"mr-2 flex flex-col",children:[(0,l.jsxs)("p",{className:"leading-none ".concat(h?"":"my-auto"),children:[null===w||void 0===w?void 0:w.name,":"," ",(0,p.hz)(null===m||void 0===m?void 0:m.permissionedDrive.permission,s.Ac).name]}),h&&(0,l.jsxs)("small",{className:"",children:[(0,a.t)("Via")," ",h]})]}),(0,l.jsx)(o.Z,{className:"my-auto ml-auto h-5 w-5"})]})},"".concat(null===m||void 0===m||null===(n=m.permissionedDrive)||void 0===n||null===(r=n.drive)||void 0===r?void 0:r.alias,"-").concat(null===m||void 0===m||null===(d=m.permissionedDrive.drive)||void 0===d?void 0:d.type))}},8321:function(e,n,r){var t=r(2562),a=r(5194),i=r(184);n.Z=function(e){var n=e.permission,r=e.className,s=t.c$.find((function(e){return e.value===n}));return(0,i.jsxs)("div",{className:"flex flex-row ".concat(r),children:[(0,i.jsx)(a.Z,{className:"mt-1 mb-auto mr-3 h-6 w-6"}),(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsx)("p",{className:"my-auto leading-none",children:null===s||void 0===s?void 0:s.name})})]},"".concat(null===s||void 0===s?void 0:s.value))}},1434:function(e,n,r){var t=r(2791),a=r(184),i=t.forwardRef((function(e,n){var r=e.title,t=e.actions,i=e.className,s=e.children,o=e.isOpaqueBg,u=void 0!==o&&o,c=e.isBorderLess,p=void 0!==c&&c;return(0,a.jsxs)("section",{ref:n,className:"my-5 rounded-md ".concat(u?p?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==i&&void 0!==i?i:""),children:[r||t?(0,a.jsxs)("div",{className:"relative flex flex-row items-center border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-2xl dark:text-white",children:r}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("div",{className:"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center",children:t})})]}):null,(0,a.jsx)("div",{className:"py-5 ",children:s})]})}));n.Z=i},630:function(e,n,r){var t=r(1413),a=r(4165),i=r(5861),s=r(7408),o=r(5274),u=r(4180),c=r(8609);n.Z=function(e){var n=e.appId,r=(0,s.useQueryClient)(),p=(0,c.ZP)().getSharedSecret,l=u.Z.getInstance(p()),d=new o.AO({api:o.Ii.Owner,sharedSecret:p()}),v=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appId,e.next=3,l.GetAppRegistration({appId:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r,s,o,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appId,s=n.name,o=n.permissionSet,u=n.driveGrants,e.next=3,Promise.all(u.map(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.driveProvider.EnsureDrive(n.permissionedDrive.drive,n.driveMeta.name,n.driveMeta.description,!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:return c={appId:r,name:s,permissionSet:o,drives:u.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{driveMeta:void 0})}))},e.next=6,l.RegisterApp(c);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r,t,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appId,t=n.clientPublicKey64,i=n.clientFriendlyName,s={appId:r,clientPublicKey64:t,clientFriendlyName:i},e.abrupt("return",l.RegisterAppClient(s));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appId,e.next=3,l.RevokeApp({appId:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appId,e.next=3,l.AllowApp({appId:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["app",n],(function(){return v({appId:n})}),{refetchOnWindowFocus:!1}),registerNewApp:(0,s.useMutation)(f,{onSuccess:function(e,n){r.invalidateQueries(["app",n.appId]),r.invalidateQueries(["registeredApps"])},onError:function(e){console.error(e)}}),registerNewAppClient:(0,s.useMutation)(m,{onSuccess:function(e,n){r.invalidateQueries(["app",n.appId])},onError:function(e){console.error(e)}}),revokeApp:(0,s.useMutation)(h,{onSuccess:function(e,n){r.invalidateQueries(["app",n.appId]),r.invalidateQueries(["registeredApps"])},onError:function(e){console.error(e)}}),allowApp:(0,s.useMutation)(x,{onSuccess:function(e,n){r.invalidateQueries(["app",n.appId]),r.invalidateQueries(["registeredApps"])},onError:function(e){console.error(e)}})}}},5809:function(e,n,r){var t=r(4165),a=r(5861),i=r(7408),s=r(5274),o=r(8609);n.Z=function(e){var n=e.targetDrive,r=(0,o.ZP)().getSharedSecret,u=new s.AO({api:s.Ii.Owner,sharedSecret:r()}),c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.driveProvider.GetDrives({pageNumber:1,pageSize:100});case 2:return e.next=4,e.sent.results;case 4:return r=e.sent,e.abrupt("return",r.find((function(e){return e.targetDriveInfo.alias===n.alias&&e.targetDriveInfo.type===n.type})));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["drive","".concat(n.alias,"_").concat(n.type)],(function(){return c(n)}),{refetchOnWindowFocus:!1})}}},4180:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(4165),a=r(5861),i=r(5671),s=r(3144),o=r(9340),u=r(1129),c=function(e){(0,o.Z)(r,e);var n=(0,u.Z)(r);function r(e){return(0,i.Z)(this,r),n.call(this,e)}return(0,s.Z)(r,[{key:"RegisterAppClient",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/client",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"RegisterChatAppClient_temp",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/chatclient_temp",n);case 3:return a=e.sent,console.log("RegisterChatAppClient_temp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"RegisterApp",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/app",n);case 3:return a=e.sent,console.log("RegisterApp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"GetAppRegistration",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/app",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"GetAppRegistrations",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAxiosClient(),e.next=3,n.get("appmanagement/list");case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"RevokeApp",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/revoke",n);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"AllowApp",value:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/allow",n);case 3:a=e.sent,console.log(a);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return r.instance||(r.instance=new r(e)),r.instance}}]),r}(r(2008).$);c.instance=void 0},2562:function(e,n,r){r.d(n,{Ac:function(){return a},WW:function(){return i},c$:function(){return s}});var t=r(4990),a=[{name:(0,t.t)("None"),value:0},{name:(0,t.t)("Reader"),value:1},{name:(0,t.t)("Editor"),value:3}],i=[{name:(0,t.t)("None"),value:0},{name:(0,t.t)("Read Connections"),value:10},{name:(0,t.t)("Read Circle Members"),value:50}],s=[{name:(0,t.t)("None"),value:0},{name:(0,t.t)("Read Connections"),value:10},{name:(0,t.t)("Manage Connection Requests"),value:30},{name:(0,t.t)("Read Circle Members"),value:50}]}}]);
//# sourceMappingURL=104.86dcbd88.chunk.js.map