@inject AppState _state

<div class="@_leftOrRight pb-4">
    <div>
        <img src="/api/images/avatar/@Message.SenderDotYouId" class="rounded mr-1" alt="" width="40" height="40">
        @* <div class="text-muted small text-nowrap mt-2">@Message.ReceivedTimestamp</div> *@
    </div>
    <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
        @* <div class="font-weight-bold mb-1">SENDER NAME</div> *@
        @Message.Body
    </div>
</div>

@code {

    private string _leftOrRight;

    [Parameter]
    public ChatMessageEnvelope Message { get; set; }

    protected override void OnParametersSet()
    {
        Console.WriteLine(this.Message.Recipient);
        bool isMe = string.Equals(this.Message.Recipient, _state.User.DotYouId, StringComparison.InvariantCultureIgnoreCase);
        this._leftOrRight = isMe ? "chat-message-right" : "chat-message-left";

        base.OnParametersSet();
    }

}