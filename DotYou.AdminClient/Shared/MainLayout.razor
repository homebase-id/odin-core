@using Blazored.Toast.Configuration
@using DotYou.AdminClient.Services
@using DotYou.Types.SignalR
@using Microsoft.AspNetCore.Http.Connections
@using Microsoft.AspNetCore.SignalR.Client
@inherits LayoutComponentBase
@inject ILayoutManager _layoutManager
@inject NavigationManager _nav
@inject AuthState _authState
@inject IClientNotificationEvents _notificationEvents


@if (_authState.IsAuthenticated == false)
{
    <DotYou.AdminClient.Private.Components.Login />
}

@if (_authState.IsAuthenticated)
{
    <TopNavbar/>
    <DotYouSidebar/>
    <ContentWrapper>
        @Body
    </ContentWrapper>
    @*<ControlSideBar>notifications here</ControlSideBar>*@
    <BlazoredToasts Position="ToastPosition.BottomRight"
                    Timeout="10"
                    IconType="IconType.FontAwesome"/>
    <MainFooter>
        <Default>
            <strong>Copyright &copy; 2021 dotYou.</strong> All rights reserved.
        </Default>
        <Right>
            Legal
        </Right>
    </MainFooter>
}

@code
{
    
    protected override async Task OnInitializedAsync()
    {
       
    }

    protected override void OnAfterRender(bool isFirstRender)
    {
        _layoutManager.IsFooterFixed = true;
        _layoutManager.IsNavBarFixed = true;
        _layoutManager.IsSideBarFixed = true;
        base.OnAfterRender(isFirstRender);
    }
}