"use strict";(self.webpackChunkpublic_app=self.webpackChunkpublic_app||[]).push([[632],{1364:function(e,n,t){var r=t(3469),a=t(3504),i=t(5410),l=t(4665),o=t(4990),c=t(184);n.Z=function(e){var n,t=e.className,s=e.blog,u=e.linkRoot,d=s.channelId?{alias:s.channelId,type:r.Hm.ChannelDriveType.toString()}:void 0;return(0,c.jsx)("div",{className:"".concat(null!==t&&void 0!==t?t:""),children:(0,c.jsx)(a.rU,{to:"".concat(u).concat(null!==(n=s.slug)&&void 0!==n?n:"#"),className:"contents",children:(0,c.jsxs)("div",{className:"h-full overflow-hidden rounded-lg border-2 border-gray-200 border-opacity-60 bg-white transition-colors duration-300 hover:bg-slate-50 dark:border-gray-800 dark:bg-gray-800 hover:dark:bg-slate-700",children:[s.primaryImageFileId&&d?(0,c.jsx)(i.Z,{className:"h-64 w-full md:h-36 lg:h-48",fileId:s.primaryImageFileId,targetDrive:d,alt:"blog",cover:!0}):null,(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("h2",{className:"title-font mb-1 text-xs font-medium tracking-widest text-gray-400 dark:text-gray-600",children:s.type.toUpperCase()}),(0,c.jsx)("span",{className:"text-gray-500 md:mt-1 md:text-sm",children:new Date(s.dateUnixTime).toLocaleDateString()}),(0,c.jsx)("h1",{className:"title-font mb-3 text-lg font-medium text-gray-900 dark:text-white",children:s.caption}),"abstract"in s?(0,c.jsx)("p",{className:"mb-3 leading-relaxed",children:s.abstract}):null,(0,c.jsx)("div",{className:"flex flex-wrap items-center ",children:(0,c.jsxs)("span",{className:"inline-flex items-center text-indigo-500 dark:text-indigo-400 md:mb-2 lg:mb-0",children:[(0,o.t)("learn more"),(0,c.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})})]})]})})})}},5533:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(3469),a=t(3504),i=t(4990),l=t(4665),o=t(5410),c=t(184),s=function(e){var n,t=e.className,s=e.blog,u=e.linkRoot,d=s.channelId?{alias:s.channelId,type:r.Hm.ChannelDriveType.toString()}:void 0;return(0,c.jsx)("div",{className:"flex flex-nowrap px-5 py-8 transition-colors duration-200 hover:bg-slate-50 hover:dark:bg-slate-800 ".concat(null!==t&&void 0!==t?t:""),children:(0,c.jsxs)(a.rU,{to:"".concat(u).concat(null!==(n=s.slug)&&void 0!==n?n:"#"),className:"contents",children:[(0,c.jsx)("div",{className:"w-32 flex-shrink-0 pr-4 md:w-64 md:pr-8",children:d&&s.primaryImageFileId?(0,c.jsx)(o.Z,{className:"aspect-square w-full",fileId:s.primaryImageFileId,targetDrive:d,alt:"blog",cover:!0}):null}),(0,c.jsxs)("div",{className:"flex flex-col md:flex-grow md:flex-row",children:[(0,c.jsxs)("div",{className:"flex flex-shrink-0 md:order-3 md:mb-0 md:mt-3 md:w-32 md:flex-col md:text-right lg:w-64",children:[(0,c.jsx)("span",{className:"title-font font-semibold text-gray-700 dark:text-white",children:s.type.toUpperCase()}),(0,c.jsx)("span",{className:"pl-2 text-gray-500 md:mt-1 md:pl-0 md:text-sm",children:new Date(s.dateUnixTime).toLocaleDateString()})]}),(0,c.jsxs)("div",{className:"md:order-2 md:flex-grow",children:[(0,c.jsx)("h2",{className:"title-font mb-2 text-2xl font-medium text-gray-900 dark:text-white",children:s.caption}),"abstract"in s?(0,c.jsx)("p",{className:"leading-relaxed",children:s.abstract}):null,(0,c.jsxs)("span",{className:"mt-4 inline-flex items-center text-indigo-500",children:[(0,i.t)("learn more"),(0,c.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})]})]})]})})},u=function(e){var n=e.blogPosts,t=e.linkRoot;return(0,c.jsx)("div",{className:"-m-5 divide-y-2 divide-gray-100 dark:divide-gray-800",children:null===n||void 0===n?void 0:n.map((function(e){return(0,c.jsx)(s,{blog:e,linkRoot:t},e.itemKey)}))})}},4665:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.className;return(0,r.jsxs)("svg",{className:n,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5l7 7-7 7"})]})}},5410:function(e,n,t){t.d(n,{Z:function(){return b}});var r,a=t(885),i=t(2791),l=t(4165),o=t(5861),c=t(7408),s=t(3469),u=t(8642),d={alias:s.Ib.BlogMainContentDriveId.toString(),type:s.Hm.DriveType.toString()},v=function(e,n,t){var r=(0,u.Z)().getSharedSecret,a=(0,c.useQueryClient)(),i=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(n,t,a){var i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&""!==n){e.next=2;break}return e.abrupt("return");case 2:return i=new s.pt({api:s.Ii.YouAuth,sharedSecret:r()}),e.next=5,i.mediaProvider.getDecryptedImageUrl(null!==t&&void 0!==t?t:d,n,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();return{fetch:(0,c.useQuery)(["image",e,n,t],(function(){return i(e,n,t)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0}),testCache:function(e,n){return!!a.getQueryData(["image",e,n])}}},f={alias:s.Ib.BlogMainContentDriveId.toString(),type:s.Hm.DriveType.toString()},h=function(e,n){var t=(0,u.Z)().getSharedSecret,r=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(n,r){var a,i,o,c,u,d,v;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&""!==n){e.next=2;break}return e.abrupt("return");case 2:return i=new s.pt({api:s.Ii.YouAuth,sharedSecret:t()}),e.next=5,i.fileReadOnlyProvider.getFileEntryFromCache(n);case 5:if(null===(o=e.sent)||void 0===o||null===(a=o[0])||void 0===a||!a.header.fileMetadata.appData.previewThumbnail){e.next=11;break}return u=o[0].header.fileMetadata.appData.previewThumbnail,d=s.j4.base64ToUint8Array(u.content),v=window.URL.createObjectURL(new Blob([d])),e.abrupt("return",{naturalSize:{width:u.pixelWidth,height:u.pixelHeight},sizes:null!==(c=o[0].header.fileMetadata.appData.additionalThumbnails)&&void 0!==c?c:[],url:v});case 11:return e.next=13,i.mediaProvider.getDecryptedThumbnailMeta(null!==r&&void 0!==r?r:f,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,c.useQuery)(["tinyThumb",e,n],(function(){return r(e,n)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})},m=new WeakMap,g=function(e){e.forEach((function(e){if(m.has(e.target)){var n=m.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(r.unobserve(e.target),m.delete(e.target),n())}}))},p=function(){return void 0===r&&(r=new IntersectionObserver(g,{rootMargin:"100px",threshold:.15})),r},x=t(184),b=function(e){var n,t,r,l,o,c=e.targetDrive,s=e.fileId,u=e.cover,d=e.className,f=e.alt,g=e.title,b=(0,i.useState)(!1),y=(0,a.Z)(b,2),w=y[0],j=y[1],k=(0,i.useState)(void 0),Z=(0,a.Z)(k,2),N=Z[0],I=Z[1],S=(0,i.useRef)(null),C=h(w?s:void 0,c).data,D=v(void 0!==N?s:void 0,c,"full"!==N?N:void 0),P=D.fetch.data,R=D.testCache;l=S,o=function(){s&&R(s,c)&&L(),j(!0)},(0,i.useEffect)((function(){var e=l.current,n=p();if(e)return m.set(e,o),n.observe(e),function(){m.delete(e),n.unobserve(e)}}),[]),(0,i.useEffect)((function(){var e;C&&null!==(e=C.url)&&void 0!==e&&e.length&&setTimeout((function(){L()}),100)}),[C]);var L=function(){var e,n,t;if(null!==C&&void 0!==C&&null!==(e=C.sizes)&&void 0!==e&&e.length&&S.current){var r=null===(n=S.current)||void 0===n?void 0:n.clientWidth,a=null===(t=S.current)||void 0===t?void 0:t.clientHeight,i=C.sizes.find((function(e){return r<e.pixelWidth&&a<e.pixelHeight}));I(null!==i&&void 0!==i?i:"full")}else I("full")},M=N?P?"loaded":"loading-full":w?C&&null!==(n=C.url)&&void 0!==n&&n.length?"tiny":"loading-tiny":"idle";return(0,x.jsx)("figure",{className:"".concat(-1!==(null===d||void 0===d?void 0:d.indexOf("absolute"))?"":"relative"," overflow-hidden ").concat(d),children:"loading-tiny"!==M?(0,x.jsx)("img",{src:"loaded"===M?P:null===C||void 0===C?void 0:C.url,alt:w&&null!==C&&void 0!==C&&C.url?f:" ",className:"".concat("loaded"!==M&&"blur-[50px]"," ").concat(u?"h-full w-full object-cover":""),title:g||"".concat(s,"@").concat(void 0!==N&&"full"!==N?"".concat(N.pixelWidth,"x").concat(N.pixelHeight):N),ref:S,width:null===C||void 0===C||null===(t=C.naturalSize)||void 0===t?void 0:t.width,height:null===C||void 0===C||null===(r=C.naturalSize)||void 0===r?void 0:r.height}):null})}},2085:function(e,n,t){var r=t(3504),a=t(184);n.Z=function(e){var n=e.className,t=e.items;return(0,a.jsx)("div",{className:"flex ".concat(n),children:t.map((function(e){return(0,a.jsx)(r.OL,{className:function(e){var n=e.isActive;return"flex-grow cursor-pointer border-b-2 py-2 px-1 text-lg ".concat(n?"border-indigo-500 text-indigo-500 dark:text-indigo-400":"border-gray-300 transition-colors duration-300 hover:border-indigo-400 dark:border-gray-800 hover:dark:border-indigo-600")},to:e.path,end:!0,children:e.title},e.key)}))})}},632:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r,a=t(2982),i=t(885),l=t(6907),o=t(2085),c=t(6871),s=t(3469),u=t(2791),d=t(805),v=t(4990),f=t(4165),h=t(8683),m=t(5861),g=t(7408),p=t(3990),x=t(8642),b=function(e){return e.reduce((function(e,n){return e.some((function(e){return e.id===n.id&&e.channelId===n.channelId}))?e:[].concat((0,a.Z)(e),[n])}),[])},y=function(e){var n=e.channelId,t=(0,x.Z)().getSharedSecret,r=function(){var e=(0,m.Z)((0,f.Z)().mark((function e(n){var r,a,i,l,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.channelId,a=n.pageParam,i=new s.pt({api:s.Ii.YouAuth,sharedSecret:t()}),r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,i.blogPostReadonlyProvider.getPosts(r,"Article",a,10);case 6:return o=e.sent,l=b(o.posts).map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{slug:(0,p.V)(e.caption),itemKey:"".concat(e.channelId,"_").concat(e.id)})})),l=b(l).map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{slug:(0,p.V)(e.caption)})})),e.abrupt("return",{posts:l,cursorState:o.cursorState});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.useInfiniteQuery)(["blogs",n],(function(e){var t=e.pageParam;return r({channelId:n,pageParam:t})}),{getNextPageParam:function(e){var n;return null!==(n=null===e||void 0===e?void 0:e.cursorState)&&void 0!==n?n:void 0}})},w=t(1364),j=t(184),k=function(e){var n=e.blogPosts,t=e.linkRoot;return(0,j.jsx)("div",{className:"-m-4 flex flex-wrap",children:null===n||void 0===n?void 0:n.map((function(e){return(0,j.jsx)(w.Z,{blog:e,className:"p-4 md:w-1/2 lg:w-1/3 ",linkRoot:t},e.itemKey)}))})},Z=t(5533),N=function(e){var n=e.blogPosts,t=e.linkRoot,r=(0,u.useState)(1),a=(0,i.Z)(r,2),l=a[0],o=a[1],c=(0,u.useCallback)((function(){var e=document.documentElement.clientWidth;o(e>=1280?4:e>=1024?3:e>=640?2:1)}),[]);return(0,u.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){window.removeEventListener("resize",c)}}),[c]),(0,j.jsx)("div",{className:"-my-4 gap-4 sm:columns-2 lg:columns-3 xl:columns-4",children:function(e,n){for(var t=n,r=[],a=0;a<t;){for(var i=0;i<e.length;i+=t){var l=e[i+a];void 0!==l&&r.push(l)}a++}return r}(n,l).map((function(e){return(0,j.jsx)(w.Z,{className:"py-2",blog:e,linkRoot:t},e.itemKey)}))})},I=function(){var e,n,t=(0,c.UO)().channelKey,f=(0,u.useState)(1),h=(0,i.Z)(f,2),m=h[0],g=h[1],p=null!==(e=(0,d.Z)(t?{channelSlug:t}:void 0).data)&&void 0!==e?e:{},x=p.channels,b=p.activeChannel,w=y({channelId:null===b||void 0===b?void 0:b.channelId}),I=w.data,S=w.isLoading,C=w.fetchNextPage,D=(0,u.useRef)(null),P=b?b.template===s.rJ.LargeCards?k:b.template===s.rJ.MasonryLayout?N:Z.Z:Z.Z,R="/home/blog/".concat(null!==b&&void 0!==b&&b.slug?b.slug+"/":"all/");(0,u.useEffect)((function(){return r||(r=new IntersectionObserver((function(e){e[0].isIntersecting&&C()}),{rootMargin:"0px 0px 200px 0px"})),D.current&&r.observe(D.current),function(){var e;null===(e=r)||void 0===e||e.disconnect(),r=null}}),[D,D.current]);var L=null===I||void 0===I||null===(n=I.pages)||void 0===n?void 0:n.reduce((function(e,n){return null!==n&&void 0!==n&&n.posts?[].concat((0,a.Z)(e),(0,a.Z)(n.posts)):e}),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l.ql,{children:(0,j.jsxs)("title",{children:[(0,v.t)("blog")," | Youniverse"]})}),(0,j.jsx)("section",{className:"py-5",children:(0,j.jsx)("div",{className:"container mx-auto px-5",children:(0,j.jsxs)("section",{className:"body-font text-gray-600 dark:text-gray-400",children:[null!==x&&void 0!==x&&x.length?(0,j.jsx)(o.Z,{className:"mb-8",items:[{key:"",title:(0,v.t)("Recents"),path:"/home/blog"}].concat((0,a.Z)(x.map((function(e){return{key:e.channelId,title:e.name,path:"/home/blog/".concat(e.slug)}}))))}):null,L?(0,j.jsx)(P,{blogPosts:L,linkRoot:R}):null,(0,j.jsx)("a",{onClick:function(e){return e.preventDefault(),S||g(m+1),!1},className:"my-10 block w-full cursor-pointer rounded border-0 bg-indigo-500 py-2 px-4 text-center text-white hover:bg-indigo-600 focus:outline-none ".concat(null!==L&&void 0!==L&&L.length?"":"hidden"),ref:D,children:S?(0,v.t)("loading")+"...":(0,v.t)("load more")})]})})})]})}},3990:function(e,n,t){t.d(n,{V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()}},805:function(e,n,t){var r=t(4165),a=t(8683),i=t(5861),l=t(7408),o=t(3469),c=t(3990),s=t(8642);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{channelSlug:""},n=e.channelSlug,t=(0,s.Z)(),u=t.getSharedSecret,d=function(e){return parseInt(e+"")===o.rJ.LargeCards?o.rJ.LargeCards:parseInt(e+"")===o.rJ.ClassicBlog?o.rJ.ClassicBlog:o.rJ.MasonryLayout},v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,l,s,v,f,h,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new o.pt({api:o.Ii.YouAuth,sharedSecret:u()}),e.next=3,l.fileReadOnlyProvider.GetFile("channels.json");case 3:if(!(v=e.sent).has("channels")){e.next=8;break}s=null!==(f=null===(h=v.get("channels"))||void 0===h?void 0:h.map((function(e){var n=e.payload;return(0,a.Z)((0,a.Z)({},n),{},{slug:(0,c.V)(null===n||void 0===n?void 0:n.name),template:d(null===n||void 0===n?void 0:n.templateId)})})))&&void 0!==f?f:[],e.next=11;break;case 8:return e.next=10,l.blogPostReadonlyProvider.getChannels();case 10:s=e.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{slug:(0,c.V)(null===e||void 0===e?void 0:e.name),template:d(null===e||void 0===e?void 0:e.templateId)})}));case 11:return m=n&&null!==(t=null===(i=s)||void 0===i?void 0:i.find((function(e){return(0,c.V)(e.name)===n})))&&void 0!==t?t:void 0,e.abrupt("return",{channels:s,activeChannel:m});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.useQuery)(["channels",n],(function(){return v(n)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}}}]);
//# sourceMappingURL=632.f4a70de9.chunk.js.map