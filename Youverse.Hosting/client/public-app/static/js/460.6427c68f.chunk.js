"use strict";(self.webpackChunkpublic_app=self.webpackChunkpublic_app||[]).push([[460],{1364:function(e,t,n){var r=n(9415),a=n(3504),i=n(5410),l=n(4665),o=n(4990),c=n(184);t.Z=function(e){var t,n=e.className,s=e.blog,u=e.linkRoot,d=s.channelId?{alias:s.channelId,type:r.Hm.ChannelDriveType.toString()}:void 0;return(0,c.jsx)("div",{className:"".concat(null!==n&&void 0!==n?n:""),children:(0,c.jsx)(a.rU,{to:"".concat(u).concat(null!==(t=s.slug)&&void 0!==t?t:"#"),className:"contents",children:(0,c.jsxs)("div",{className:"h-full overflow-hidden rounded-lg border-2 border-gray-200 border-opacity-60 bg-white transition-colors duration-300 hover:bg-slate-50 dark:border-gray-800 dark:bg-gray-800 hover:dark:bg-slate-700",children:[s.primaryImageFileId&&d?(0,c.jsx)(i.Z,{className:"h-64 w-full md:h-36 lg:h-48",fileId:s.primaryImageFileId,targetDrive:d,alt:"blog",cover:!0}):null,(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("h2",{className:"title-font mb-1 text-xs font-medium tracking-widest text-gray-400 dark:text-gray-600",children:s.type.toUpperCase()}),(0,c.jsx)("span",{className:"text-gray-500 md:mt-1 md:text-sm",children:new Date(s.dateUnixTime).toLocaleDateString()}),(0,c.jsx)("h1",{className:"title-font mb-3 text-lg font-medium text-gray-900 dark:text-white",children:s.caption}),"abstract"in s?(0,c.jsx)("p",{className:"mb-3 leading-relaxed",children:s.abstract}):null,(0,c.jsx)("div",{className:"flex flex-wrap items-center ",children:(0,c.jsxs)("span",{className:"inline-flex items-center text-indigo-500 dark:text-indigo-400 md:mb-2 lg:mb-0",children:[(0,o.t)("learn more"),(0,c.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})})]})]})})})}},4665:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsxs)("svg",{className:t,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5l7 7-7 7"})]})}},5410:function(e,t,n){n.d(t,{Z:function(){return b}});var r,a=n(885),i=n(2791),l=n(4165),o=n(5861),c=n(7408),s=n(9415),u=n(8642),d={alias:s.Ib.BlogMainContentDriveId.toString(),type:s.Hm.DriveType.toString()},h=function(e,t,n){var r=(0,u.Z)().getSharedSecret,a=(0,c.useQueryClient)(),i=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,n,a){var i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&""!==t){e.next=2;break}return e.abrupt("return");case 2:return i=new s.pt({api:s.Ii.YouAuth,sharedSecret:r()}),e.next=5,i.mediaProvider.getDecryptedImageUrl(null!==n&&void 0!==n?n:d,t,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{fetch:(0,c.useQuery)(["image",e,t,n],(function(){return i(e,t,n)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0}),testCache:function(e,t){return!!a.getQueryData(["image",e,t])}}},f={alias:s.Ib.BlogMainContentDriveId.toString(),type:s.Hm.DriveType.toString()},m=function(e,t){var n=(0,u.Z)().getSharedSecret,r=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,r){var a,i,o,c,u,d,h;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&""!==t){e.next=2;break}return e.abrupt("return");case 2:return i=new s.pt({api:s.Ii.YouAuth,sharedSecret:n()}),e.next=5,i.fileReadOnlyProvider.getFileEntryFromCache(t);case 5:if(null===(o=e.sent)||void 0===o||null===(a=o[0])||void 0===a||!a.header.fileMetadata.appData.previewThumbnail){e.next=11;break}return u=o[0].header.fileMetadata.appData.previewThumbnail,d=s.j4.base64ToUint8Array(u.content),h=window.URL.createObjectURL(new Blob([d])),e.abrupt("return",{naturalSize:{width:u.pixelWidth,height:u.pixelHeight},sizes:null!==(c=o[0].header.fileMetadata.appData.additionalThumbnails)&&void 0!==c?c:[],url:h});case 11:return e.next=13,i.mediaProvider.getDecryptedThumbnailMeta(null!==r&&void 0!==r?r:f,t);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useQuery)(["tinyThumb",e,t],(function(){return r(e,t)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})},v=new WeakMap,g=function(e){e.forEach((function(e){if(v.has(e.target)){var t=v.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(r.unobserve(e.target),v.delete(e.target),t())}}))},x=function(){return void 0===r&&(r=new IntersectionObserver(g,{rootMargin:"100px",threshold:.15})),r},p=n(184),b=function(e){var t,n,r,l,o,c=e.targetDrive,s=e.fileId,u=e.cover,d=e.className,f=e.alt,g=e.title,b=(0,i.useState)(!1),y=(0,a.Z)(b,2),j=y[0],w=y[1],Z=(0,i.useState)(void 0),I=(0,a.Z)(Z,2),k=I[0],N=I[1],S=(0,i.useRef)(null),D=m(j?s:void 0,c).data,F=h(void 0!==k?s:void 0,c,"full"!==k?k:void 0),O=F.fetch.data,C=F.testCache;l=S,o=function(){s&&C(s,c)&&T(),w(!0)},(0,i.useEffect)((function(){var e=l.current,t=x();if(e)return v.set(e,o),t.observe(e),function(){v.delete(e),t.unobserve(e)}}),[]),(0,i.useEffect)((function(){var e;D&&null!==(e=D.url)&&void 0!==e&&e.length&&setTimeout((function(){T()}),100)}),[D]);var T=function(){var e,t,n;if(null!==D&&void 0!==D&&null!==(e=D.sizes)&&void 0!==e&&e.length&&S.current){var r=null===(t=S.current)||void 0===t?void 0:t.clientWidth,a=null===(n=S.current)||void 0===n?void 0:n.clientHeight,i=D.sizes.find((function(e){return r<e.pixelWidth&&a<e.pixelHeight}));N(i)}else N("full")},P=k?O?"loaded":"loading-full":j?D&&null!==(t=D.url)&&void 0!==t&&t.length?"tiny":"loading-tiny":"idle";return(0,p.jsx)("figure",{className:"".concat(-1!==(null===d||void 0===d?void 0:d.indexOf("absolute"))?"":"relative"," overflow-hidden ").concat(d),children:"loading-tiny"!==P?(0,p.jsx)("img",{src:"loaded"===P?O:null===D||void 0===D?void 0:D.url,alt:j&&null!==D&&void 0!==D&&D.url?f:" ",className:"".concat("loaded"!==P&&"blur-[50px]"," ").concat(u?"h-full w-full object-cover":""),title:g||"".concat(s,"@").concat(void 0!==k&&"full"!==k?"".concat(k.pixelWidth,"x").concat(k.pixelHeight):k),ref:S,width:null===D||void 0===D||null===(n=D.naturalSize)||void 0===n?void 0:n.width,height:null===D||void 0===D||null===(r=D.naturalSize)||void 0===r?void 0:r.height}):null})}},7460:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(9415),a=n(6871),i=n(4165),l=n(8683),o=n(5861),c=n(7408),s=n(3990),u=n(8642),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelSlug,n=e.blogSlug,a=(0,u.Z)(),d=a.getSharedSecret,h=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,a,c,u,h,f,m,v,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.channelSlug,c=t.blogSlug,a&&c){e.next=3;break}return e.abrupt("return");case 3:return u=new r.pt({api:r.Ii.YouAuth,sharedSecret:d()}),e.next=6,u.blogPostReadonlyProvider.getChannels();case 6:return h=e.sent.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{slug:(0,s.V)(e.name),template:parseInt((null===e||void 0===e?void 0:e.templateId)+"")===r.rJ.LargeCards?r.rJ.LargeCards:parseInt((null===e||void 0===e?void 0:e.templateId)+"")===r.rJ.ClassicBlog?r.rJ.ClassicBlog:r.rJ.MasonryLayout})})),f=h.find((function(e){return e.slug===a})),100,m=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.blogPostReadonlyProvider.getRecentPosts("Article",100);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{slug:(0,s.V)(e.caption),itemKey:"".concat(e.channelId,"_").concat(e.id)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=12,m();case 12:return v=e.sent,g=c&&v&&null!==(n=v.find((function(e){return e.slug===c})))&&void 0!==n?n:void 0,e.abrupt("return",{activeBlog:g,activeChannel:f});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useQuery)(["blog",n],(function(){return h({channelSlug:t,blogSlug:n})}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})},h=n(5410);function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=n(2791),v=n(184),g=["type"],x=function(e){var t=e.body,n=e.imageDrive;if(!t||"string"===typeof t)return(0,v.jsx)(v.Fragment,{children:t});var r=function e(t){if("text"in t)return a(t,t.text,{});var n,r=t.type,l=f(t,g);return i({type:r,attributes:l},(0,v.jsx)(v.Fragment,{children:null===(n=t.children)||void 0===n?void 0:n.map((function(t,n){return(0,v.jsx)(m.Fragment,{children:e(t)},n)}))}))},a=function(e,t,n){return e.bold&&(t=(0,v.jsx)("strong",{className:"font-bold",children:t})),e.code&&(t=(0,v.jsx)("code",{children:t})),e.italic&&(t=(0,v.jsx)("em",{children:t})),e.underline&&(t=(0,v.jsx)("u",{children:t})),(0,v.jsx)("span",(0,l.Z)((0,l.Z)({},n),{},{children:t}))},i=function(e,t){var r=e.type,a=e.attributes;switch(r){case"block-quote":return(0,v.jsx)("blockquote",(0,l.Z)((0,l.Z)({},a),{},{className:"border-l-4 pl-2",children:t}));case"bulleted-list":return(0,v.jsx)("ul",(0,l.Z)((0,l.Z)({},a),{},{className:"list-disc pl-5",children:t}));case"heading-one":return(0,v.jsx)("h1",(0,l.Z)((0,l.Z)({},a),{},{className:"text-2xl",children:t}));case"heading-two":return(0,v.jsx)("h2",(0,l.Z)((0,l.Z)({},a),{},{className:"text-xl",children:t}));case"list-item":return(0,v.jsx)("li",(0,l.Z)((0,l.Z)({},a),{},{children:t}));case"numbered-list":return(0,v.jsx)("ol",(0,l.Z)((0,l.Z)({},a),{},{className:"list-decimal pl-5",children:t}));case"image":return a&&"imageFileId"in a&&n?(0,v.jsx)(h.Z,{targetDrive:n,fileId:a.imageFileId,className:"my-4 max-w-md"}):(0,v.jsx)(v.Fragment,{});default:return(0,v.jsx)("p",(0,l.Z)((0,l.Z)({},a),{},{children:t}))}};return(0,v.jsx)("div",{children:t.map((function(e,t){return(0,v.jsx)(m.Fragment,{children:r(e)},t)}))})},p=n(4990),b=n(5322),y=n(1364),j=function(e){var t,n=e.blog,r=e.channel,a=(null!==(t=(0,b.Z)(r?{channelId:r.channelId}:{}).data)&&void 0!==t?t:{}).blogPosts;if(!a)return(0,v.jsx)(v.Fragment,{});var i=a.slice(0,4).filter((function(e){return e.id!==n.id})).slice(0,3);return(0,v.jsx)("section",{className:"mt-10 bg-slate-50 pt-16 pb-10 dark:bg-slate-800 dark:bg-opacity-50",children:(0,v.jsxs)("div",{className:"container mx-auto px-5",children:[(0,v.jsxs)("h2",{className:"mb-10 text-2xl dark:text-white",children:[(0,p.t)("related blogs")," ",r&&(0,v.jsxs)("small",{children:["| ",r.name]})]}),(0,v.jsx)("div",{className:"-m-1 flex flex-row flex-wrap",children:i.map((function(e){var t;return(0,v.jsx)(y.Z,{blog:e,linkRoot:"/home/blog/".concat(null!==(t=null===r||void 0===r?void 0:r.slug)&&void 0!==t?t:"all","/"),className:"p-1 sm:w-1/2 md:w-1/3"},e.id)}))})]})})},w=function(){var e,t=(0,a.UO)(),n=t.channelKey,i=t.blogKey,l=null!==(e=d(n&&i?{channelSlug:n,blogSlug:i}:void 0).data)&&void 0!==e?e:{},o=l.activeBlog,c=l.activeChannel,s=null!==o&&void 0!==o&&o.channelId?{alias:o.channelId,type:r.Hm.ChannelDriveType.toString()}:void 0;if(!o)return(0,v.jsx)(v.Fragment,{});var u="Article"===o.type?o:void 0;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("section",{className:"py-5",children:[(0,v.jsxs)("div",{className:"container mx-auto mb-10 flex flex-col items-center border-b-2 border-gray-100 px-5 pb-10 dark:border-gray-800 md:flex-row",children:[(0,v.jsxs)("div",{className:"flex w-full flex-col md:w-1/2 md:pr-16 lg:pr-24",children:[(0,v.jsx)("h2",{className:"title-font text-xs font-medium tracking-widest text-indigo-500 dark:text-indigo-400",children:null===c||void 0===c?void 0:c.name.toUpperCase()}),(0,v.jsxs)("span",{className:"pl-0 text-gray-500 md:mb-1 md:text-sm",children:[new Date(o.dateUnixTime).toLocaleDateString()," ",(null===u||void 0===u?void 0:u.readingTimeStats)&&(0,v.jsxs)(v.Fragment,{children:["| ",Math.ceil(u.readingTimeStats.minutes),"min read"]})]}),(0,v.jsx)("h1",{className:"title-font mb-4 text-2xl font-medium text-gray-900 dark:text-white sm:text-3xl",children:o.caption}),(0,v.jsx)("p",{className:"mr-auto text-base  leading-relaxed",children:null===u||void 0===u?void 0:u.abstract})]}),(0,v.jsx)("div",{className:"w-5/6 md:w-1/2 lg:w-full lg:max-w-lg",children:s&&o.primaryImageFileId?(0,v.jsx)(h.Z,{className:"rounded object-cover object-center",fileId:o.primaryImageFileId,targetDrive:s,alt:"blog"}):null})]}),(0,v.jsx)("div",{className:"container mx-auto px-5",children:(0,v.jsx)("div",{className:"lg:w-2/3",children:(0,v.jsx)("div",{className:"rich-text-content",children:(0,v.jsx)(x,{body:null===u||void 0===u?void 0:u.body,imageDrive:s})})})})]}),(0,v.jsx)(j,{blog:o,channel:c})]})}},3990:function(e,t,n){n.d(t,{V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()}},5322:function(e,t,n){var r=n(4165),a=n(2982),i=n(7762),l=n(8683),o=n(5861),c=n(7408),s=n(9415),u=n(3990),d=n(8642),h=function(e){return e.reduce((function(e,t){return e.some((function(e){return e.id===t.id&&e.channelId===t.channelId}))?e:[].concat((0,a.Z)(e),[t])}),[])};t.Z=function(e){var t=e.channelId,n=(0,d.Z)().getSharedSecret,f=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var o,c,d,f,m,v,g,x,p,b,y,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.channelId,c=new s.pt({api:s.Ii.YouAuth,sharedSecret:n()}),!o){e.next=21;break}return e.next=5,c.fileReadOnlyProvider.GetFile("blogs.json");case 5:if(!(f=e.sent).has(o)){e.next=10;break}d=null!==(m=null===(v=f.get(o))||void 0===v?void 0:v.map((function(e){var t=e.payload;return(0,l.Z)((0,l.Z)({},t),{},{slug:(0,u.V)("string"===typeof t.caption?t.caption:""),itemKey:"".concat(t.channelId,"_").concat(t.id)})})))&&void 0!==m?m:[],e.next=19;break;case 10:if(!(f.entries.length>1)){e.next=16;break}d=[],g=(0,i.Z)(f.keys());try{for(g.s();!(x=g.n()).done;)y=x.value,(d=[].concat((0,a.Z)(d),(0,a.Z)(null!==(p=null===(b=f.get(y))||void 0===b?void 0:b.map((function(e){var t=e.payload;return(0,l.Z)((0,l.Z)({},t),{},{slug:(0,u.V)("string"===typeof t.caption?t.caption:""),itemKey:"".concat(t.channelId,"_").concat(t.id)})})))&&void 0!==p?p:[]))).sort((function(e,t){return t.dateUnixTime-e.dateUnixTime}))}catch(r){g.e(r)}finally{g.f()}e.next=19;break;case 16:return e.next=18,c.blogPostReadonlyProvider.getPosts(o,"Article",void 0,10);case 18:d=e.sent.posts;case 19:e.next=24;break;case 21:return e.next=23,c.blogPostReadonlyProvider.getRecentPosts("Article",10);case 23:d=e.sent;case 24:return j=h(d).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{slug:(0,u.V)(e.caption),itemKey:"".concat(e.channelId,"_").concat(e.id)})})),e.abrupt("return",{blogPosts:j});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useQuery)(["blogs_recents",t],(function(){return f({channelId:t})}),{refetchOnMount:!1,refetchOnWindowFocus:!1,onError:function(e){console.log(e)}})}}}]);
//# sourceMappingURL=460.6427c68f.chunk.js.map