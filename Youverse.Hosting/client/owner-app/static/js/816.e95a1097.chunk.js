"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[816],{3990:function(e,t,n){n.d(t,{P:function(){return i},V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()},i=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}},1816:function(e,t,n){var r=n(1413),i=n(2982),a=n(4165),u=n(5861),o=n(7408),s=n(1803),c=n(3990),l=n(6117),p=n(1695);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.blogSlug,n=(0,l.Z)(),f=n.getSharedSecret,g=new s.KU({api:s.Ii.Owner,sharedSecret:f()}),d=(0,o.useQueryClient)(),h=(0,p.Z)().publish.mutate,v=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n,r,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.blogSlug){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,g.blogPostProvider.getBlogPostFile(n);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return 100,e.next=11,g.blogPostProvider.getMasterPosts(void 0,100);case 11:if(i=e.sent,!(u=i.find((function(e){return(0,c.V)(e.content.caption)===n})))){e.next=15;break}return e.abrupt("return",u);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.blogPostProvider.saveBlogPostMaster(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileId,t.slug,e.next=3,g.blogPostProvider.removeBlogPost(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blogFile,r=t.publishTargets,e.next=3,g.blogPostProvider.publishBlogPost(n,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n,u,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blogFile,u=t.channelId,e.next=3,g.blogPostProvider.deleteFromChannel(u,n.content.id);case 3:if(!e.sent){e.next=9;break}return o=n.publishTargets.reduce((function(e,t){return t.channelId===u?e:[].concat((0,i.Z)(e),[t])}),[]),s=(0,r.Z)((0,r.Z)({},n),{},{publishTargets:o}),e.next=8,m(s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["blog",t],(function(){return v({blogSlug:t})}),{refetchOnWindowFocus:!1}),save:(0,o.useMutation)(m,{onSuccess:function(e,t){t.content.slug?d.invalidateQueries(["blog",t.content.slug]):d.invalidateQueries(["blog"]),d.removeQueries(["blogs"])}}),remove:(0,o.useMutation)(y,{onSuccess:function(e,t){t&&t.slug?d.invalidateQueries(["blog",t.slug]):d.invalidateQueries(["blog"]),d.removeQueries(["blogs"])}}),publish:(0,o.useMutation)(b,{onSuccess:function(){d.invalidateQueries(["blog"]),d.removeQueries(["blogs"]),h()}}),unpublish:(0,o.useMutation)(P,{onSuccess:function(){d.invalidateQueries(["blog"]),d.removeQueries(["blogs"]),h()},onError:function(e){console.error(e)}})}}},7221:function(e,t,n){var r=n(4165),i=n(1413),a=n(5861),u=n(7408),o=n(1803),s=n(6117);t.Z=function(e){var t=e.profileId,n=e.sectionId,c=(0,s.Z)().getSharedSecret,l=new o.KU({api:o.Ii.Owner,sharedSecret:c()}),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.profileDataProvider.getProfileAttributes(t,n,100);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:Object.values(o.H1).find((function(t){return t.type.toString()===e.type}))})})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["attributes",t,n],(function(){return p(t,n)}),{refetchOnWindowFocus:!1})}}},2516:function(e,t,n){var r=n(4165),i=n(1413),a=n(5861),u=n(7408),o=n(1803),s=n(6117);t.Z=function(){var e=(0,s.Z)().getSharedSecret,t=new o.KU({api:o.Ii.Owner,sharedSecret:e()}),n=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.homePageProvider.getAttributes(o.Dg.HomePage.toString());case 2:return n=e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:{type:o.Dg.HomePage.toString(),name:"Home Page",description:""}})})),e.next=5,t.homePageProvider.getAttributes(o.Dg.Theme.toString());case 5:return a=e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:{type:o.Dg.Theme.toString(),name:"Theme",description:""}})})),e.abrupt("return",{home:n,theme:a});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["homeAtrributes"],(function(){return n()}),{refetchOnWindowFocus:!1})}}},1695:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(2982),i=n(4165),a=n(5861),u=n(7408),o=n(1803),s=n(1413),c=n(5671),l=n(3144),p=n(9340),f=n(1129),g=function(e){(0,p.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,{api:o.Ii.Owner,sharedSecret:e})).publishFile=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.createAxiosClient(),u={filename:t,config:{crossOriginalBehavior:"AllowAllOrigins",contentType:"string"},sections:n.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{queryParams:d(e.queryParams)})}))},e.next=4,a.post("/optimization/cdn/publish",u);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r}return(0,l.Z)(n,null,[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(o.BX);g.instance=void 0;var d=function(e){return e.tagsMatchAtLeastOne&&(e.tagsMatchAtLeastOne=e.tagsMatchAtLeastOne.map((function(e){return o.j4.uint8ArrayToBase64(o.j4.stringToUint8Array(e))}))),e.tagsMatchAll&&(e.tagsMatchAll=e.tagsMatchAll.map((function(e){return o.j4.uint8ArrayToBase64(o.j4.stringToUint8Array(e))}))),e.sender&&(e.sender=e.sender.map((function(e){return o.j4.uint8ArrayToBase64(o.j4.stringToUint8Array(e))}))),e},h=n(6117),v=n(7221),m=n(2516),y=function(){var e=(0,h.Z)().getSharedSecret,t=(0,m.Z)().fetch.data,n=(0,v.Z)({profileId:o.P.StandardProfileId.toString(),sectionId:o.P.PersonalInfoSectionId.toString()}).fetch.data,s=new o.KU({api:o.Ii.Owner,sharedSecret:e()}),c=function(){var u=(0,a.Z)((0,i.Z)().mark((function u(){var c,l,p,f;return(0,i.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return c=g.getInstance(e()),l=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r,a,u,s,l,p,f,g,d,h,v,m,y,b,P,Z,S,w,T,x;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={alias:o.Ib.DefaultDriveId.toString(),type:o._U.ProfileDriveType.toString()},l={alias:o.P.StandardProfileId.toString(),type:o._U.ProfileDriveType.toString()},p={targetDrive:l,fileType:[o.Uz.AttributeFileType],tagsMatchAll:[o.P.PersonalInfoSectionId.toString(),o.H1.Name.type.toString()]},f={targetDrive:l,fileType:[o.Uz.AttributeFileType],tagsMatchAll:[o.P.PersonalInfoSectionId.toString(),o.H1.Photo.type.toString()]},g={targetDrive:l,fileType:[o.Uz.AttributeFileType],tagsMatchAtLeastOne:[o.P.ExternalLinksSectionId.toString()]},d={targetDrive:s,fileType:[o.Uz.AttributeFileType],tagsMatchAtLeastOne:[o.Dg.Theme.toString()]},h={targetDrive:l,fileType:[o.Uz.AttributeFileType],tagsMatchAtLeastOne:[o.H1.FullBio.type.toString()]},v={targetDrive:l,fileType:[o.Uz.AttributeFileType],tagsMatchAtLeastOne:[o.H1.Link.type.toString()]},m={targetDrive:s,fileType:[o.Uz.AttributeFileType],tagsMatchAtLeastOne:[o.Dg.HomePage.toString()]},b=[{name:"socials",queryParams:g,resultOptions:y={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}},{name:"name",queryParams:p,resultOptions:y},{name:"photo",queryParams:f,resultOptions:y},{name:"bio",queryParams:h,resultOptions:y},{name:"link",queryParams:v,resultOptions:y},{name:"theme",queryParams:d,resultOptions:y},{name:"home",queryParams:m,resultOptions:y}],P=null===(r=t.home[0])||void 0===r?void 0:r.data.headerImageUrl,Z=(0,o.H3)(o.Ib.DefaultDriveId.toString()),S={targetDrive:Z,fileType:[0],tagsMatchAtLeastOne:[P]},P&&b.push({name:P,queryParams:S,resultOptions:y}),w=null===n||void 0===n||null===(a=n.find((function(e){return e.acl.requiredSecurityGroup===o.hh.Anonymous&&e.type===o.H1.Photo.type.toString()})))||void 0===a||null===(u=a.data)||void 0===u?void 0:u.profileImageId,T=(0,o.H3)(o.P.StandardProfileId.toString()),x={targetDrive:T,fileType:[0],tagsMatchAtLeastOne:[w]},w&&b.push({name:w,queryParams:x,resultOptions:y}),e.next=21,c.publishFile("profile.json",b);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.T4)(),n={targetDrive:t,fileType:[o.Hm.BlogChannelDefinitionFileType]},r=[{name:"channels",queryParams:n,resultOptions:{includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}}],e.next=6,c.publishFile("channels.json",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1},e.next=3,s.blogDefinitionProvider.getChannelDefinitions();case 3:return n=e.sent,a=n.map((function(e){var n={targetDrive:{alias:e.channelId,type:o.Hm.ChannelDriveType.toString()},fileType:[o.Hm.BlogPostFileType]};return{name:e.channelId,queryParams:n,resultOptions:t}})),e.next=7,s.blogPostReadonlyProvider.getRecentPosts("Article",6*n.length);case 7:return u=e.sent.map((function(e){var n={targetDrive:s.blogDefinitionProvider.getPublishChannelDrive(e.channelId),fileType:[0],tagsMatchAtLeastOne:[e.primaryImageFileId]};return{name:e.primaryImageFileId,queryParams:n,resultOptions:t}})),e.next=10,c.publishFile("blogs.json",[].concat((0,r.Z)(a),(0,r.Z)(u)));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u.next=6,l();case 6:return u.next=8,p();case 8:return u.next=10,f();case 10:case"end":return u.stop()}}),u)})));return function(){return u.apply(this,arguments)}}();return{publish:(0,u.useMutation)(c,{onError:function(e){console.error(e)}})}}}}]);
//# sourceMappingURL=816.e95a1097.chunk.js.map