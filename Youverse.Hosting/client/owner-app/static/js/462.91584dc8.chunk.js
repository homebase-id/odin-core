"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[462],{9636:function(e,r,n){var t=n(4165),i=n(5861),a=n(1413),s=n(885),o=n(2791),c=n(4164),u=n(4990),l=n(3412),f=n(3431),p=n(9072),d=n(6916),m=n(2465),h=n(6123),x=n(184);r.Z=function(e){var r=e.title,n=e.confirmText,v=e.isOpen,j=e.defaultValue,Z=e.onConfirm,b=e.onCancel,g=(0,l.Z)("modal-container"),w=(0,f.Z)().saveProfile,y=w.mutateAsync,P=w.status,O=(0,o.useState)((0,a.Z)({},j)),N=(0,s.Z)(O,2),k=N[0],D=N[1];if(!v)return null;var C=(0,x.jsx)(h.Z,{title:r,onClose:b,children:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("form",{onSubmit:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,y(k);case 3:return Z(),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)("label",{htmlFor:"name",children:(0,u.t)("Name")}),(0,x.jsx)(d.Z,{id:"name",name:"profileName",defaultValue:k.name,onChange:function(e){D((0,a.Z)((0,a.Z)({},k),{},{name:e.target.value}))},required:!0})]}),(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)("label",{htmlFor:"name",children:(0,u.t)("Description")}),(0,x.jsx)(m.Z,{id:"description",name:"profileDescription",defaultValue:k.description,onChange:function(e){D((0,a.Z)((0,a.Z)({},k),{},{description:e.target.value}))},required:!0})]}),(0,x.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,x.jsx)(p.Z,{className:"m-2",state:P,icon:"send",children:n||(0,u.t)("Add Profile")}),(0,x.jsx)(p.Z,{className:"m-2",type:"secondary",onClick:b,children:(0,u.t)("Cancel")})]})]})})});return(0,c.createPortal)(C,g)}},7262:function(e,r,n){n.r(r);var t=n(885),i=n(2791),a=n(3504),s=n(4990),o=n(3431),c=n(9072),u=n(9636),l=n(4655),f=n(3004),p=n(1191),d=n(184),m=function(e){var r=e.profileDef;return(0,d.jsx)(a.rU,{to:r.slug,className:"contents",children:(0,d.jsxs)("div",{className:"h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:bg-slate-100 dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-slate-700",children:[(0,d.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:r.name}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsx)("p",{children:r.description})})]})})};r.default=function(){var e=(0,o.Z)().fetchProfiles,r=e.data,n=e.isLoading,a=(0,i.useState)(!1),h=(0,t.Z)(a,2),x=h[0],v=h[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("section",{children:[(0,d.jsx)(f.Z,{icon:l.Z,title:(0,s.t)("My Profiles"),actions:(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(c.Z,{icon:"plus",onClick:function(){return v(!0)},className:"m-2",children:(0,s.t)("Add Profile")})})}),n?(0,d.jsxs)("div",{className:"-m-2 flex",children:[(0,d.jsx)(p.Z,{className:"m-2 h-10 w-1/4"}),(0,d.jsx)(p.Z,{className:"m-2 h-10 w-1/4"})]}):(0,d.jsx)("div",{className:"-m-2 flex flex-row items-stretch",children:r.map((function(e){return(0,d.jsx)("div",{className:"w-1/4 p-2",children:(0,d.jsx)(m,{profileDef:e})},e.name)}))})]}),(0,d.jsx)(u.Z,{isOpen:x,title:(0,s.t)("New Profile"),onCancel:function(){v(!1)},onConfirm:function(){v(!1)}})]})}},3990:function(e,r,n){n.d(r,{P:function(){return i},V:function(){return t}});var t=function(e){return e.split(" ").join("-").toLowerCase()},i=function(e){return Object.keys(e).map((function(r){return r+"="+e[r]})).join("&")}},3431:function(e,r,n){var t=n(4165),i=n(1413),a=n(5861),s=n(7408),o=n(1803),c=n(3990),u=n(6117);r.Z=function(){var e=(0,s.useQueryClient)(),r=(0,u.Z)().getSharedSecret,n=new o.KU({api:o.Ii.Owner,sharedSecret:r()}),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.getProfileDefinitions();case 2:return e.next=4,e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{slug:(0,c.V)(e.name)})}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.saveProfileDefinition(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetchProfiles:(0,s.useQuery)(["profiles"],(function(){return l()}),{refetchOnWindowFocus:!1}),saveProfile:(0,s.useMutation)(f,{onMutate:function(){var r=(0,a.Z)((0,t.Z)().mark((function r(n){var a,s;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.cancelQueries(["profiles"]);case 2:return a=e.getQueryData(["profiles"]),s=a.map((function(e){return e.profileId===n.profileId?(0,i.Z)((0,i.Z)({},n),{},{slug:(0,c.V)(n.name)}):e})),e.setQueryData(["profiles"],s),r.abrupt("return",{previousProfiles:a,newProfile:n});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),onError:function(r,n,t){console.error(r),e.setQueryData(["profiles"],t.previousProfiles)},onSettled:function(){e.invalidateQueries(["profiles"])}})}}},4942:function(e,r,n){function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{Z:function(){return t}})},1413:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(4942);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}}}]);
//# sourceMappingURL=462.91584dc8.chunk.js.map