"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[500],{3990:function(e,t,n){n.d(t,{P:function(){return a},V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()},a=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}},9088:function(e,t,n){var r=n(4165),a=n(5861),i=n(7408),u=n(1803),o=n(6117),s=n(1695);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=(0,o.Z)(),c=n.getSharedSecret,l=new u.KU({api:u.Ii.Owner,sharedSecret:c()}),p=(0,i.useQueryClient)(),f=(0,s.Z)().publish.mutate,h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.blogDefinitionProvider.getChannelDefinition(t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.blogDefinitionProvider.saveChannelDefinition(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.blogDefinitionProvider.removeChannelDefinition(t.channelId);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["channel",t],(function(){return h(t)}),{refetchOnWindowFocus:!1}),save:(0,i.useMutation)(d,{onSuccess:function(e,t){t.channelId?p.removeQueries(["channel",t.channelId]):p.removeQueries(["channel"]),p.removeQueries(["channels"]),f()}}),remove:(0,i.useMutation)(m,{onMutate:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["channels"]);case 2:return n=p.getQueryData(["channels"]),a=n.filter((function(e){return e.channelId!==t.channelId})),p.setQueryData(["channels"],a),e.abrupt("return",{previousChannels:n,toRemoveChannel:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){console.error(e),p.setQueryData(["channels"],n.previousChannels)},onSettled:function(){p.invalidateQueries(["channels"])}})}}},7221:function(e,t,n){var r=n(4165),a=n(1413),i=n(5861),u=n(7408),o=n(1803),s=n(6117);t.Z=function(e){var t=e.profileId,n=e.sectionId,c=(0,s.Z)().getSharedSecret,l=new o.KU({api:o.Ii.Owner,sharedSecret:c()}),p=(0,u.useQueryClient)(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.profileDataProvider.getProfileAttributes(t,n,100);case 4:return i=e.sent,e.abrupt("return",i.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:Object.values(o.H1).find((function(t){return t.type.toString()===e.type}))})})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profileId,a=t.sectionId,n&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.profileDataProvider.getProfileAttributes(n,a,100);case 5:return u=e.sent,e.next=8,Promise.all(u.map(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.profileDataProvider.removeAttribute(n,t.fileId));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["attributes",t,n],(function(){return f(t,n)}),{refetchOnWindowFocus:!1}),removeAttributes:(0,u.useMutation)(h,{onError:function(e){console.error(e)},onSettled:function(e,t,n){p.invalidateQueries(["attributes",n.profileId,n.sectionId])}})}}},2516:function(e,t,n){var r=n(4165),a=n(1413),i=n(5861),u=n(7408),o=n(1803),s=n(6117);t.Z=function(){var e=(0,s.Z)().getSharedSecret,t=new o.KU({api:o.Ii.Owner,sharedSecret:e()}),n=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.homePageProvider.getAttributes(o.Dg.HomePage.toString());case 2:return n=e.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:{type:o.Dg.HomePage.toString(),name:"Home Page",description:""}})})),e.next=5,t.homePageProvider.getAttributes(o.Dg.Theme.toString());case 5:return i=e.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:{type:o.Dg.Theme.toString(),name:"Theme",description:""}})})),e.abrupt("return",{home:n,theme:i});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["homeAtrributes"],(function(){return n()}),{refetchOnWindowFocus:!1})}}},1695:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(2982),a=n(4165),i=n(1413),u=n(5861),o=n(7408),s=n(1803),c=n(5671),l=n(3144),p=n(9340),f=n(1129),h=function(e){(0,p.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,{api:s.Ii.Owner,sharedSecret:e})).publishFile=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t,n){var u,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.createAxiosClient(),o={filename:t,config:{crossOriginalBehavior:"AllowAllOrigins",contentType:"string"},sections:n.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{queryParams:d(e.queryParams)})}))},e.next=4,u.post("/optimization/cdn/publish",o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r}return(0,l.Z)(n,null,[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(s.BX);h.instance=void 0;var d=function(e){return(e=(0,i.Z)({},e)).tagsMatchAtLeastOne&&(e.tagsMatchAtLeastOne=e.tagsMatchAtLeastOne.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e.tagsMatchAll&&(e.tagsMatchAll=e.tagsMatchAll.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e.sender&&(e.sender=e.sender.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e},m=n(6117),v=n(7221),g=n(2516),y=function(){var e=(0,m.Z)().getSharedSecret,t=(0,g.Z)().fetch.data,n=(0,v.Z)({profileId:s.P.StandardProfileId.toString(),sectionId:s.P.PersonalInfoSectionId.toString()}).fetch.data,c=new s.KU({api:s.Ii.Owner,sharedSecret:e()}),l=function(){var o=(0,u.Z)((0,a.Z)().mark((function o(){var l,p,f,d;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=h.getInstance(e()),p=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var r,u,o,c,p,f,h,d,m,v,g,y,Z,P,b,w,S,I,A,D,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={alias:s.Ib.DefaultDriveId.toString(),type:s._U.ProfileDriveType.toString()},p={alias:s.P.StandardProfileId.toString(),type:s._U.ProfileDriveType.toString()},f={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAll:[s.P.PersonalInfoSectionId.toString(),s.H1.Name.type.toString()]},h={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAll:[s.P.PersonalInfoSectionId.toString(),s.H1.Photo.type.toString()]},d={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.P.ExternalLinksSectionId.toString()]},m={targetDrive:c,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.Dg.Theme.toString()]},v={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.H1.FullBio.type.toString()]},g={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.H1.Link.type.toString()]},y={targetDrive:c,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.Dg.HomePage.toString()]},P=[{name:"socials",queryParams:d,resultOptions:Z={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}},{name:"name",queryParams:f,resultOptions:Z},{name:"photo",queryParams:h,resultOptions:Z},{name:"bio",queryParams:v,resultOptions:Z},{name:"link",queryParams:g,resultOptions:Z},{name:"theme",queryParams:m,resultOptions:Z},{name:"home",queryParams:y,resultOptions:Z}],b=[{name:"name",queryParams:f,resultOptions:Z},{name:"photo",queryParams:h,resultOptions:Z}],w=null===(r=t.home[0])||void 0===r?void 0:r.data.headerImageUrl,S=(0,s.H3)(s.Ib.DefaultDriveId.toString()),I={targetDrive:S,fileType:[0],tagsMatchAtLeastOne:[w]},w&&P.push({name:w,queryParams:I,resultOptions:Z}),A=null===n||void 0===n||null===(u=n.find((function(e){return e.acl.requiredSecurityGroup===s.hh.Anonymous&&e.type===s.H1.Photo.type.toString()})))||void 0===u||null===(o=u.data)||void 0===o?void 0:o.profileImageId,D=(0,s.H3)(s.P.StandardProfileId.toString()),T={targetDrive:D,fileType:[0],tagsMatchAtLeastOne:[A]},A&&(P.push({name:A,queryParams:T,resultOptions:Z}),b.push({name:A,queryParams:T,resultOptions:(0,i.Z)((0,i.Z)({},Z),{},{includeAdditionalThumbnails:!0})})),e.t0=Promise,e.next=23,l.publishFile("profile.json",P);case 23:return e.t1=e.sent,e.next=26,l.publishFile("public.json",b);case 26:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=30,e.t0.all.call(e.t0,e.t3);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.T4)(),n={targetDrive:t,fileType:[s.Hm.BlogChannelDefinitionFileType]},r=[{name:"channels",queryParams:n,resultOptions:{includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}}],e.next=6,l.publishFile("channels.json",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var t,n,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1},e.next=3,c.blogDefinitionProvider.getChannelDefinitions();case 3:return n=e.sent,i=n.map((function(e){var n={targetDrive:{alias:e.channelId,type:s.Hm.ChannelDriveType.toString()},fileType:[s.Hm.BlogPostFileType]};return{name:e.channelId,queryParams:n,resultOptions:t}})),e.next=7,c.blogPostReadonlyProvider.getRecentPosts("Article",6*n.length);case 7:return u=e.sent.map((function(e){var n={targetDrive:c.blogDefinitionProvider.getPublishChannelDrive(e.channelId),fileType:[0],tagsMatchAtLeastOne:[e.primaryImageFileId]};return{name:e.primaryImageFileId,queryParams:n,resultOptions:t}})),e.next=10,l.publishFile("blogs.json",[].concat((0,r.Z)(i),(0,r.Z)(u)));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.next=6,p();case 6:return o.next=8,f();case 8:return o.next=10,d();case 10:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return{publish:(0,o.useMutation)(l,{onError:function(e){console.error(e)}})}}}}]);
//# sourceMappingURL=500.bd27ad9f.chunk.js.map