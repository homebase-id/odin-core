"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[1],{6691:function(e,t,r){var n=r(4165),a=r(5861),i=r(885),s=r(2791),o=r(4164),u=r(4990),c=r(8088),l=r(3412),d=r(9072),p=r(184);t.Z=function(e){var t=e.title,r=e.confirmText,f=e.isOpen,m=e.acl,g=e.targetDrive,v=e.onConfirm,h=e.onCancel,y=(0,l.Z)("modal-container"),x=(0,c.Z)().save,b=x.mutate,Z=x.status,w=(0,s.useState)(),P=(0,i.Z)(w,2),S=P[0],I=P[1];if(!f)return null;var A=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,S.arrayBuffer();case 3:e.t1=e.sent,t=new e.t0(e.t1),b({acl:m,bytes:t,fileId:void 0,targetDrive:g},{onSuccess:v});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=(0,p.jsxs)("div",{className:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,p.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,p.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,p.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all dark:bg-black sm:my-8 sm:w-full sm:max-w-lg",children:[(0,p.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 dark:bg-black sm:p-6 sm:pb-4",children:(0,p.jsx)("div",{className:"sm:flex sm:items-start",children:(0,p.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,p.jsx)("h3",{className:"mb-3 text-lg font-medium leading-6 text-gray-900 dark:text-slate-50",id:"modal-title",children:t}),(0,p.jsx)("input",{onChange:function(e){var t=e.target.files[0];t&&I(t)},type:"file",accept:"image/png, image/jpeg, image/tiff, image/webp",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100"})]})})}),(0,p.jsxs)("div",{className:"-m-2 flex flex-row-reverse px-4 py-3",children:[(0,p.jsx)(d.Z,{className:"m-2",onClick:A,state:Z,children:null!==r&&void 0!==r?r:"Add"}),(0,p.jsx)(d.Z,{className:"m-2",type:"secondary",onClick:h,children:(0,u.t)("Cancel")})]})]})})})]});return(0,o.createPortal)(D,y)}},3197:function(e,t,r){var n=r(885),a=r(2791),i=r(4990),s=r(8088),o=r(8923),u=r(1088),c=r(7804),l=r(7134),d=r(6691),p=r(184);t.Z=function(e){var t=e.targetDrive,r=e.acl,f=e.onChange,m=e.defaultValue,g=e.name,v=(0,s.Z)("string"===typeof m?m:void 0,t),h=v.fetch,y=h.data,x=h.isLoading,b=v.remove.mutate,Z=(0,a.useState)(!1),w=(0,n.Z)(Z,2),P=w[0],S=w[1],I=(0,a.useState)(!1),A=(0,n.Z)(I,2),D=A[0],T=A[1];return x?(0,p.jsx)("div",{className:"aspect-square max-w-[20rem] animate-pulse bg-slate-100 dark:bg-slate-700"}):(0,p.jsxs)(p.Fragment,{children:[y?(0,p.jsx)("div",{className:"flex",children:(0,p.jsxs)("div",{className:"relative mr-auto",children:[(0,p.jsx)("button",{className:"absolute top-2 right-2 rounded-full bg-white p-2",onClick:function(e){return e.preventDefault(),S(!0),!1},children:(0,p.jsx)(c.Z,{className:"h-4 w-4 text-black"})}),(0,p.jsx)("button",{className:"absolute bottom-2 right-2 rounded-full bg-red-200 p-2",onClick:function(){return T(!0),!1},children:(0,p.jsx)(l.Z,{className:"h-4 w-4 text-black"})}),(0,p.jsx)("img",{src:y,alt:y,className:"max-h-[20rem]",onClick:function(){S(!0)}})]})}):(0,p.jsxs)("div",{className:"relative flex aspect-video max-w-[20rem] cursor-pointer bg-slate-100 dark:bg-slate-700",onClick:function(e){e.preventDefault(),S(!0)},children:[(0,p.jsx)(u.Z,{className:"m-auto h-8 w-8"}),(0,p.jsx)("p",{className:"absolute inset-0 top-auto pb-5 text-center text-slate-400",children:(0,i.t)("No image selected")})]}),(0,p.jsx)(d.Z,{acl:r,isOpen:P,targetDrive:t,title:(0,i.t)("Insert image"),confirmText:(0,i.t)("Add"),onCancel:function(){return S(!1)},onConfirm:function(e){f({target:{name:g,value:e}}),S(!1)}}),(0,p.jsx)(o.Z,{title:"Remove Current Image",confirmText:"Permanently remove",needConfirmation:D,onConfirm:function(){b({fileId:"string"===typeof m?m:void 0,targetDrive:t},{onSuccess:function(){f({target:{name:g,value:""}})}})},onCancel:function(){T(!1)},children:(0,p.jsx)("p",{className:"text-sm text-gray-500",children:(0,i.t)("Are you sure you want to remove the current file? This action cannot be undone.")})})]})}},6916:function(e,t,r){var n=r(1413),a=r(184);t.Z=function(e){var t;return(0,a.jsx)("input",(0,n.Z)((0,n.Z)({},e),{},{type:null!==(t=e.type)&&void 0!==t?t:"input",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},2465:function(e,t,r){var n=r(1413),a=r(184);t.Z=function(e){return(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},8088:function(e,t,r){var n=r(4165),a=r(5861),i=r(7408),s=r(1803),o=r(6117),u={alias:s.Ib.BlogMainContentDriveId.toString(),type:s.Hm.DriveType.toString()};t.Z=function(e,t){var r=(0,o.Z)().getSharedSecret,c=(0,i.useQueryClient)(),l=new s.KU({api:s.Ii.Owner,sharedSecret:r()}),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&""!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.mediaProvider.getDecryptedImageUrl(null!==r&&void 0!==r?r:u,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,o,c,d,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.bytes,a=t.targetDrive,i=void 0===a?u:a,o=t.acl,c=void 0===o?{requiredSecurityGroup:s.hh.Anonymous}:o,d=t.fileId,p=void 0===d?void 0:d,e.next=3,l.mediaProvider.uploadImage(i,void 0,c,r,p);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetDrive,a=void 0===r?u:r,i=t.fileId,e.next=3,l.mediaProvider.removeImage(i,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["image",e,t],(function(){return d(e,t)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0}),save:(0,i.useMutation)(p,{onSuccess:function(e,t){var r;t.fileId?c.removeQueries(["image",t.fileId,null!==(r=t.targetDrive)&&void 0!==r?r:u]):c.removeQueries(["image"])}}),remove:(0,i.useMutation)(f,{onSuccess:function(e,t){var r;t.fileId?c.removeQueries(["image",t.fileId,null!==(r=t.targetDrive)&&void 0!==r?r:u]):c.removeQueries(["image"])}})}}},7221:function(e,t,r){var n=r(4165),a=r(1413),i=r(5861),s=r(7408),o=r(1803),u=r(6117);t.Z=function(e){var t=e.profileId,r=e.sectionId,c=(0,u.Z)().getSharedSecret,l=new o.KU({api:o.Ii.Owner,sharedSecret:c()}),d=(0,s.useQueryClient)(),p=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.profileDataProvider.getProfileAttributes(t,r,100);case 4:return i=e.sent,e.abrupt("return",i.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:Object.values(o.H1).find((function(t){return t.type.toString()===e.type}))})})));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.profileId,a=t.sectionId,r&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.profileDataProvider.getProfileAttributes(r,a,100);case 5:return s=e.sent,e.next=8,Promise.all(s.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.profileDataProvider.removeAttribute(r,t.fileId));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["attributes",t,r],(function(){return p(t,r)}),{refetchOnWindowFocus:!1}),removeAttributes:(0,s.useMutation)(f,{onError:function(e){console.error(e)},onSettled:function(e,t,r){d.invalidateQueries(["attributes",r.profileId,r.sectionId])}})}}},2516:function(e,t,r){var n=r(4165),a=r(1413),i=r(5861),s=r(7408),o=r(1803),u=r(6117);t.Z=function(){var e=(0,u.Z)().getSharedSecret,t=new o.KU({api:o.Ii.Owner,sharedSecret:e()}),r=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.homePageProvider.getAttributes(o.Dg.HomePage.toString());case 2:return r=e.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:{type:o.Dg.HomePage.toString(),name:"Home Page",description:""}})})),e.next=5,t.homePageProvider.getAttributes(o.Dg.Theme.toString());case 5:return i=e.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeDefinition:{type:o.Dg.Theme.toString(),name:"Theme",description:""}})})),e.abrupt("return",{home:r,theme:i});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["homeAtrributes"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},1695:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(2982),a=r(4165),i=r(1413),s=r(5861),o=r(7408),u=r(1803),c=r(5671),l=r(3144),d=r(9340),p=r(1129),f=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var n;return(0,c.Z)(this,r),(n=t.call(this,{api:u.Ii.Owner,sharedSecret:e})).publishFile=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.createAxiosClient(),o={filename:t,config:{crossOriginalBehavior:"AllowAllOrigins",contentType:"string"},sections:r.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{queryParams:m(e.queryParams)})}))},e.next=4,s.post("/optimization/cdn/publish",o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n}return(0,l.Z)(r,null,[{key:"getInstance",value:function(e){return r.instance||(r.instance=new r(e)),r.instance}}]),r}(u.BX);f.instance=void 0;var m=function(e){return(e=(0,i.Z)({},e)).tagsMatchAtLeastOne&&(e.tagsMatchAtLeastOne=e.tagsMatchAtLeastOne.map((function(e){return u.j4.uint8ArrayToBase64(u.j4.stringToUint8Array(e))}))),e.tagsMatchAll&&(e.tagsMatchAll=e.tagsMatchAll.map((function(e){return u.j4.uint8ArrayToBase64(u.j4.stringToUint8Array(e))}))),e.sender&&(e.sender=e.sender.map((function(e){return u.j4.uint8ArrayToBase64(u.j4.stringToUint8Array(e))}))),e},g=r(6117),v=r(7221),h=r(2516),y=function(){var e=(0,g.Z)().getSharedSecret,t=(0,h.Z)().fetch.data,r=(0,v.Z)({profileId:u.P.StandardProfileId.toString(),sectionId:u.P.PersonalInfoSectionId.toString()}).fetch.data,c=new u.KU({api:u.Ii.Owner,sharedSecret:e()}),l=function(){var o=(0,s.Z)((0,a.Z)().mark((function o(){var l,d,p,m;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=f.getInstance(e()),d=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,s,o,c,d,p,f,m,g,v,h,y,x,b,Z,w,P,S,I,A,D;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={alias:u.Ib.DefaultDriveId.toString(),type:u._U.ProfileDriveType.toString()},d={alias:u.P.StandardProfileId.toString(),type:u._U.ProfileDriveType.toString()},p={targetDrive:d,fileType:[u.Uz.AttributeFileType],tagsMatchAll:[u.P.PersonalInfoSectionId.toString(),u.H1.Name.type.toString()]},f={targetDrive:d,fileType:[u.Uz.AttributeFileType],tagsMatchAll:[u.P.PersonalInfoSectionId.toString(),u.H1.Photo.type.toString()]},m={targetDrive:d,fileType:[u.Uz.AttributeFileType],tagsMatchAtLeastOne:[u.P.ExternalLinksSectionId.toString()]},g={targetDrive:c,fileType:[u.Uz.AttributeFileType],tagsMatchAtLeastOne:[u.Dg.Theme.toString()]},v={targetDrive:d,fileType:[u.Uz.AttributeFileType],tagsMatchAtLeastOne:[u.H1.FullBio.type.toString()]},h={targetDrive:d,fileType:[u.Uz.AttributeFileType],tagsMatchAtLeastOne:[u.H1.Link.type.toString()]},y={targetDrive:c,fileType:[u.Uz.AttributeFileType],tagsMatchAtLeastOne:[u.Dg.HomePage.toString()]},b=[{name:"socials",queryParams:m,resultOptions:x={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}},{name:"name",queryParams:p,resultOptions:x},{name:"photo",queryParams:f,resultOptions:x},{name:"bio",queryParams:v,resultOptions:x},{name:"link",queryParams:h,resultOptions:x},{name:"theme",queryParams:g,resultOptions:x},{name:"home",queryParams:y,resultOptions:x}],Z=[{name:"name",queryParams:p,resultOptions:x},{name:"photo",queryParams:f,resultOptions:x}],w=null===(n=t.home[0])||void 0===n?void 0:n.data.headerImageUrl,P=(0,u.H3)(u.Ib.DefaultDriveId.toString()),S={targetDrive:P,fileType:[0],tagsMatchAtLeastOne:[w]},w&&b.push({name:w,queryParams:S,resultOptions:x}),I=null===r||void 0===r||null===(s=r.find((function(e){return e.acl.requiredSecurityGroup===u.hh.Anonymous&&e.type===u.H1.Photo.type.toString()})))||void 0===s||null===(o=s.data)||void 0===o?void 0:o.profileImageId,A=(0,u.H3)(u.P.StandardProfileId.toString()),D={targetDrive:A,fileType:[0],tagsMatchAtLeastOne:[I]},I&&(b.push({name:I,queryParams:D,resultOptions:x}),Z.push({name:I,queryParams:D,resultOptions:(0,i.Z)((0,i.Z)({},x),{},{includeAdditionalThumbnails:!0})})),e.t0=Promise,e.next=23,l.publishFile("profile.json",b);case 23:return e.t1=e.sent,e.next=26,l.publishFile("public.json",Z);case 26:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=30,e.t0.all.call(e.t0,e.t3);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.T4)(),r={targetDrive:t,fileType:[u.Hm.BlogChannelDefinitionFileType]},n=[{name:"channels",queryParams:r,resultOptions:{includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}}],e.next=6,l.publishFile("channels.json",n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1},e.next=3,c.blogDefinitionProvider.getChannelDefinitions();case 3:return r=e.sent,i=r.map((function(e){var r={targetDrive:{alias:e.channelId,type:u.Hm.ChannelDriveType.toString()},fileType:[u.Hm.BlogPostFileType]};return{name:e.channelId,queryParams:r,resultOptions:t}})),e.next=7,c.blogPostReadonlyProvider.getRecentPosts("Article",6*r.length);case 7:return s=e.sent.map((function(e){var r={targetDrive:c.blogDefinitionProvider.getPublishChannelDrive(e.channelId),fileType:[0],tagsMatchAtLeastOne:[e.primaryImageFileId]};return{name:e.primaryImageFileId,queryParams:r,resultOptions:t}})),e.next=10,l.publishFile("blogs.json",[].concat((0,n.Z)(i),(0,n.Z)(s)));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.next=6,d();case 6:return o.next=8,p();case 8:return o.next=10,m();case 10:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return{publish:(0,o.useMutation)(l,{onError:function(e){console.error(e)}})}}}}]);
//# sourceMappingURL=1.151837ea.chunk.js.map