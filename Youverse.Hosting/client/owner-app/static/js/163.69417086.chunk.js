"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[163],{9072:function(e,t,n){n.d(t,{Z:function(){return p},s:function(){return f}});var r=n(1413),a=n(4665),s=n(4648),i=n(1088),c=n(184);n(1025);var o=function(e){var t=e.className;return(0,c.jsxs)("div",{className:"loader ".concat(t),children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{})]})},u=n(5207),l=function(e){var t=e.className;return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:t,children:(0,c.jsx)("path",{d:"M433.1 129.1l-83.9-83.9C342.3 38.32 327.1 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 152.9 441.7 137.7 433.1 129.1zM224 416c-35.34 0-64-28.66-64-64s28.66-64 64-64s64 28.66 64 64S259.3 416 224 416zM320 208C320 216.8 312.8 224 304 224h-224C71.16 224 64 216.8 64 208v-96C64 103.2 71.16 96 80 96h224C312.8 96 320 103.2 320 112V208z"})})},d=n(7134),f=function(e,t){return"error"===e||"error"===t?"error":"loading"===e||"loading"===t?"loading":"idle"===e&&"idle"===t?"idle":"success"===e&&"success"===t||"success"===e&&"idle"===t||"idle"===e&&"success"===t?"success":void 0},p=function(e){var t=e.children,n=e.onClick,f=e.className,p=e.icon,v=e.type,m=e.state,h=e.title,x=e.size,Z=function(e){return"loading"===m?(0,c.jsx)(o,(0,r.Z)({},e)):"success"===m?(0,c.jsx)(s.Z,(0,r.Z)({},e)):"error"===m?(0,c.jsx)(i.Z,(0,r.Z)({},e)):"save"===p?(0,c.jsx)(l,(0,r.Z)({},e)):"send"===p?(0,c.jsx)(a.Z,(0,r.Z)({},e)):"plus"===p?(0,c.jsx)(u.Z,(0,r.Z)({},e)):"trash"===p?(0,c.jsx)(d.Z,(0,r.Z)({},e)):(0,c.jsx)(c.Fragment,{})},g="error"===m?"bg-red-500 hover:bg-red-600 text-white":"secondary"===v?"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-800 dark:text-white":"remove"===v?"bg-red-200 hover:bg-red-400 dark:bg-red-700 hover:dark:bg-red-800 dark:text-white":"bg-green-500 hover:bg-green-600 text-white",w="large"===x?"px-5 py-3":"small"===x?"px-3 py-1 text-sm":"px-3 py-2";return(0,c.jsxs)("button",{className:"flex ".concat(t?"min-w-[6rem]":""," flex-row rounded-md ").concat(w," text-left ").concat(g,"  ").concat("loading"===m?"animate-pulse":""," ").concat(f),disabled:"loading"===m,onClick:n,title:h,children:[(0,c.jsx)("span",{className:"mr-1",children:t}),(0,c.jsx)(Z,{className:"my-auto ml-auto h-4 w-4"})]})}},5660:function(e,t,n){var r=n(885),a=n(2791),s=n(184);t.Z=function(e){var t=e.className,n=e.state,i=(0,a.useState)(null),c=(0,r.Z)(i,2),o=c[0],u=c[1],l=(0,a.useState)(new Date),d=(0,r.Z)(l,2),f=d[0],p=d[1];if((0,a.useEffect)((function(){"success"===n&&u(new Date)}),[n]),(0,a.useEffect)((function(){var e=setTimeout((function(){p(new Date)}),3e4);return function(){clearTimeout(e)}}),[f]),!o)return null;var v=f.getTime()-o.getTime(),m=o?v<=6e4?"a few seconds ago":v<=6e5?"a few minutes ago":o.toLocaleString():"";return m?(0,s.jsxs)("p",{className:"".concat(t," text-sm"),children:["Last saved ",m]}):null}},6123:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(184),a=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"})})},s=function(e){var t=e.children,n=e.title,s=e.onClose,i=e.size,c=void 0===i?"large":i;return(0,r.jsxs)("div",{className:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,r.jsx)("div",{className:"relative transform rounded-lg bg-white text-left shadow-xl transition-all dark:bg-black sm:my-8 sm:w-full ".concat("normal"===c?"sm:max-w-lg":"large"===c?"sm:max-w-xl":"sm:max-w-4xl"),children:(0,r.jsxs)("div",{className:"bg-white px-8 py-8 dark:bg-black dark:text-slate-50",children:[n||s?(0,r.jsxs)("div",{className:"-mx-8 -mt-8 mb-8 flex flex-row bg-slate-100 px-8 py-4 dark:bg-slate-700",children:[n?(0,r.jsx)("h3",{className:"my-3 text-2xl font-medium leading-6 text-gray-900 dark:text-slate-50",id:"modal-title",children:n}):null,s?(0,r.jsx)("button",{onClick:s,className:"ml-auto p-2",children:(0,r.jsx)(a,{className:"h-5 w-5"})}):null]}):null,t]})})})})]})}},2284:function(e,t,n){var r=n(885),a=n(2791),s=n(1261),i=n(4648),c=n(245),o=n(184),u=function(e){var t=e.className,n=e.isChecked,r=e.children,a=e.onChange;return(0,o.jsxs)("li",{className:"flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(t),onClick:a,children:[(0,o.jsx)(i.Z,{className:"my-auto mr-3 h-4 w-4 ".concat(n?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,o.jsx)("span",{className:"mr-auto block h-full py-1",children:r})]})};t.Z=function(e){var t=e.className,n=e.permissionLevels,i=e.onChange,l=e.defaultValue,d=(0,a.useState)(!1),f=(0,r.Z)(d,2),p=f[0],v=f[1],m=(0,a.useState)(l),h=(0,r.Z)(m,2),x=h[0],Z=h[1],g=(0,a.useRef)(null);(0,s.Z)(g,(function(){return v(!1)}));var w=n.reduce((function(e,t){return t.value>e.value&&t.value<=l?t:e}),n[0]),y=function(e){Z(e),i(e)};return(0,o.jsx)("div",{className:null!==t&&void 0!==t?t:"",children:(0,o.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return v(!p)},ref:g,children:[(0,o.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,o.jsx)("span",{className:"my-auto mr-2 select-none",children:w.name})," ",(0,o.jsx)(c.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,o.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(p?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:n.map((function(e){return(0,o.jsx)(u,{isChecked:0===e.value?x===e.value:x>=e.value,onChange:function(){return x!==e.value?y(e.value):y(0)},children:e.name},e.value)}))})]})})}},4648:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",className:t,viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,r.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]})}},1088:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"})})}},5207:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",viewBox:"0 0 448 512",children:(0,r.jsx)("path",{d:"M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"})})}},7134:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM31.1 128H416V448C416 483.3 387.3 512 352 512H95.1C60.65 512 31.1 483.3 31.1 448V128zM111.1 208V432C111.1 440.8 119.2 448 127.1 448C136.8 448 143.1 440.8 143.1 432V208C143.1 199.2 136.8 192 127.1 192C119.2 192 111.1 199.2 111.1 208zM207.1 208V432C207.1 440.8 215.2 448 223.1 448C232.8 448 240 440.8 240 432V208C240 199.2 232.8 192 223.1 192C215.2 192 207.1 199.2 207.1 208zM304 208V432C304 440.8 311.2 448 320 448C328.8 448 336 440.8 336 432V208C336 199.2 328.8 192 320 192C311.2 192 304 199.2 304 208z"})})}},245:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},3004:function(e,t,n){var r=n(3504),a=n(5660),s=n(184);t.Z=function(e){var t=e.title,n=e.actions,i=e.saveStatus,c=e.breadCrumbs,o=e.icon;return(0,s.jsx)("section",{className:"-my-8 -mx-10 mb-10 border-b-2 border-gray-100 bg-slate-50 py-8 px-10 dark:border-gray-700 dark:bg-slate-800",children:(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("div",{className:"flex-col",children:[c&&(0,s.jsx)("ul",{className:"mb-2 hidden flex-row sm:flex",children:c.map((function(e,t){return(0,s.jsx)("li",{className:"mr-2",children:e.href?(0,s.jsxs)(r.rU,{to:e.href,className:"",children:[e.title,(0,s.jsx)("span",{className:"ml-2",children:">"})]}):(0,s.jsx)("span",{className:"text-slate-500",children:e.title})},t)}))}),t&&(0,s.jsxs)("h1",{className:"mb-5 flex flex-row text-4xl dark:text-white",children:[o&&o({className:"h-8 w-8 my-auto mr-4"})," ",t]})]}),(0,s.jsxs)("div",{className:"ml-auto ",children:[(0,s.jsx)("div",{className:"flex flex-row",children:n}),i&&(0,s.jsx)(a.Z,{className:"mt-1",state:i})]})]})})}},8808:function(e,t,n){var r=n(3504),a=n(715),s=n(184);t.Z=function(e){var t=e.circleDef,n=e.permissionLevel;return t?(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(r.rU,{to:"/owner/circles/".concat(t.id),children:(0,s.jsxs)("h2",{className:"mb-2 flex flex-row text-xl",children:[(0,s.jsx)(a.Z,{className:"my-auto mr-2 h-4 w-4"})," ",(0,s.jsx)("span",{className:"my-auto",children:t.name}),n&&(0,s.jsxs)("span",{className:"my-auto",children:[": ",n]})]})})}):(0,s.jsx)(s.Fragment,{})}},8491:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.title,n=e.className,a=e.children,s=e.isOpaqueBg,i=void 0!==s&&s,c=e.isBorderLess,o=void 0!==c&&c;return(0,r.jsxs)("section",{className:"my-5 rounded-md ".concat(i?o?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==n&&void 0!==n?n:""),children:[t?(0,r.jsx)("div",{className:"relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:(0,r.jsx)("h3",{className:"text-2xl dark:text-white",children:t})}):null,(0,r.jsx)("div",{className:"py-5 ",children:a})]})}},7266:function(e,t,n){n.d(t,{RG:function(){return i},fP:function(){return s},hz:function(){return c},rS:function(){return r},vr:function(){return a}});var r=function(e){return e[Math.floor(Math.random()*e.length)]},a=function(){return r(["Ut bibendum, neque ac lacinia aliquam, justo ipsum aliquam urna, id vestibulum augue mauris sit amet lacus.","Proin ante sapien, interdum sit amet eros sit amet, eleifend pharetra metus.","Sed elit mi, euismod eget neque at, suscipit aliquam nisi.","Nunc diam arcu, tincidunt quis dignissim ac, volutpat non odio."])},s=function(){var e=["adorable","beautiful","clean","drab","elegant","fancy","glamorous","handsome","long","magnificent","old-fashioned","plain","quaint","sparkling","ugliest","unsightly","angry","bewildered","clumsy","defeated","embarrassed","fierce","grumpy","helpless","itchy","jealous","lazy","mysterious","nervous","obnoxious","panicky","repulsive","scary","thoughtless","uptight","worried"];return"".concat(r(e)," ").concat(r(e)," ").concat(r(["women","men","children","teeth","feet","people","leaves","mice","geese","halves","knives","wives","lives","elves","loaves","potatoes","tomatoes","cacti","foci","fungi","nuclei","syllabuses","analyses","diagnoses","oases","theses","crises","phenomena","criteria","data"]))},i=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r.buffer},c=function(e,t){return t.reduce((function(t,n){return n.value>t.value&&n.value<=e?n:t}),t[0])}},5163:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(885),a=n(2791),s=n(6871),i=n(4990),c=n(1512),o=n(9072),u=n(1413),l=n(2982),d=n(4165),f=n(5861),p=n(4164),v=n(4395),m=n(3412),h=n(2562),x=n(2284),Z=n(715),g=n(6123),w=n(184),y=function(e){var t=e.title,n=e.confirmText,s=e.isOpen,c=e.driveDefinition,y=e.onConfirm,b=e.onCancel,j=(0,m.Z)("modal-container"),k=c.targetDriveInfo,C=(0,a.useState)("idle"),N=(0,r.Z)(C,2),A=N[0],S=N[1],O=(0,v.Z)(),R=O.fetch.data,D=O.createOrUpdate.mutateAsync,M=(0,a.useState)([]),E=(0,r.Z)(M,2),I=E[0],z=E[1];if(!s)return null;var L=(0,w.jsx)(g.Z,{title:t,onClose:b,children:(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("form",{onSubmit:function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S("loading"),e.prev=2,e.next=5,Promise.all(I.map(function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({circleDefinition:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),S("error");case 10:return S("success"),e.next=13,setTimeout((function(){return y()}),2e3);case 13:return y(),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),children:[null!==R&&void 0!==R&&R.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("h2",{className:"mb-2 flex flex-row text-xl",children:[(0,w.jsx)(Z.Z,{className:"my-auto mr-2 h-4 w-4"})," ",(0,i.t)("Circles"),":"]}),R.map((function(e){var t,n=null===I||void 0===I?void 0:I.find((function(t){return t.id===e.id})),r=null===(t=(null!==n&&void 0!==n?n:e).drivesGrants)||void 0===t?void 0:t.find((function(e){return e.drive.alias===k.alias&&e.drive.type===k.type}));return(0,w.jsxs)("div",{className:"mb-5 flex flex-row",children:[(0,w.jsx)("label",{htmlFor:"name",className:"my-auto mr-2",children:e.name}),(0,w.jsx)(x.Z,{className:"ml-auto",permissionLevels:h.A,defaultValue:null===r||void 0===r?void 0:r.permission,onChange:function(t){z([].concat((0,l.Z)(I.filter((function(t){return t.id!==e.id}))),[(0,u.Z)((0,u.Z)({},e),{},{drivesGrants:[].concat((0,l.Z)(e.drivesGrants.filter((function(e){return e.drive.alias!==k.alias&&e.drive.type!==k.type}))),[{drive:(0,u.Z)({},k),permission:t}])})]))}})]},e.id)}))]}):null,(0,w.jsxs)("div",{className:"-mx-2 py-3 sm:flex sm:flex-row-reverse",children:[(0,w.jsx)(o.Z,{className:"mx-2",icon:"send",state:A,children:n||(0,i.t)("Save")}),(0,w.jsx)(o.Z,{className:"mx-2",type:"secondary",onClick:b,children:(0,i.t)("Cancel")})]})]})})});return(0,p.createPortal)(L,j)},b=n(5512),j=n(3504),k=function(e){var t=e.appDef,n=e.permissionLevel;return t?(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)(j.rU,{to:"/owner/apps/".concat(t.appId),children:(0,w.jsxs)("h2",{className:"mb-2 flex flex-row text-xl",children:[(0,w.jsx)(Z.Z,{className:"my-auto mr-2 h-4 w-4"})," ",(0,w.jsx)("span",{className:"my-auto",children:t.name}),n&&(0,w.jsxs)("span",{className:"my-auto",children:[": ",n]})]})})}):(0,w.jsx)(w.Fragment,{})},C=n(8808),N=n(8491),A=n(7266),S=function(e){var t=e.driveDefinition,n=(0,v.Z)().fetch.data,r=(0,b.Z)().fetchRegistered.data,a=t.targetDriveInfo,s=null===n||void 0===n?void 0:n.filter((function(e){var t;return null===(t=e.drivesGrants)||void 0===t?void 0:t.some((function(e){return e.drive.alias===a.alias&&e.drive.type===a.type}))})),c=null===r||void 0===r?void 0:r.filter((function(e){return e.grant.driveGrants.some((function(e){return e.drive.alias===a.alias&&e.drive.type===a.type}))}));return(0,w.jsxs)(w.Fragment,{children:[null!==s&&void 0!==s&&s.length?(0,w.jsx)(N.Z,{title:(0,i.t)("Circles with access:"),isOpaqueBg:!0,children:(0,w.jsx)("ul",{children:s.map((function(e){var t=e.drivesGrants.find((function(e){return e.drive.alias===a.alias&&e.drive.type===a.type}));return(0,w.jsx)(C.Z,{circleDef:e,permissionLevel:(0,A.hz)(null===t||void 0===t?void 0:t.permission,h.A).name},e.id)}))})}):null,null!==c&&void 0!==c&&c.length?(0,w.jsx)(N.Z,{title:(0,i.t)("Apps with access:"),isOpaqueBg:!0,children:(0,w.jsx)("ul",{children:c.map((function(e){var t=e.grant.driveGrants.find((function(e){return e.drive.alias===a.alias&&e.drive.type===a.type}));return(0,w.jsx)(k,{appDef:e,permissionLevel:(0,A.hz)(null===t||void 0===t?void 0:t.permission,h.A).name},e.appId)}))})}):null]})},O=n(894),R=n(3004),D=function(){var e,t=(0,s.UO)().driveKey.split("_"),n=(0,c.Z)({targetDrive:{alias:t[0],type:t[1]}}).fetch,u=n.data,l=n.isLoading,d=(0,a.useState)(!1),f=(0,r.Z)(d,2),p=f[0],v=f[1];return l&&w.Fragment,u?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(R.Z,{icon:O.Z,title:"".concat(u.name),actions:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(o.Z,{onClick:function(){return v(!0)},children:"Edit Access"})}),breadCrumbs:[{href:"/owner/drives",title:"My Drives"},{title:null!==(e=u.name)&&void 0!==e?e:""}]}),(0,w.jsxs)(N.Z,{title:(0,i.t)("Metadata"),isOpaqueBg:!0,children:[(0,w.jsx)("p",{children:u.metadata}),(0,w.jsxs)("ul",{children:[u.allowAnonymousReads?(0,w.jsx)("li",{children:"Allow Anonymous Reads"}):null,u.isReadonly?(0,w.jsx)("li",{children:"Read Only"}):null]})]}),(0,w.jsx)(S,{driveDefinition:u}),(0,w.jsx)(y,{driveDefinition:u,isOpen:p,onCancel:function(){v(!1)},onConfirm:function(){v(!1)},title:"".concat((0,i.t)("Edit access on")," ").concat(u.name)})]}):(0,w.jsx)(w.Fragment,{children:"No matching drive found"})}},5512:function(e,t,n){var r=n(4165),a=n(5861),s=n(7408),i=n(4180),c=n(6117);t.Z=function(){var e=(0,s.useQueryClient)(),t=(0,c.Z)().getSharedSecret,n=i.Z.getInstance(t()),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.GetAppRegistrations();case 2:return e.next=4,e.sent;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.appId;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetchRegistered:(0,s.useQuery)(["registeredApps"],(function(){return o()}),{refetchOnMount:!1,refetchOnWindowFocus:!1}),revokeApp:(0,s.useMutation)(u,{onSuccess:function(){e.invalidateQueries(["registeredApps"])},onError:function(e){console.error(e)}})}}},4395:function(e,t,n){var r=n(4165),a=n(5861),s=n(7408),i=n(136),c=n(3766),o=n(6117);t.Z=function(){var e=(0,s.useQueryClient)(),t=(0,o.Z)().getSharedSecret,n=c.k.getInstance(t()),u=i.W.getInstance(t()),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCircles();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.circleDefinition).id){e.next=7;break}return e.next=4,n.updateDefinition(a);case 4:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.createDefinition(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.circleId,a=t.dotYouId,e.next=3,u.add({circleId:n,dotYouId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.circleId,a=t.dotYouId,e.next=3,u.remove({circleId:n,dotYouId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["circles"],(function(){return l()}),{refetchOnMount:!1,refetchOnWindowFocus:!1}),createOrUpdate:(0,s.useMutation)(d,{onSuccess:function(t,n){e.invalidateQueries(["circles"])},onError:function(e){console.error(e)}}),provideGrant:(0,s.useMutation)(f,{onSuccess:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.invalidateQueries(["circles"]),e.invalidateQueries(["connectionInfo",a.dotYouId]);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),revokeGrant:(0,s.useMutation)(p,{onSuccess:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.invalidateQueries(["circles"]),e.invalidateQueries(["connectionInfo",a.dotYouId]);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),onError:function(e){console.error(e)}})}}},1261:function(e,t,n){var r=n(2791);t.Z=function(e,t){(0,r.useEffect)((function(){function n(n){e.current&&!e.current.contains(n.target)&&t()}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e])}},1512:function(e,t,n){var r=n(4165),a=n(5861),s=n(7408),i=n(1803),c=n(6117);t.Z=function(e){var t=e.targetDrive,n=(0,c.Z)().getSharedSecret,o=new i.AO({api:i.Ii.Owner,sharedSecret:n()}),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.driveProvider.GetDrives({pageNumber:1,pageSize:100});case 2:return e.next=4,e.sent.results;case 4:return n=e.sent,e.abrupt("return",n.find((function(e){return e.targetDriveInfo.alias===t.alias&&e.targetDriveInfo.type===t.type})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["drive","".concat(t.alias,"_").concat(t.type)],(function(){return u(t)}),{refetchOnMount:!1,refetchOnWindowFocus:!1})}}},3412:function(e,t,n){var r=n(2791);t.Z=function(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n,r=document.querySelector("#".concat(e)),a=r||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return r||(n=a,document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)),a.appendChild(t.current),function(){t.current.remove(),a.childElementCount||a.remove()}}),[e]),t.current||(t.current=document.createElement("div")),t.current}},4180:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(4165),a=n(5861),s=n(5671),i=n(3144),c=n(9340),o=n(1129),u=function(e){(0,c.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"RegisterAppClient",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAxiosClient(),e.next=3,n.post("appmanagement/register/client",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"RegisterChatAppClient_temp",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAxiosClient(),e.next=3,n.post("appmanagement/register/chatclient_temp",t);case 3:return a=e.sent,console.log("RegisterChatAppClient_temp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"RegisterApp",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAxiosClient(),e.next=3,n.post("appmanagement/register/app",t);case 3:return a=e.sent,console.log("RegisterApp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetAppRegistration",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAxiosClient(),e.next=3,n.post("appmanagement/app",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetAppRegistrations",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.createAxiosClient(),e.next=3,t.get("appmanagement/list");case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(n(2008).$);u.instance=void 0},136:function(e,t,n){n.d(t,{W:function(){return d}});var r=n(4165),a=n(5861),s=n(5671),i=n(3144),c=n(1752),o=n(1120),u=n(9340),l=n(1129),d=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;if((0,s.Z)(this,n),!e)throw"Shared Secret is required";return(r=t.call(this,e)).root="/circles/connections/circles",r}return(0,i.Z)(n,[{key:"add",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.root+"/add",e.abrupt("return",a.post(s,t).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.root+"/revoke",e.abrupt("return",a.post(s,t).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMembers",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.root+"/list",e.abrupt("return",a.post(s,{circleId:t}).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(n(2008).$);d.instance=void 0},3766:function(e,t,n){n.d(t,{k:function(){return f}});var r=n(4165),a=n(1413),s=n(5861),i=n(5671),c=n(3144),o=n(1752),u=n(1120),l=n(9340),d=n(1129),f=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;if((0,i.Z)(this,n),!e)throw"Shared Secret is required";return(r=t.call(this,e)).root="/circles/definitions",r}return(0,c.Z)(n,[{key:"updateDefinition",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var s,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),i=this.root+"/update",(c=(0,a.Z)({},t)).drivesGrants=c.drivesGrants||c.drives,c.drives=void 0,console.log("actual update data:",c),e.abrupt("return",s.post(i,c).then((function(e){return e.data})).catch((0,o.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDefinition",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.root+"/create",e.abrupt("return",a.post(s,t).then((function(e){return e.data})).catch((0,o.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCircles",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.root+"/list",e.abrupt("return",t.get(s).then((function(e){return e.data.map((function(e){var t;return e.drivesGrants=null===(t=e.drivesGrants)||void 0===t?void 0:t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{permission:"Read"===e.permission?2:"Write"===e.permission?4:"ReadWrite"===e.permission?5:e.permission})})),e}))})).catch((0,o.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCircle",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),i=this.root+"/circle",e.abrupt("return",s.post(i,t).then((function(e){return e.data})).then((function(e){var t;return e.drivesGrants=null===(t=e.drivesGrants)||void 0===t?void 0:t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{permission:"Read"===e.permission?2:"Write"===e.permission?4:"ReadWrite"===e.permission?5:e.permission})})),e})).catch((0,o.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(n(2008).$);f.instance=void 0},2562:function(e,t,n){n.d(t,{A:function(){return a},W:function(){return s}});var r=n(4990),a=[{name:(0,r.t)("None"),value:0},{name:(0,r.t)("Reader"),value:1},{name:(0,r.t)("Editor"),value:3}],s=[{name:(0,r.t)("None"),value:0},{name:(0,r.t)("Read Connections"),value:10},{name:(0,r.t)("Read Connection Requests"),value:30},{name:(0,r.t)("Read Circle Members"),value:50}]},1025:function(e,t,n){n.r(t),t.default={}},4942:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(4942);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=163.69417086.chunk.js.map