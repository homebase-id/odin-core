"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[731],{8532:function(e,t,n){var r=n(2982),o=n(4165),a=n(5861),i=n(885),s=n(2791),c=n(4164),u=n(4990),d=n(4395),l=n(7903),p=n(3412),f=n(9072),h=n(4940),v=n(6234),Z=n(8808),m=n(6123),x=n(184);t.Z=function(e){var t=e.title,n=e.confirmText,y=e.senderDotYouId,g=e.isOpen,w=e.onConfirm,b=e.onCancel,I=(0,p.Z)("modal-container"),k=(0,l.Z)({}).acceptRequest,R=k.mutateAsync,C=k.status,j=(0,d.Z)().fetch.data,S=(0,s.useState)(),P=(0,i.Z)(S,2),q=P[0],D=P[1],N=(0,s.useState)(null),A=(0,i.Z)(N,2),Y=A[0],Q=A[1],E=(0,s.useState)([]),F=(0,i.Z)(E,2),O=F[0],L=F[1];if(!g)return null;var M=(0,x.jsx)(m.Z,{title:t,onClose:b,children:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("form",{onSubmit:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R({senderDotYouId:y,name:q,photoFileId:Y,circleIds:O});case 3:w();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,x.jsx)("div",{className:"mt-2",children:"".concat(y," ").concat((0,u.t)("has sent you a connection request"))}),(0,x.jsxs)("h2",{className:"my-4 text-lg",children:[(0,u.t)("Provide your contact info:"),":"]}),(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)("label",{htmlFor:"dotyouid",children:"From:"}),(0,x.jsx)(h.Z,{id:"name",name:"name",required:!0,onChange:function(e){var t=e.target.value.split("+");D({givenName:t[0],surname:t[1]})}})]}),(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)("label",{htmlFor:"dotyouid",children:"From:"}),(0,x.jsx)(v.Z,{id:"name",name:"name",onChange:function(e){console.log(e.target.value||void 0),Q(e.target.value||void 0)}})]}),j.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h2",{className:"my-4 text-lg",children:[(0,u.t)("Add as member to one or more circles"),":"]}),j.map((function(e,t){var n;return(0,x.jsx)(Z.Z,{circleDef:e,className:"my-4 w-full rounded-lg border p-4 ".concat(O.some((function(t){return t===e.id}))?"border-indigo-500 bg-slate-50 dark:border-indigo-700 dark:bg-slate-700":""),onClick:function(){var t=(0,r.Z)(O);t.some((function(t){return t===e.id}))?L(t.filter((function(t){return t!==e.id}))):(t.push(e.id),L(t))}},null!==(n=e.id)&&void 0!==n?n:t)}))]}):null,(0,x.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,x.jsx)(f.Z,{className:"m-2",icon:"send",state:C,children:null!==n&&void 0!==n?n:(0,u.t)("Accept")}),(0,x.jsx)(f.Z,{className:"m-2",type:"secondary",onClick:b,children:(0,u.t)("Cancel")})]})]})})});return(0,c.createPortal)(M,I)}},4940:function(e,t,n){var r=n(1413),o=n(1803),a=n(4990),i=n(470),s=n(3225),c=n(184);t.Z=function(e){var t=(0,i.Z)({profileId:o.P.StandardProfileId.toString(),type:o.H1.Name.type}).fetchVersions,n=t.data,u=t.isLoading;return(0,c.jsxs)(s.Z,(0,r.Z)((0,r.Z)({},e),{},{children:[(0,c.jsxs)("option",{children:["-- ",(0,a.t)("Choose a name")," --"]}),u&&(0,c.jsx)("option",{children:"Loading..."}),null===n||void 0===n?void 0:n.filter((function(e){return void 0!==e.data})).map((function(e){var t="".concat(e.data[o.mA.GivenNameId],"+").concat(e.data[o.mA.SurnameId]);return(0,c.jsxs)("option",{value:t,children:["".concat(e.data[o.mA.GivenNameId]," ").concat(e.data[o.mA.SurnameId])," ","(",window.location.hostname,")"]},t)}))]}))}},6234:function(e,t,n){var r=n(1413),o=n(1803),a=n(4990),i=n(470),s=n(3225),c=n(184);t.Z=function(e){var t=(0,i.Z)({profileId:o.P.StandardProfileId.toString(),type:o.H1.Photo.type}).fetchVersions,n=t.data,u=t.isLoading;return(0,c.jsxs)(s.Z,(0,r.Z)((0,r.Z)({},e),{},{children:[(0,c.jsxs)("option",{value:"",children:["-- ",(0,a.t)("Choose a photo")," --"]}),u&&(0,c.jsx)("option",{children:"Loading..."}),null===n||void 0===n?void 0:n.filter((function(e){return void 0!==e.data})).map((function(e){return(0,c.jsx)("option",{value:e.data[o.mA.ProfileImageUrlId],children:e.id},e.id)}))]}))}},3225:function(e,t,n){var r=n(1413),o=n(184);t.Z=function(e){return(0,o.jsx)("select",(0,r.Z)((0,r.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className),children:e.children}))}},8808:function(e,t,n){var r=n(3504),o=n(4990),a=n(7480),i=n(4665),s=n(715),c=n(184);t.Z=function(e){var t=e.circleDef,n=e.permissionLevel,u=e.className,d=e.onClick,l=(0,a.Z)({circleId:null===t||void 0===t?void 0:t.id}).fetchMembers.data;if(!t)return(0,c.jsx)(c.Fragment,{});var p=function(e){var n=e.children;return d?(0,c.jsx)(c.Fragment,{children:n}):(0,c.jsx)(r.rU,{to:"/owner/circles/".concat(encodeURIComponent(t.id)),className:"contents hover:text-slate-700 hover:underline dark:hover:text-slate-400",children:n})};return(0,c.jsx)("div",{className:"flex flex-row ".concat(null!==u&&void 0!==u?u:""," ").concat(t.disabled&&"opacity-50"," ").concat(d&&"cursor-pointer"),onClick:function(){return d&&d()},children:(0,c.jsxs)(p,{children:[(0,c.jsx)(s.Z,{className:"mt-1 mb-auto mr-3 h-6 w-6"}),(0,c.jsxs)("div",{className:"mr-2 flex flex-col",children:[(0,c.jsxs)("p",{className:"my-auto leading-none",children:[t.disabled&&(0,o.t)("Disabled:")," ",null===t||void 0===t?void 0:t.name,n&&": ".concat(n)]}),(0,c.jsxs)("small",{className:"block",children:[l?"".concat(l.length," ").concat(1===l.length?(0,o.t)("member"):(0,o.t)("members")," ").concat((0,o.t)("receives")," "):null,null!==t&&void 0!==t&&t.driveGrants?"".concat((0,o.t)("access on")," ").concat(t.driveGrants.length," ").concat(t.driveGrants.length>=2?(0,o.t)("drives"):(0,o.t)("drive")):null]})]}),d?(0,c.jsx)(r.rU,{to:"/owner/circles/".concat(encodeURIComponent(t.id)),className:"my-auto ml-auto py-2 px-4 hover:text-slate-700 hover:underline dark:hover:text-slate-400",children:(0,c.jsx)(i.Z,{className:"h-5 w-5"})}):(0,c.jsx)(i.Z,{className:"my-auto ml-auto h-5 w-5"})]})})}},8491:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.title,n=e.className,o=e.children,a=e.isOpaqueBg,i=void 0!==a&&a,s=e.isBorderLess,c=void 0!==s&&s;return(0,r.jsxs)("section",{className:"my-5 rounded-md ".concat(i?c?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==n&&void 0!==n?n:""),children:[t?(0,r.jsx)("div",{className:"relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:(0,r.jsx)("h3",{className:"text-2xl dark:text-white",children:t})}):null,(0,r.jsx)("div",{className:"py-5 ",children:o})]})}},3990:function(e,t,n){n.d(t,{P:function(){return o},V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()},o=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}},4395:function(e,t,n){var r=n(4165),o=n(5861),a=n(7408),i=n(3766),s=n(6117);t.Z=function(){var e=(0,s.Z)().getSharedSecret,t=i.k.getInstance(e()),n=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCircles();case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.sort((function(e,t){return(e.disabled?1:0)-(t.disabled?1:0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,a.useQuery)(["circles"],(function(){return n()}),{refetchOnWindowFocus:!1})}}},7903:function(e,t,n){var r=n(2982),o=n(4165),a=n(5861),i=n(7408),s=n(7186),c=n(5144),u=n(6117);t.Z=function(e){var t=e.dotYouId,n=(0,i.useQueryClient)(),d=(0,u.Z)().getSharedSecret,l=s.I.getInstance(d()),p=c.e.getInstance(d()),f=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dotYouId){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.getConnectionInfo(n);case 5:if(!(r=e.sent)||"none"===r.status.toLowerCase()){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,p.getPendingRequest(n);case 10:if(!(a=e.sent)){e.next=13;break}return e.abrupt("return",a);case 13:return e.next=15,p.getSentRequest(n);case 15:return i=e.sent,e.abrupt("return",null!==i&&void 0!==i?i:r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.connectionDotYouId,e.next=3,l.disconnectFromContact(null!==r&&void 0!==r?r:t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.targetDotYouId,r=t.message,a=t.name,i=t.photoFileId,s=t.circleIds,e.next=3,p.sendRequest(n,r,a,i,s);case 3:return e.abrupt("return",{targetDotYouId:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.targetDotYouId,e.next=3,p.deleteSentRequest(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.senderDotYouId,r=t.name,a=t.photoFileId,i=t.circleIds,e.next=3,p.acceptConnectionRequest(n,r,a,i);case 3:return e.abrupt("return",{senderDotYouId:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.senderDotYouId,e.next=3,p.deletePendingRequest(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["connectionInfo",t],(function(){return f({dotYouId:t})}),{refetchOnWindowFocus:!1}),disconnect:(0,i.useMutation)(h,{onSuccess:function(e,t){n.invalidateQueries(["activeConnections"]),n.invalidateQueries(["connectionInfo",t])},onError:function(e){console.error(e)}}),sendConnectionRequest:(0,i.useMutation)(v,{onMutate:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries(["sentRequests"]);case 2:return a=n.getQueryData(["sentRequests"]),i=[{status:"sent",recipient:t.targetDotYouId}].concat((0,r.Z)(a)),n.setQueryData(["sentRequests"],i),e.abrupt("return",{previousRequests:a,newRequest:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){console.error(e),n.setQueryData(["sentRequests"],r.previousRequests)},onSettled:function(e){n.invalidateQueries(["sentRequests"]),n.invalidateQueries(["connectionInfo",e.targetDotYouId])}}),revokeConnectionRequest:(0,i.useMutation)(Z,{onSuccess:function(e,t){n.invalidateQueries(["sentRequests"]),n.invalidateQueries(["connectionInfo",t.targetDotYouId])},onError:function(e){console.error(e)}}),acceptRequest:(0,i.useMutation)(m,{onMutate:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries(["activeConnections"]);case 2:return a=n.getQueryData(["activeConnections"]),i=[{status:"pending",dotYouId:t.senderDotYouId}].concat((0,r.Z)(a)),n.setQueryData(["activeConnections"],i),e.abrupt("return",{previousConnections:a,newRequest:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){console.error(e),n.setQueryData(["activeConnections"],r.previousConnections)},onSettled:function(e){n.invalidateQueries(["pendingConnections"]),n.invalidateQueries(["activeConnections"]),n.invalidateQueries(["connectionInfo",e.senderDotYouId])}}),ignoreRequest:(0,i.useMutation)(x,{onSuccess:function(e,t){n.invalidateQueries(["pendingConnections"]),n.invalidateQueries(["connectionInfo",t.senderDotYouId])},onError:function(e){console.error(e)}})}}},470:function(e,t,n){var r=n(4165),o=n(5861),a=n(7408),i=n(1803),s=n(6117);t.Z=function(e){var t=e.profileId,n=e.type,c=(0,s.Z)().getSharedSecret,u=new i.KU({api:i.Ii.Owner,sharedSecret:c()}),d=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profileId,o=t.type,e.next=3,u.profileDataProvider.getAttributeVersions(n,void 0,o);case 3:return e.abrupt("return",e.sent.versions);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetchVersions:(0,a.useQuery)(["attributeVersions",t,n],(function(){return d({profileId:t,type:n})}),{refetchOnWindowFocus:!1})}}},7186:function(e,t,n){n.d(t,{I:function(){return h}});var r=n(1413),o=n(4165),a=n(5861),i=n(5671),s=n(3144),c=n(1752),u=n(1120),d=n(9340),l=n(1129),p=n(2008),f=n(3990),h=function(e){(0,d.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;if((0,i.Z)(this,n),!e)throw"Shared Secret is required";return(r=t.call(this,e)).root="/circles/connections",r}return(0,s.Z)(n,[{key:"blockDotYouId",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/block",i={dotYouId:t},e.abrupt("return",r.post(a,i).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnectFromContact",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/disconnect",i={dotYouId:t},e.abrupt("return",r.post(a,i).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConnections",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/connected?"+(0,f.P)(t),e.abrupt("return",r.post(a,t).then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockedConnections",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/blocked?"+(0,f.P)(t),e.abrupt("return",r.get(a).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConnectionInfo",value:function(e){var t=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),o=this.root+"/status",a={dotYouId:e};return t.post(o,a).then((function(e){var t,n;return(0,r.Z)((0,r.Z)({},e.data),{},{status:null===(t=e.data)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.toLowerCase()})})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this))}}],[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(p.$);h.instance=void 0},5144:function(e,t,n){n.d(t,{e:function(){return v}});var r=n(1413),o=n(4165),a=n(5861),i=n(5671),s=n(3144),c=n(1752),u=n(1120),d=n(9340),l=n(1129),p=n(1803),f=n(2008),h=n(3990),v=function(e){(0,d.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;if((0,i.Z)(this,n),!e)throw"Shared Secret is required";return(r=t.call(this,e)).Root="/circles/requests",r.SentPathRoot=r.Root+"/sent",r.PendingPathRoot=r.Root+"/pending",r}return(0,s.Z)(n,[{key:"getPendingRequests",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,i=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.PendingPathRoot+"/list?"+(0,h.P)(t),e.abrupt("return",r.get(a).then((function(e){return e.data})).catch((function(){(0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",i)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPendingRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),i=this.PendingPathRoot+"/single",s={dotYouId:t},e.abrupt("return",a.post(i,s).then((function(e){return(0,r.Z)((0,r.Z)({},e.data),{},{status:"pending"})})).catch((function(){})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSentRequests",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.SentPathRoot+"/list?"+(0,h.P)(t),e.abrupt("return",r.get(a).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSentRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i,s,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),i=this.SentPathRoot+"/single",s={dotYouId:t},e.abrupt("return",a.post(i,s).then((function(e){return(0,r.Z)((0,r.Z)({},e.data),{},{status:"sent"})})).catch((function(e){if(404===e.response.status)return null;(0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",d).call(d,e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"acceptConnectionRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,a,i,s){var d,l,f,h,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),l=this.PendingPathRoot+"/accept/",f={sender:t,circleIds:s,permissions:null,contactData:(0,r.Z)({},a)},!i){e.next=9;break}return h=new p.AO({api:p.Ii.Owner,sharedSecret:this.getSharedSecret()}),e.next=7,h.mediaProvider.getDecryptedImageData((0,p.H3)(p.P.StandardProfileId.toString()),i);case 7:(v=e.sent)&&(f.contactData.image=(0,r.Z)((0,r.Z)({},v),{},{content:p.j4.uint8ArrayToBase64(new Uint8Array(v.content))}));case 9:return e.abrupt("return",d.post(l,f).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"deletePendingRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.PendingPathRoot+"/delete",i={dotYouId:t},e.abrupt("return",r.post(a,i).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSentRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.SentPathRoot+"/delete",i={dotYouId:t},e.abrupt("return",r.post(a,i).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,a,i,s,d){var l,f,h,v,Z;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.Root+"/sendrequest",f={recipient:t,message:a,contactData:(0,r.Z)({},i),circleIds:d},!s){e.next=8;break}return h=new p.AO({api:p.Ii.Owner,sharedSecret:this.getSharedSecret()}),e.next=6,h.mediaProvider.getDecryptedImageData((0,p.H3)(p.P.StandardProfileId.toString()),s);case 6:(v=e.sent)&&(f.contactData.image=(0,r.Z)((0,r.Z)({},v),{},{content:p.j4.uint8ArrayToBase64(new Uint8Array(v.content))}));case 8:return Z=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),e.abrupt("return",Z.post(l,f).then((function(e){return e.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return n.instance||(n.instance=new n(e)),n.instance}}]),n}(f.$);v.instance=void 0}}]);
//# sourceMappingURL=731.4f8d0b61.chunk.js.map