"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[462],{9636:function(e,r,n){var t=n(4165),i=n(5861),a=n(1413),o=n(885),s=n(2791),c=n(4164),u=n(4990),l=n(3412),f=n(3431),d=n(9072),p=n(6916),m=n(2465),x=n(6123),h=n(184);r.Z=function(e){var r=e.title,n=e.confirmText,g=e.isOpen,b=e.defaultValue,v=e.onConfirm,Z=e.onCancel,j=(0,l.Z)("modal-container"),y=(0,f.Z)().saveProfile,w=y.mutateAsync,P=y.status,k=(0,s.useState)((0,a.Z)({},b)),O=(0,o.Z)(k,2),N=O[0],D=O[1];if(!g)return null;var C=(0,h.jsx)(x.Z,{title:r,onClose:Z,children:(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("form",{onSubmit:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,w(N);case 3:return v(),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,h.jsxs)("div",{className:"mb-5",children:[(0,h.jsx)("label",{htmlFor:"name",children:(0,u.t)("Name")}),(0,h.jsx)(p.Z,{id:"name",name:"profileName",defaultValue:N.name,onChange:function(e){D((0,a.Z)((0,a.Z)({},N),{},{name:e.target.value}))},required:!0})]}),(0,h.jsxs)("div",{className:"mb-5",children:[(0,h.jsx)("label",{htmlFor:"name",children:(0,u.t)("Description")}),(0,h.jsx)(m.Z,{id:"description",name:"profileDescription",defaultValue:N.description,onChange:function(e){D((0,a.Z)((0,a.Z)({},N),{},{description:e.target.value}))},required:!0})]}),(0,h.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,h.jsx)(d.Z,{className:"m-2",state:P,icon:"send",children:n||(0,u.t)("Add Profile")}),(0,h.jsx)(d.Z,{className:"m-2",type:"secondary",onClick:Z,children:(0,u.t)("Cancel")})]})]})})});return(0,c.createPortal)(C,j)}},6916:function(e,r,n){var t=n(1413),i=n(184);r.Z=function(e){var r;return(0,i.jsx)("input",(0,t.Z)((0,t.Z)({},e),{},{type:null!==(r=e.type)&&void 0!==r?r:"input",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},2465:function(e,r,n){var t=n(1413),i=n(184);r.Z=function(e){return(0,i.jsx)("textarea",(0,t.Z)((0,t.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},7262:function(e,r,n){n.r(r);var t=n(885),i=n(2791),a=n(3504),o=n(4990),s=n(3431),c=n(9072),u=n(9636),l=n(4655),f=n(3004),d=n(1191),p=n(184),m=function(e){var r=e.profileDef;return(0,p.jsx)(a.rU,{to:r.slug,className:"contents",children:(0,p.jsxs)("div",{className:"h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:bg-slate-100 dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-slate-700",children:[(0,p.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:r.name}),(0,p.jsx)("div",{className:"p-4",children:(0,p.jsx)("p",{children:r.description})})]})})};r.default=function(){var e=(0,s.Z)().fetchProfiles,r=e.data,n=e.isLoading,a=(0,i.useState)(!1),x=(0,t.Z)(a,2),h=x[0],g=x[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{children:[(0,p.jsx)(f.Z,{icon:l.Z,title:(0,o.t)("My Profiles"),actions:(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(c.Z,{icon:"plus",onClick:function(){return g(!0)},className:"m-2",children:(0,o.t)("Add Profile")})})}),n?(0,p.jsxs)("div",{className:"-m-2 flex",children:[(0,p.jsx)(d.Z,{className:"m-2 h-10 w-1/4"}),(0,p.jsx)(d.Z,{className:"m-2 h-10 w-1/4"})]}):(0,p.jsx)("div",{className:"-m-2 flex flex-row items-stretch",children:r.map((function(e){return(0,p.jsx)("div",{className:"w-1/4 p-2",children:(0,p.jsx)(m,{profileDef:e})},e.name)}))})]}),(0,p.jsx)(u.Z,{isOpen:h,title:(0,o.t)("New Profile"),onCancel:function(){g(!1)},onConfirm:function(){g(!1)}})]})}},3990:function(e,r,n){n.d(r,{P:function(){return i},V:function(){return t}});var t=function(e){return e.split(" ").join("-").toLowerCase()},i=function(e){return Object.keys(e).map((function(r){return r+"="+e[r]})).join("&")}},3431:function(e,r,n){var t=n(4165),i=n(1413),a=n(5861),o=n(7408),s=n(1803),c=n(3990),u=n(6117);r.Z=function(){var e=(0,o.useQueryClient)(),r=(0,u.Z)().getSharedSecret,n=new s.KU({api:s.Ii.Owner,sharedSecret:r()}),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.getProfileDefinitions();case 2:return e.next=4,e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{slug:(0,c.V)(e.name)})}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.profileDefinitionProvider.saveProfileDefinition(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetchProfiles:(0,o.useQuery)(["profiles"],(function(){return l()}),{refetchOnWindowFocus:!1}),saveProfile:(0,o.useMutation)(f,{onMutate:function(){var r=(0,a.Z)((0,t.Z)().mark((function r(n){var a,o;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.cancelQueries(["profiles"]);case 2:return a=e.getQueryData(["profiles"]),o=a.map((function(e){return e.profileId===n.profileId?(0,i.Z)((0,i.Z)({},n),{},{slug:(0,c.V)(n.name)}):e})),e.setQueryData(["profiles"],o),r.abrupt("return",{previousProfiles:a,newProfile:n});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),onError:function(r,n,t){console.error(r),e.setQueryData(["profiles"],t.previousProfiles)},onSettled:function(){e.invalidateQueries(["profiles"])}})}}},4942:function(e,r,n){function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{Z:function(){return t}})},1413:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(4942);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}}}]);
//# sourceMappingURL=462.2ff751ed.chunk.js.map