"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[95],{5660:function(t,e,n){var r=n(885),o=n(2791),s=n(184);e.Z=function(t){var e=t.className,n=t.state,a=(0,o.useState)(null),i=(0,r.Z)(a,2),c=i[0],u=i[1],l=(0,o.useState)(new Date),p=(0,r.Z)(l,2),h=p[0],d=p[1];if((0,o.useEffect)((function(){"success"===n&&u(new Date)}),[n]),(0,o.useEffect)((function(){var t=setTimeout((function(){d(new Date)}),3e4);return function(){clearTimeout(t)}}),[h]),!c)return null;var f=h.getTime()-c.getTime(),Z=c?f<=6e4?"a few seconds ago":f<=6e5?"a few minutes ago":c.toLocaleString():"";return Z?(0,s.jsxs)("p",{className:"".concat(e," text-sm"),children:["Last saved ",Z]}):null}},3004:function(t,e,n){var r=n(5660),o=n(184);e.Z=function(t){var e=t.title,n=t.actions,s=t.saveStatus;return(0,o.jsx)("section",{className:"-my-8 -mx-10 mb-10 border-b-2 border-gray-100 bg-slate-50 py-8 px-10 dark:border-gray-700 dark:bg-slate-800",children:(0,o.jsxs)("div",{className:"flex flex-row",children:[e&&(0,o.jsx)("h1",{className:"mb-5 text-4xl dark:text-white",children:e}),(0,o.jsxs)("div",{className:"ml-auto ",children:[(0,o.jsx)("div",{className:"flex flex-row",children:n}),s&&(0,o.jsx)(r.Z,{className:"mt-1",state:s})]})]})})}},6095:function(t,e,n){n.r(e),n.d(e,{default:function(){return x}});var r=n(4165),o=n(5861),s=n(6117),a=n(5671),i=n(3144),c=n(1752),u=n(1120),l=n(9340),p=n(1129),h=n(2008),d=function(t){return Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")},f=function(t){(0,l.Z)(n,t);var e=(0,p.Z)(n);function n(t){var r;if((0,a.Z)(this,n),!t)throw"Shared Secret is required";return(r=e.call(this,t)).Root="/circles/requests",r.SentPathRoot=r.Root+"/sent",r.PendingPathRoot=r.Root+"/pending",r}return(0,i.Z)(n,[{key:"getPendingRequests",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/list?"+d(e),t.abrupt("return",o.get(s).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPendingRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a,i=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/single",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((function(t){if(404===t.response.status)return null;(0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",i).call(i,t)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSentRequests",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.SentPathRoot+"/list?"+d(e),t.abrupt("return",o.get(s).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSentRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a,i=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.SentPathRoot+"/single",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((function(t){if(404===t.response.status)return null;(0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",i).call(i,t)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"acceptConnectionRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/accept/",a={sender:e,drives:[],permissions:null},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deletePendingRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/delete",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteSentRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.SentPathRoot+"/delete",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"sendRequest",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e,o){var s,a,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=this.Root+"/sendrequest",a={recipient:e,message:o},i=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),t.abrupt("return",i.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(h.$),Z=function(t){(0,l.Z)(n,t);var e=(0,p.Z)(n);function n(t){var r;if((0,a.Z)(this,n),!t)throw"Shared Secret is required";return(r=e.call(this,t)).Root="/circles/connections",r}return(0,i.Z)(n,[{key:"blockDotYouId",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.Root+"/block",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disconnectFromContact",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.Root+"/disconnect",a={dotYouId:e},t.abrupt("return",o.post(s,a).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConnections",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.Root+"/connected?"+d(e),t.abrupt("return",o.get(s).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getBlockedConnections",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.Root+"/blocked?"+d(e),t.abrupt("return",o.get(s).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConnectionInfo",value:function(t){var e=(0,c.Z)((0,u.Z)(n.prototype),"createAxiosClient",this).call(this),r=this.Root+"/status",o={dotYouId:t};return e.post(r,o).then((function(t){return t.data})).catch((0,c.Z)((0,u.Z)(n.prototype),"handleErrorResponse",this))}}]),n}(h.$),v=n(3004),g=n(184),x=function(){var t=(0,s.Z)().getSharedSecret,e=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n,o,s,a,i,c,u,l,p,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=window.location.hostname.toLowerCase().endsWith(".digital"),s="frodo.digital"==window.location.hostname||"frodobaggins.me"==window.location.hostname,"samwise.digital"==window.location.hostname||"samwisegamgee.me"==window.location.hostname,a="",a=o?s?"samwise.digital":"frodo.digital":s?"samwisegamgee.me":"frodobaggins.me",console.log("intended recipient:",a),i=new f(t()),c=new Z(t()),e.next=10,c.getConnectionInfo(a);case 10:if(u=e.sent,console.log("connection status",null!==(n=null===u||void 0===u?void 0:u.status)&&void 0!==n?n:"None"),null!=u&&"Connected"==u.status){e.next=40;break}return e.next=15,i.getPendingRequest(a);case 15:if(l=e.sent,console.log("has pending request",null!=l),!l){e.next=29;break}return console.log("accepting the pending request"),e.next=21,i.acceptConnectionRequest(a);case 21:return e.next=23,c.getConnectionInfo(a);case 23:if(h=e.sent,console.log("connection status",null!==(p=null===u||void 0===u?void 0:u.status)&&void 0!==p?p:"None"),null!=h){e.next=27;break}throw"Failed to connect to "+a;case 27:e.next=40;break;case 29:return e.next=31,i.getSentRequest(a);case 31:if(null!=e.sent){e.next=39;break}return console.log("sending a new request"),e.next=36,i.sendRequest(a,"Demo data setup");case 36:alert("Connection request was sent to ".concat(a,".  You must go to https://").concat(a," and approve their connection")),e.next=40;break;case 39:alert("There is a pending connection request to ".concat(a," from you.  You must go to https://").concat(a," and approve their connection"));case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)("section",{children:[(0,g.jsx)(v.Z,{title:"Connections"}),(0,g.jsx)("div",{className:"container mx-auto",children:(0,g.jsx)("div",{className:"flex flex-wrap",children:(0,g.jsx)("button",{onClick:e,className:"block w-1/3 rounded border-0 bg-green-500 py-2 px-4 text-white hover:bg-green-600 focus:outline-none",children:"Send connection request"})})})]})}}}]);
//# sourceMappingURL=95.91cc81b8.chunk.js.map