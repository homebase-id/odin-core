"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[618],{7272:function(e,t,n){var s=n(1413),a=n(5713),r=n(4411),o=n(9835),l=n(184);t.Z=function(e){var t,n,i=(0,a.Z)({dotYouId:e.dotYouId}).fetch,c=i.data,d=i.isLoading,u=null===c||void 0===c?void 0:c.name,m=u?"".concat(null!==(t=u.givenName)&&void 0!==t?t:""," ").concat(null!==(n=u.surname)&&void 0!==n?n:""):e.dotYouId;return d?(0,l.jsx)(r.Z,{className:"aspect-[3/5] ".concat(e.className)}):(0,l.jsxs)(o.Z,(0,s.Z)((0,s.Z)({},e),{},{children:[(0,l.jsx)("h2",{className:"font-thiner mb-6 dark:text-white",children:null!==m&&void 0!==m?m:e.dotYouId}),e.children]}))}},9835:function(e,t,n){var s=n(8522),a=n(184);t.Z=function(e){var t=e.dotYouId,n=e.href,r=e.isChecked,o=e.className,l=e.children,i=e.onClick,c=e.onlyLoadAfterClick;return(0,a.jsx)("a",{className:"".concat(o),href:n,children:(0,a.jsxs)("div",{className:"h-full rounded-md border bg-white transition-colors  ".concat(r?"border-4 border-indigo-500 dark:border-indigo-700":!1===r?"border-4":"border-gray-200 border-opacity-60 dark:border-gray-800 dark:bg-gray-800","\n        ").concat(n?"cursor-pointer hover:shadow-md hover:dark:shadow-slate-600":""),onClick:i,children:[(0,a.jsx)(s.Z,{dotYouId:t,onlyLoadAfterClick:c}),(0,a.jsx)("div",{className:"p-2",children:l})]})})}},7585:function(e,t,n){var s=n(4165),a=n(5861),r=n(9439),o=n(2791),l=n(4990),i=n(3072),c=n(6839),d=n(2042),u=n(2851),m=n(4325),x=n(8532),h=n(9835),g=n(184);t.Z=function(e){var t=e.senderDotYouId,n=e.pendingConnection,f=e.children,v=e.className,p=(0,i.Z)({}).ignoreRequest,j=p.mutateAsync,w=p.status,Z=p.error,N=(0,c.Z)().fetchUiSettings.data,y=(0,o.useState)(!1),b=(0,r.Z)(y,2),k=b[0],C=b[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{error:Z}),(0,g.jsxs)(h.Z,{className:v,dotYouId:t,onlyLoadAfterClick:!(null!==N&&void 0!==N&&N.automaticallyLoadProfilePicture),children:[(0,g.jsx)("h2",{className:"font-thiner mb-6 dark:text-white",children:(0,g.jsx)(m.Z,{children:t})}),f,(0,g.jsxs)(u.Z,{type:"primary",className:"mb-2 w-full",onClick:function(e){return e.preventDefault(),C(!0),!1},icon:"check",children:[(0,l.t)("Confirm request"),"..."]}),(0,g.jsx)(u.Z,{type:"secondary",className:"mb-2 w-full",onClick:function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,j({senderDotYouId:t});case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),confirmOptions:{title:(0,l.t)("Ignore request"),body:"".concat((0,l.t)("Are you sure you want to ignore the request from")," ").concat(t),buttonText:(0,l.t)("Ignore")},state:w,icon:"times",children:(0,l.t)("Ignore request")})]},t),(0,g.jsx)(x.Z,{isOpen:k,senderDotYouId:t,confirmText:(0,l.t)("Connect"),onConfirm:(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!1);case 1:case"end":return e.stop()}}),e)}))),onCancel:function(){C(!1)},pendingConnection:n})]})}},2465:function(e,t,n){var s=n(1413),a=n(184);t.Z=function(e){return(0,a.jsx)("textarea",(0,s.Z)((0,s.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},8602:function(e,t,n){var s=n(184);t.Z=function(e){var t=e.className;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:t,children:(0,s.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},8769:function(e,t,n){var s=n(8602),a=n(184);t.Z=function(e){var t=e.totalPages,n=e.setPage,r=e.currentPage,o=e.className;if(!(1===r&&r>=t))return(0,a.jsxs)("div",{className:"flex text-slate-300 dark:text-slate-700 ".concat(null!==o&&void 0!==o?o:""),children:[(0,a.jsx)("div",{className:1!==r?"cursor-pointer text-slate-600 dark:text-slate-200":"pointer-events-none",onClick:function(){return n(r-1)},children:(0,a.jsx)(s.Z,{className:"h-5 w-5 rotate-180"})}),(0,a.jsx)("div",{className:r<t?"cursor-pointer text-slate-600 dark:text-slate-200":"pointer-events-none",onClick:function(){return n(r+1)},children:(0,a.jsx)(s.Z,{className:"h-5 w-5"})})]})}},8867:function(e,t,n){var s=n(4165),a=n(5861),r=n(7408),o=n(7186),l=n(8609);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{active:{pageSize:10,pageNumber:1}},t=e.active,n=t.pageSize,i=t.pageNumber,c=(0,l.ZP)(),d=c.getSharedSecret,u=o.I.getInstance(d()),m=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a,r=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{pageSize:10,pageNumber:1},n=t.pageSize,a=t.pageNumber,e.next=3,u.getConnections({pageNumber:a,pageSize:n});case 3:return e.next=5,e.sent;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetchActive:(0,r.useQuery)(["activeConnections",n,i],(function(){return m({pageSize:n,pageNumber:i})}),{refetchOnWindowFocus:!1,keepPreviousData:!0,onError:function(e){return console.error(e)}})}}},2618:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=n(9439),a=n(9080),r=n(4257),o=n(2851),l=n(7585),i=n(4990),c=n(3072),d=n(2042),u=n(4325),m=n(9835),x=n(184),h=function(e){var t=e.recipientDotYouId,n=e.className,s=(0,c.Z)({}).revokeConnectionRequest,a=s.mutate,r=s.status,l=s.error;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.Z,{error:l}),(0,x.jsxs)(m.Z,{className:n,dotYouId:t,children:[(0,x.jsx)("h2",{className:"font-thiner mb-6 dark:text-white",children:(0,x.jsx)(u.Z,{children:t})}),(0,x.jsx)(o.Z,{type:"secondary",className:"mb-2 w-full",onClick:function(e){return e.preventDefault(),a({targetDotYouId:t}),!1},state:r,icon:"times",children:(0,i.t)("Cancel")})]})]})},g=n(1434),f=n(2791),v=n(4164),p=n(7148),j=n(3412),w=n(2145),Z=n(9631),N=n(3504),y=n(9779),b=n(470),k=n(9747),C=n(365),I=n(4411),S=function(e){var t;return null===e||void 0===e||null===(t=e.filter((function(e){var t;return void 0!==e.data&&0!==(null===(t=Object.keys(e.data))||void 0===t?void 0:t.length)&&e.acl.requiredSecurityGroup===Z.hh.Anonymous})))||void 0===t?void 0:t.sort((function(e,t){return e.priority-t.priority}))},P=function(e){var t,n,s,a,r,o,l,c,d,u,m,h=e.className,g=e.onChange,v=(0,b.Z)({profileId:Z.P.StandardProfileId.toString(),type:Z.H1.Name.type}).fetchVersions,p=v.data,j=v.isLoading,w=v.isFetchedAfterMount,P=S(p),Y=(0,b.Z)({profileId:Z.P.StandardProfileId.toString(),type:Z.H1.Photo.type}).fetchVersions,q=Y.data,F=Y.isLoading,D=Y.isFetchedAfterMount,A=S(q),L=(0,y.Z)(null===A||void 0===A||null===(t=A[0])||void 0===t||null===(n=t.data)||void 0===n?void 0:n[Z.mA.ProfileImageId],(0,Z.H3)(Z.P.StandardProfileId.toString())).fetch.data,z={givenName:null===P||void 0===P||null===(s=P[0])||void 0===s?void 0:s.data[Z.mA.GivenNameId],surname:null===P||void 0===P||null===(a=P[0])||void 0===a?void 0:a.data[Z.mA.SurnameId],imageFileId:null===A||void 0===A||null===(r=A[0])||void 0===r?void 0:r.data[Z.mA.ProfileImageId]};return(0,f.useEffect)((function(){null!==P&&void 0!==P&&P.length&&g(z)}),[w,D]),(0,x.jsxs)("div",{className:"".concat(null!==h&&void 0!==h?h:""),children:[j||z.givenName&&z.surname?null:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(k.Z,{type:"warning",isCompact:!0,className:"mb-4",children:(0,x.jsxs)("p",{children:[(0,i.t)("Without a name, you cannot connect to other people. Please fill in your name on")," ",(0,x.jsx)(N.rU,{to:"/owner/profile/standard-info",className:"underline",children:(0,i.t)("the profile page")})]})})}),(0,x.jsxs)("div",{className:"-mr-3 flex flex-row ",children:[(0,x.jsx)("div",{className:"aspect-square w-1/4 max-w-[3rem]",children:F?(0,x.jsx)(I.Z,{className:"aspect-square"}):L?(0,x.jsx)("img",{src:L,className:"aspect-square object-cover object-top"}):(0,x.jsx)(C.Z,{initials:(null!==(o=null===(l=z.givenName)||void 0===l?void 0:l[0])&&void 0!==o?o:"")+(null!==(c=null===(d=z.surname)||void 0===d?void 0:d[0])&&void 0!==c?c:""),className:"aspect-square h-[3rem] w-[3rem] sm:text-4xl"})}),(0,x.jsx)("div",{className:"my-auto flex-grow px-3",children:j?(0,x.jsx)(I.Z,{className:"h-6 w-full max-w-xs"}):(0,x.jsxs)("h2",{className:"text-lg leading-tight",children:["".concat(null!==(u=z.givenName)&&void 0!==u?u:""," ").concat(null!==(m=z.surname)&&void 0!==m?m:""),(0,x.jsx)("small",{className:"block text-slate-400 dark:text-slate-600",children:window.location.hostname})]})})]})]})},Y=n(8845),q=n(6916),F=n(3147),D=n(2465),A=n(8930),L=(0,i.t)("Hi, I would like to connect with you"),z=function(e){var t=e.title,n=e.isOpen,a=e.onConfirm,r=e.onCancel,l=(0,j.Z)("modal-container"),u=(0,c.Z)({}).sendConnectionRequest,m=u.mutate,h=u.status,g=u.reset,Z=u.error,N=(0,p.Z)(),y=(0,f.useState)(!1),b=(0,s.Z)(y,2),k=b[0],C=b[1],I=(0,f.useState)(),S=(0,s.Z)(I,2),z=S[0],O=S[1],B=(0,f.useState)(L),R=(0,s.Z)(B,2),V=R[0],T=R[1],M=(0,f.useState)(),H=(0,s.Z)(M,2),G=H[0],E=H[1],U=(0,f.useState)(null),W=(0,s.Z)(U,2),_=W[0],Q=W[1],J=(0,f.useState)([]),K=(0,s.Z)(J,2),X=K[0],$=K[1];if(!n)return null;var ee=(0,x.jsx)(A.Z,{title:t,onClose:function(){C(!1),r()},keepOpenOnBlur:!0,size:"2xlarge",children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.Z,{error:Z}),(0,x.jsx)("form",{onSubmit:function(e){e.preventDefault(),k?m({message:V,name:G,photoFileId:_,targetDotYouId:z,circleIds:X},{onSuccess:function(){N(),g(),O(""),T(L),$([]),C(!1),a()}}):e.currentTarget.checkValidity()&&C(!0)},children:k?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mb-4 pb-4",children:[(0,x.jsxs)("h2",{className:"mb-2 text-lg leading-tight",children:[(0,i.t)("Add as member to one or more circles"),":",(0,x.jsxs)("small",{className:"block text-slate-400 dark:text-slate-600",children:[z," ",(0,i.t)("will be added as member to the selected circles")]})]}),(0,x.jsx)(Y.Z,{defaultValue:X,onChange:function(e){return $(e.target.value)}})]}),(0,x.jsxs)("h2",{className:"mb-6 text-lg leading-tight",children:[(0,i.t)("Your contact details"),(0,x.jsxs)("small",{className:"block text-slate-400 dark:text-slate-600",children:[z," ",(0,i.t)("will get access to these contact details")]})]}),(0,x.jsx)(w.Z,{circleGrants:X,className:"mb-4"}),(0,x.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,x.jsx)(o.Z,{className:"m-2",state:h,icon:"send",children:(0,i.t)("Send")}),(0,x.jsx)(o.Z,{className:"m-2",onClick:function(){return C(!1)},type:"secondary",children:(0,i.t)("Back")}),(0,x.jsx)(o.Z,{className:"m-2 sm:mr-auto",type:"secondary",onClick:function(){C(!1),r()},children:(0,i.t)("Cancel")})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)(F.Z,{htmlFor:"dotyouid",children:"Recipient identity"}),(0,x.jsx)(q.Z,{id:"dotyouid",name:"dotyouid",onChange:function(e){O(e.target.value)},defaultValue:z,required:!0})]}),(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsx)(F.Z,{htmlFor:"message",children:(0,i.t)("Message")}),(0,x.jsx)(D.Z,{id:"message",name:"message",defaultValue:V,onChange:function(e){T(e.target.value)},required:!0})]}),(0,x.jsx)(F.Z,{children:(0,i.t)("From")}),(0,x.jsx)(P,{onChange:function(e){E({givenName:e.givenName,surname:e.surname}),Q(e.imageFileId)}}),(0,x.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,x.jsx)(o.Z,{className:"m-2",icon:"send",isDisabled:!G,children:(0,i.t)("Continue")}),(0,x.jsx)(o.Z,{className:"m-2",type:"secondary",onClick:r,children:(0,i.t)("Cancel")})]})]})})]})});return(0,v.createPortal)(ee,l)},O=n(5194),B=n(8769),R=n(7272),V=function(e){var t,n=e.dotYouProfile,s=e.className,a=(0,c.Z)({}).disconnect,r=a.mutate,l=a.status,u=a.error;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.Z,{error:u}),(0,x.jsx)(R.Z,{className:"".concat(null!==s&&void 0!==s?s:""," relative"),dotYouId:n.dotYouId,href:null!==(t=n.dotYouId&&"/owner/connections/".concat(n.dotYouId))&&void 0!==t?t:void 0,children:(0,x.jsx)("div",{className:"absolute top-2 right-2 z-10 aspect-square rounded-full",children:(0,x.jsx)(o.Z,{type:"secondary",className:"rounded-full",onClick:function(e){e.preventDefault(),r({connectionDotYouId:n.dotYouId})},state:l,confirmOptions:{title:"".concat((0,i.t)("Remove")," ").concat(n.dotYouId),buttonText:(0,i.t)("Remove"),body:"".concat((0,i.t)("Are you sure you want to remove")," ").concat(n.dotYouId," ").concat((0,i.t)("from your connections. They will lose all existing access."))},icon:"times",size:"square"})})})]})},T=n(8867),M=function(){var e,t,n,c,d,u,m,v,p,j=(0,f.useState)(1),w=(0,s.Z)(j,2),Z=w[0],N=w[1],y=(0,f.useState)(1),b=(0,s.Z)(y,2),k=b[0],C=b[1],S=(0,f.useState)(1),P=(0,s.Z)(S,2),Y=P[0],q=P[1],F=(0,r.Z)({pending:{pageSize:15,pageNumber:Z},sent:{pageSize:15,pageNumber:Y}}),D=F.fetchPending,A=D.data,L=D.isLoading,R=F.fetchSent,M=R.data,H=R.isLoading,G=(0,T.Z)({active:{pageSize:5,pageNumber:k}}).fetchActive,E=G.data,U=G.isLoading,W=(0,f.useState)(!1),_=(0,s.Z)(W,2),Q=_[0],J=_[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("section",{children:[(0,x.jsx)(a.Z,{icon:O.Z,title:"Contacts",actions:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(o.Z,{onClick:function(){return J(!0)},icon:"plus",className:"m-2",children:(0,i.t)("Send Request")})})}),null!==A&&void 0!==A&&null!==(e=A.results)&&void 0!==e&&e.length||null!==E&&void 0!==E&&null!==(t=E.results)&&void 0!==t&&t.length||null!==M&&void 0!==M&&null!==(n=M.results)&&void 0!==n&&n.length||L||U||H?null:(0,x.jsxs)("div",{className:"flex flex-row",children:[(0,x.jsxs)("p",{className:"my-auto",children:[(0,i.t)("Mmh, this looks empty... Time to add some connections?")," "]}),(0,x.jsx)(o.Z,{onClick:function(e){return e.preventDefault(),J(!0),!1},type:"secondary",className:"ml-2",children:(0,i.t)("Add")})]}),L||null!==A&&void 0!==A&&null!==(c=A.results)&&void 0!==c&&c.length?(0,x.jsx)(g.Z,{isOpaqueBg:!0,isBorderLess:!0,title:(0,i.t)("Connection requests"),actions:(0,x.jsx)(B.Z,{totalPages:null===A||void 0===A?void 0:A.totalPages,setPage:N,currentPage:Z,className:"m-2"}),children:(0,x.jsxs)("div",{className:"-m-1 flex flex-row flex-wrap",children:[L&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"}),(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"})]}),null===A||void 0===A||null===(d=A.results)||void 0===d?void 0:d.map((function(e){return(0,x.jsx)(l.Z,{className:"w-full p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",senderDotYouId:e.senderDotYouId,pendingConnection:e,children:(0,x.jsx)("div",{className:"-mt-3",children:(0,x.jsx)("p",{className:"mb-3 text-sm",children:e.message})})},e.senderDotYouId)}))]})}):null,H||null!==M&&void 0!==M&&null!==(u=M.results)&&void 0!==u&&u.length?(0,x.jsx)(g.Z,{isOpaqueBg:!0,isBorderLess:!0,title:(0,i.t)("Sent Connection Requests"),actions:(0,x.jsx)(B.Z,{totalPages:null===M||void 0===M?void 0:M.totalPages,setPage:q,currentPage:Y,className:"m-2"}),children:(0,x.jsxs)("div",{className:"-m-1 flex flex-row flex-wrap",children:[H&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"}),(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"})]}),null===M||void 0===M||null===(m=M.results)||void 0===m?void 0:m.map((function(e){return(0,x.jsx)(h,{className:"w-1/2 p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",recipientDotYouId:e.recipient},e.recipient)}))]})}):null,null!==E&&void 0!==E&&null!==(v=E.results)&&void 0!==v&&v.length||U?(0,x.jsx)(g.Z,{isOpaqueBg:!0,isBorderLess:!0,title:(0,i.t)("Contacts"),actions:(0,x.jsx)(B.Z,{totalPages:null===E||void 0===E?void 0:E.totalPages,setPage:C,currentPage:k,className:"m-2"}),children:(0,x.jsxs)("div",{className:"-m-1 flex flex-row flex-wrap",children:[U&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"}),(0,x.jsx)(I.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"})]}),null===E||void 0===E||null===(p=E.results)||void 0===p?void 0:p.map((function(e){return(0,x.jsx)(V,{className:"w-1/2 p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",dotYouProfile:e},e.dotYouId)}))]})}):null]}),(0,x.jsx)(z,{title:(0,i.t)("Send connection request"),isOpen:Q,onConfirm:function(){return J(!1)},onCancel:function(){return J(!1)}})]})}}}]);
//# sourceMappingURL=618.64f10561.chunk.js.map