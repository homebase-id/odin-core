"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[237],{9072:function(e,r,t){t.d(r,{Z:function(){return m},s:function(){return f}});var n=t(1413),a=t(4665),s=t(4648),i=t(1088),c=t(184);t(1025);var o=function(e){var r=e.className;return(0,c.jsxs)("div",{className:"loader ".concat(r),children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{})]})},l=t(5207),u=function(e){var r=e.className;return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:r,children:(0,c.jsx)("path",{d:"M433.1 129.1l-83.9-83.9C342.3 38.32 327.1 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 152.9 441.7 137.7 433.1 129.1zM224 416c-35.34 0-64-28.66-64-64s28.66-64 64-64s64 28.66 64 64S259.3 416 224 416zM320 208C320 216.8 312.8 224 304 224h-224C71.16 224 64 216.8 64 208v-96C64 103.2 71.16 96 80 96h224C312.8 96 320 103.2 320 112V208z"})})},d=t(7134),f=function(e,r){return"error"===e||"error"===r?"error":"loading"===e||"loading"===r?"loading":"idle"===e&&"idle"===r?"idle":"success"===e&&"success"===r||"success"===e&&"idle"===r||"idle"===e&&"success"===r?"success":void 0},m=function(e){var r=e.children,t=e.onClick,f=e.className,m=e.icon,v=e.type,h=e.state,p=e.title,x=e.size,g=function(e){return"loading"===h?(0,c.jsx)(o,(0,n.Z)({},e)):"success"===h?(0,c.jsx)(s.Z,(0,n.Z)({},e)):"error"===h?(0,c.jsx)(i.Z,(0,n.Z)({},e)):"save"===m?(0,c.jsx)(u,(0,n.Z)({},e)):"send"===m?(0,c.jsx)(a.Z,(0,n.Z)({},e)):"plus"===m?(0,c.jsx)(l.Z,(0,n.Z)({},e)):"trash"===m?(0,c.jsx)(d.Z,(0,n.Z)({},e)):(0,c.jsx)(c.Fragment,{})},Z="error"===h?"bg-red-500 hover:bg-red-600 text-white":"secondary"===v?"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-800 dark:text-white":"remove"===v?"bg-red-200 hover:bg-red-400 dark:bg-red-700 hover:dark:bg-red-800 dark:text-white":"bg-green-500 hover:bg-green-600 text-white",w="large"===x?"px-5 py-3":"small"===x?"px-3 py-1 text-sm":"px-3 py-2";return(0,c.jsxs)("button",{className:"flex ".concat(r?"min-w-[6rem]":""," flex-row rounded-md ").concat(w," text-left ").concat(Z,"  ").concat("loading"===h?"animate-pulse":""," ").concat(f),disabled:"loading"===h,onClick:t,title:p,children:[(0,c.jsx)("span",{className:"mr-1",children:r}),(0,c.jsx)(g,{className:"my-auto ml-auto h-4 w-4"})]})}},5660:function(e,r,t){var n=t(885),a=t(2791),s=t(184);r.Z=function(e){var r=e.className,t=e.state,i=(0,a.useState)(null),c=(0,n.Z)(i,2),o=c[0],l=c[1],u=(0,a.useState)(new Date),d=(0,n.Z)(u,2),f=d[0],m=d[1];if((0,a.useEffect)((function(){"success"===t&&l(new Date)}),[t]),(0,a.useEffect)((function(){var e=setTimeout((function(){m(new Date)}),3e4);return function(){clearTimeout(e)}}),[f]),!o)return null;var v=f.getTime()-o.getTime(),h=o?v<=6e4?"a few seconds ago":v<=6e5?"a few minutes ago":o.toLocaleString():"";return h?(0,s.jsxs)("p",{className:"".concat(r," text-sm"),children:["Last saved ",h]}):null}},4523:function(e,r,t){t.d(r,{Z:function(){return N}});var n=t(2982),a=t(1413),s=t(885),i=t(2791),c=t(4164),o=t(4990),l=t(4395),u=t(6770),d=t(3412),f=t(2562),m=t(9072),v=t(6916),h=t(1261),p=t(4648),x=t(245),g=t(184),Z=function(e){var r=e.className,t=e.isChecked,n=e.children,a=e.onChange;return(0,g.jsxs)("li",{className:"flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(r),onClick:a,children:[(0,g.jsx)(p.Z,{className:"my-auto mr-3 h-4 w-4 ".concat(t?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,g.jsx)("span",{className:"mr-auto block h-full py-1",children:n})]})},w=function(e){var r,t,a=e.className,c=e.permissionLevels,o=e.onChange,l=e.defaultValue,u=(0,i.useState)(!1),d=(0,s.Z)(u,2),f=d[0],m=d[1],v=(0,i.useState)(l),p=(0,s.Z)(v,2),w=p[0],b=p[1],y=(0,i.useRef)(null);(0,h.Z)(y,(function(){return m(!1)}));var j=(null===l||void 0===l?void 0:l.length)>=2?"Multiple":null!==(r=null!==l&&void 0!==l&&l[0]?null===(t=c.find((function(e){return e.value===l[0]})))||void 0===t?void 0:t.name:c[0].name)&&void 0!==r?r:c[0].name,N=function(e){console.log(e),b(e),o(e)};return(0,g.jsx)("div",{className:null!==a&&void 0!==a?a:"",children:(0,g.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return m(!f)},ref:y,children:[(0,g.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,g.jsx)("span",{className:"my-auto mr-2 select-none",children:j})," ",(0,g.jsx)(x.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,g.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(f?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:c.map((function(e){return(0,g.jsx)(Z,{isChecked:w.some((function(r){return r===e.value}))||0===w.length&&0===e.value,onChange:function(){return w.some((function(r){return r===e.value}))?N(w.filter((function(r){return r!==e.value}))):0!==e.value?N([].concat((0,n.Z)(w),[e.value])):N([])},children:e.name},e.value)}))})]})})},b=t(2284),y=t(2465),j=t(6123),N=function(e){var r,t=e.title,h=e.confirmText,p=e.isOpen,x=e.defaultValue,Z=e.onConfirm,N=e.onCancel,C=(0,d.Z)("modal-container"),k=(0,l.Z)().createOrUpdate,S=k.mutate,D=k.status,I=(0,u.Z)().fetch.data,O=(0,i.useState)((0,a.Z)((0,a.Z)({drives:x.drivesGrants||[]},x),{},{drivesGrants:void 0})),M=(0,s.Z)(O,2),E=M[0],z=M[1];if(!p)return null;var L=(0,g.jsx)(j.Z,{title:t,onClose:N,size:"4xlarge",children:(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),S({circleDefinition:E},{onSuccess:function(){return Z()}}),!1},children:[(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("label",{htmlFor:"name",children:(0,o.t)("Name")}),(0,g.jsx)(v.Z,{id:"name",name:"circleName",defaultValue:E.name,onChange:function(e){z((0,a.Z)((0,a.Z)({},E),{},{name:e.target.value}))},required:!0})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("label",{htmlFor:"name",children:(0,o.t)("Description")}),(0,g.jsx)(y.Z,{id:"description",name:"circleDescription",defaultValue:E.description,onChange:function(e){z((0,a.Z)((0,a.Z)({},E),{},{description:e.target.value}))},required:!0})]}),(0,g.jsxs)("div",{className:"mb-5 flex flex-row",children:[(0,g.jsx)("label",{htmlFor:"name",className:"my-auto mr-2",children:(0,o.t)("Permissions")}),(0,g.jsx)(w,{className:"ml-auto",permissionLevels:f.W,defaultValue:null!==(r=E.permissions.keys)&&void 0!==r?r:[0],onChange:function(e){z((0,a.Z)((0,a.Z)({},E),{},{permissions:{keys:e}}))}})]}),null!==I&&void 0!==I&&I.length?(0,g.jsxs)("div",{className:"my-7",children:[(0,g.jsx)("h2",{className:"mb-4 text-lg",children:"Drive Permissions:"}),I.map((function(e,r){var t,s,i;return(0,g.jsxs)("div",{className:"mb-2 flex flex-row",children:[(0,g.jsx)("label",{htmlFor:"".concat(e.targetDriveInfo.alias,"-").concat(e.targetDriveInfo.type),className:"my-auto mr-2",children:e.name}),(0,g.jsx)(b.Z,{className:"ml-auto",permissionLevels:f.A,defaultValue:null!==(t=null===(s=E.drives)||void 0===s||null===(i=s.find((function(r){return r.drive.alias===e.targetDriveInfo.alias&&r.drive.type===e.targetDriveInfo.type})))||void 0===i?void 0:i.permission)&&void 0!==t?t:0,onChange:function(r){z(r>0?(0,a.Z)((0,a.Z)({},E),{},{drives:[].concat((0,n.Z)(E.drives.filter((function(r){return r.drive.alias!==e.targetDriveInfo.alias||r.drive.type!==e.targetDriveInfo.type}))),[{drive:e.targetDriveInfo,permission:r}])}):(0,a.Z)((0,a.Z)({},E),{},{drives:(0,n.Z)(E.drives.filter((function(r){return r.drive.alias!==e.targetDriveInfo.alias||r.drive.type!==e.targetDriveInfo.type})))}))}})]},r)}))]}):null,(0,g.jsxs)("div",{className:"-mx-2 py-3 sm:flex sm:flex-row-reverse",children:[(0,g.jsx)(m.Z,{className:"mx-2",state:D,icon:"send",children:h||(0,o.t)("Add Circle")}),(0,g.jsx)(m.Z,{className:"mx-2",type:"secondary",onClick:N,children:(0,o.t)("Cancel")})]})]})})});return(0,c.createPortal)(L,C)}},6123:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(184),a=function(e){var r=e.className;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",className:r,children:(0,n.jsx)("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"})})},s=function(e){var r=e.children,t=e.title,s=e.onClose,i=e.size,c=void 0===i?"large":i;return(0,n.jsxs)("div",{className:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,n.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,n.jsx)("div",{className:"relative transform rounded-lg bg-white text-left shadow-xl transition-all dark:bg-black sm:my-8 sm:w-full ".concat("normal"===c?"sm:max-w-lg":"large"===c?"sm:max-w-xl":"sm:max-w-4xl"),children:(0,n.jsxs)("div",{className:"bg-white px-8 py-8 dark:bg-black dark:text-slate-50",children:[t||s?(0,n.jsxs)("div",{className:"-mx-8 -mt-8 mb-8 flex flex-row bg-slate-100 px-8 py-4 dark:bg-slate-700",children:[t?(0,n.jsx)("h3",{className:"my-3 text-2xl font-medium leading-6 text-gray-900 dark:text-slate-50",id:"modal-title",children:t}):null,s?(0,n.jsx)("button",{onClick:s,className:"ml-auto p-2",children:(0,n.jsx)(a,{className:"h-5 w-5"})}):null]}):null,r]})})})})]})}},6916:function(e,r,t){var n=t(1413),a=t(184);r.Z=function(e){var r;return(0,a.jsx)("input",(0,n.Z)((0,n.Z)({},e),{},{type:null!==(r=e.type)&&void 0!==r?r:"input",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},2284:function(e,r,t){var n=t(885),a=t(2791),s=t(1261),i=t(4648),c=t(245),o=t(184),l=function(e){var r=e.className,t=e.isChecked,n=e.children,a=e.onChange;return(0,o.jsxs)("li",{className:"flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(r),onClick:a,children:[(0,o.jsx)(i.Z,{className:"my-auto mr-3 h-4 w-4 ".concat(t?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,o.jsx)("span",{className:"mr-auto block h-full py-1",children:n})]})};r.Z=function(e){var r=e.className,t=e.permissionLevels,i=e.onChange,u=e.defaultValue,d=(0,a.useState)(!1),f=(0,n.Z)(d,2),m=f[0],v=f[1],h=(0,a.useState)(u),p=(0,n.Z)(h,2),x=p[0],g=p[1],Z=(0,a.useRef)(null);(0,s.Z)(Z,(function(){return v(!1)}));var w=t.reduce((function(e,r){return r.value>e.value&&r.value<=u?r:e}),t[0]),b=function(e){g(e),i(e)};return(0,o.jsx)("div",{className:null!==r&&void 0!==r?r:"",children:(0,o.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return v(!m)},ref:Z,children:[(0,o.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,o.jsx)("span",{className:"my-auto mr-2 select-none",children:w.name})," ",(0,o.jsx)(c.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,o.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(m?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:t.map((function(e){return(0,o.jsx)(l,{isChecked:0===e.value?x===e.value:x>=e.value,onChange:function(){return x!==e.value?b(e.value):b(0)},children:e.name},e.value)}))})]})})}},2465:function(e,r,t){var n=t(1413),a=t(184);r.Z=function(e){return(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},4648:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.className;return(0,n.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",className:r,viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,n.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]})}},1088:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.className;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:r,children:(0,n.jsx)("path",{d:"M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"})})}},5207:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.className;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"currentColor",viewBox:"0 0 448 512",children:(0,n.jsx)("path",{d:"M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"})})}},7134:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.className;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:r,children:(0,n.jsx)("path",{d:"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM31.1 128H416V448C416 483.3 387.3 512 352 512H95.1C60.65 512 31.1 483.3 31.1 448V128zM111.1 208V432C111.1 440.8 119.2 448 127.1 448C136.8 448 143.1 440.8 143.1 432V208C143.1 199.2 136.8 192 127.1 192C119.2 192 111.1 199.2 111.1 208zM207.1 208V432C207.1 440.8 215.2 448 223.1 448C232.8 448 240 440.8 240 432V208C240 199.2 232.8 192 223.1 192C215.2 192 207.1 199.2 207.1 208zM304 208V432C304 440.8 311.2 448 320 448C328.8 448 336 440.8 336 432V208C336 199.2 328.8 192 320 192C311.2 192 304 199.2 304 208z"})})}},245:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.className;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:r,children:(0,n.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},3004:function(e,r,t){var n=t(3504),a=t(5660),s=t(184);r.Z=function(e){var r=e.title,t=e.actions,i=e.saveStatus,c=e.breadCrumbs,o=e.icon;return(0,s.jsx)("section",{className:"-my-8 -mx-10 mb-10 border-b-2 border-gray-100 bg-slate-50 py-8 px-10 dark:border-gray-700 dark:bg-slate-800",children:(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("div",{className:"flex-col",children:[c&&(0,s.jsx)("ul",{className:"mb-2 hidden flex-row sm:flex",children:c.map((function(e,r){return(0,s.jsx)("li",{className:"mr-2",children:e.href?(0,s.jsxs)(n.rU,{to:e.href,className:"",children:[e.title,(0,s.jsx)("span",{className:"ml-2",children:">"})]}):(0,s.jsx)("span",{className:"text-slate-500",children:e.title})},r)}))}),r&&(0,s.jsxs)("h1",{className:"mb-5 flex flex-row text-4xl dark:text-white",children:[o&&o({className:"h-8 w-8 my-auto mr-4"})," ",r]})]}),(0,s.jsxs)("div",{className:"ml-auto ",children:[(0,s.jsx)("div",{className:"flex flex-row",children:t}),i&&(0,s.jsx)(a.Z,{className:"mt-1",state:i})]})]})})}},6237:function(e,r,t){t.r(r);var n=t(885),a=t(1803),s=t(2791),i=t(3504),c=t(4990),o=t(4395),l=t(715),u=t(9072),d=t(4523),f=t(3004),m=t(184),v=function(e){var r=e.circleDefinintion,t=e.className;return(0,m.jsx)("div",{className:"".concat(t),children:(0,m.jsx)(i.rU,{to:"/owner/circles/".concat(encodeURIComponent(r.id)),className:"contents",children:(0,m.jsxs)("div",{className:"h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:bg-slate-100 dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-slate-700",children:[(0,m.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:r.name}),(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)("p",{children:r.description}),(0,m.jsxs)("p",{className:"text-xs",children:["Created on: ",new Date(r.created).toLocaleDateString()]})]})]})})})};r.default=function(){var e=(0,o.Z)().fetch,r=e.data,t=e.isLoading,i=(0,s.useState)(!1),h=(0,n.Z)(i,2),p=h[0],x=h[1];return t&&m.Fragment,(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{icon:l.Z,title:(0,c.t)("My Circles"),actions:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(u.Z,{icon:"plus",onClick:function(){return x(!0)},children:(0,c.t)("Add Circle")})})}),(0,m.jsx)("section",{className:"-my-4",children:r&&!t?r.map((function(e){return(0,m.jsx)(v,{circleDefinintion:e,className:"py-4"},e.id)})):null}),(0,m.jsx)(d.Z,{title:(0,c.t)("Create new Circle"),isOpen:p,defaultValue:{name:"",description:"",drives:[{drive:(0,a.H3)(a.P.StandardProfileId),permission:15}],permissions:{keys:[15]}},onConfirm:function(){x(!1)},onCancel:function(){x(!1)}})]})}},4395:function(e,r,t){var n=t(4165),a=t(5861),s=t(7408),i=t(136),c=t(3766),o=t(6117);r.Z=function(){var e=(0,s.useQueryClient)(),r=(0,o.Z)().getSharedSecret,t=c.k.getInstance(r()),l=i.W.getInstance(r()),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCircles();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=r.circleDefinition).id){e.next=7;break}return e.next=4,t.updateDefinition(a);case 4:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,t.createDefinition(a);case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,a=r.dotYouId,e.next=3,l.add({circleId:t,dotYouId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.circleId,a=r.dotYouId,e.next=3,l.remove({circleId:t,dotYouId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["circles"],(function(){return u()}),{refetchOnMount:!1,refetchOnWindowFocus:!1}),createOrUpdate:(0,s.useMutation)(d,{onSuccess:function(r,t){e.invalidateQueries(["circles"])},onError:function(e){console.error(e)}}),provideGrant:(0,s.useMutation)(f,{onSuccess:function(){var r=(0,a.Z)((0,n.Z)().mark((function r(t,a){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.invalidateQueries(["circles"]),e.invalidateQueries(["connectionInfo",a.dotYouId]);case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),onError:function(e){console.error(e)}}),revokeGrant:(0,s.useMutation)(m,{onSuccess:function(){var r=(0,a.Z)((0,n.Z)().mark((function r(t,a){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.invalidateQueries(["circles"]),e.invalidateQueries(["connectionInfo",a.dotYouId]);case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),onError:function(e){console.error(e)}})}}},1261:function(e,r,t){var n=t(2791);r.Z=function(e,r){(0,n.useEffect)((function(){function t(t){e.current&&!e.current.contains(t.target)&&r()}return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[e])}},6770:function(e,r,t){var n=t(4165),a=t(5861),s=t(7408),i=t(1803),c=t(6117);r.Z=function(){var e=(0,c.Z)().getSharedSecret,r=new i.AO({api:i.Ii.Owner,sharedSecret:e()}),t=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.driveProvider.GetDrives({pageNumber:1,pageSize:100});case 2:return e.next=4,e.sent.results;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["drives"],(function(){return t()}),{refetchOnMount:!1,refetchOnWindowFocus:!1})}}},3412:function(e,r,t){var n=t(2791);r.Z=function(e){var r=(0,n.useRef)(null);return(0,n.useEffect)((function(){var t,n=document.querySelector("#".concat(e)),a=n||function(e){var r=document.createElement("div");return r.setAttribute("id",e),r}(e);return n||(t=a,document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)),a.appendChild(r.current),function(){r.current.remove(),a.childElementCount||a.remove()}}),[e]),r.current||(r.current=document.createElement("div")),r.current}},136:function(e,r,t){t.d(r,{W:function(){return d}});var n=t(4165),a=t(5861),s=t(5671),i=t(3144),c=t(1752),o=t(1120),l=t(9340),u=t(1129),d=function(e){(0,l.Z)(t,e);var r=(0,u.Z)(t);function t(e){var n;if((0,s.Z)(this,t),!e)throw"Shared Secret is required";return(n=r.call(this,e)).root="/circles/connections/circles",n}return(0,i.Z)(t,[{key:"add",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),s=this.root+"/add",e.abrupt("return",a.post(s,r).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),s=this.root+"/revoke",e.abrupt("return",a.post(s,r).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"fetchMembers",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.Z)((0,o.Z)(t.prototype),"createAxiosClient",this).call(this),s=this.root+"/list",e.abrupt("return",a.post(s,{circleId:r}).then((function(e){return e.data})).catch((0,c.Z)((0,o.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return t.instance||(t.instance=new t(e)),t.instance}}]),t}(t(2008).$);d.instance=void 0},3766:function(e,r,t){t.d(r,{k:function(){return f}});var n=t(4165),a=t(1413),s=t(5861),i=t(5671),c=t(3144),o=t(1752),l=t(1120),u=t(9340),d=t(1129),f=function(e){(0,u.Z)(t,e);var r=(0,d.Z)(t);function t(e){var n;if((0,i.Z)(this,t),!e)throw"Shared Secret is required";return(n=r.call(this,e)).root="/circles/definitions",n}return(0,c.Z)(t,[{key:"updateDefinition",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var s,i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.Z)((0,l.Z)(t.prototype),"createAxiosClient",this).call(this),i=this.root+"/update",(c=(0,a.Z)({},r)).drivesGrants=c.drivesGrants||c.drives,c.drives=void 0,console.log("actual update data:",c),e.abrupt("return",s.post(i,c).then((function(e){return e.data})).catch((0,o.Z)((0,l.Z)(t.prototype),"handleErrorResponse",this)));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"createDefinition",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.Z)((0,l.Z)(t.prototype),"createAxiosClient",this).call(this),s=this.root+"/create",e.abrupt("return",a.post(s,r).then((function(e){return e.data})).catch((0,o.Z)((0,l.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"getCircles",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,o.Z)((0,l.Z)(t.prototype),"createAxiosClient",this).call(this),s=this.root+"/list",e.abrupt("return",r.get(s).then((function(e){return e.data.map((function(e){var r;return e.drivesGrants=null===(r=e.drivesGrants)||void 0===r?void 0:r.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{permission:"Read"===e.permission?2:"Write"===e.permission?4:"ReadWrite"===e.permission?5:e.permission})})),e}))})).catch((0,o.Z)((0,l.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCircle",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.Z)((0,l.Z)(t.prototype),"createAxiosClient",this).call(this),i=this.root+"/circle",e.abrupt("return",s.post(i,r).then((function(e){return e.data})).then((function(e){var r;return e.drivesGrants=null===(r=e.drivesGrants)||void 0===r?void 0:r.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{permission:"Read"===e.permission?2:"Write"===e.permission?4:"ReadWrite"===e.permission?5:e.permission})})),e})).catch((0,o.Z)((0,l.Z)(t.prototype),"handleErrorResponse",this)));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return t.instance||(t.instance=new t(e)),t.instance}}]),t}(t(2008).$);f.instance=void 0},2562:function(e,r,t){t.d(r,{A:function(){return a},W:function(){return s}});var n=t(4990),a=[{name:(0,n.t)("None"),value:0},{name:(0,n.t)("Reader"),value:1},{name:(0,n.t)("Editor"),value:3}],s=[{name:(0,n.t)("None"),value:0},{name:(0,n.t)("Read Connections"),value:10},{name:(0,n.t)("Read Connection Requests"),value:30},{name:(0,n.t)("Read Circle Members"),value:50}]},1025:function(e,r,t){t.r(r),r.default={}},4942:function(e,r,t){function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{Z:function(){return n}})},1413:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(4942);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}}}]);
//# sourceMappingURL=237.debe6ee9.chunk.js.map