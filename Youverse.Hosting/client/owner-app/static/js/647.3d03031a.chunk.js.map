{"version":3,"file":"static/js/647.3d03031a.chunk.js","mappings":"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","sources":["hooks/profiles/useAttributes.ts","components/TabMenu/TabMenu.tsx","components/Attribute/AttributeCreator/AttributeCreator.tsx","components/Templates/Profile/Profile.tsx","helpers/common.ts","hooks/profiles/useProfiles.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport {\n  ApiType,\n  AttributeDefinition,\n  AttributeDefinitions,\n  AttributeFile,\n  Client,\n} from '@youfoundation/transit-lib';\nimport useAuth from '../auth/useAuth';\n\nexport interface AttributeVm extends AttributeFile {\n  typeDefinition: AttributeDefinition;\n}\n\nconst useAttributes = ({ profileId, sectionId }: { profileId: string; sectionId: string }) => {\n  const { getSharedSecret } = useAuth();\n  const client = new Client({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n  const fetchData = async (profileId: string, sectionId: string) => {\n    const foundAttributes = await client.profileDataProvider.getProfileAttributes(\n      profileId,\n      sectionId,\n      1,\n      100\n    );\n\n    return foundAttributes.map((attr) => {\n      return {\n        ...attr,\n        typeDefinition: Object.values(AttributeDefinitions).find((def) => {\n          return def.type.toString() === attr.type;\n        }),\n      } as AttributeVm;\n    });\n  };\n\n  return [\n    useQuery(['attributes', profileId, sectionId], () => fetchData(profileId, sectionId), {\n      refetchOnMount: false,\n      refetchOnWindowFocus: false,\n    }),\n  ] as const;\n};\n\nexport default useAttributes;\n","import { FC, ReactNode } from 'react';\n\ninterface TabmenuProps {\n  className?: string;\n  items: { title: ReactNode; key: string; isActive: boolean; className?: string }[];\n  onChange: (key: string) => void;\n}\n\nconst TabMenu: FC<TabmenuProps> = ({ className, items, onChange }) => {\n  return (\n    <div className={`flex ${className}`}>\n      {items.map((item) => {\n        return (\n          // Only NavLink Supports isActive styling https://reactrouter.com/docs/en/v6/components/nav-link\n          <a\n            className={`flex-grow cursor-pointer border-b-2 py-2 px-1 text-lg ${\n              item.isActive\n                ? 'border-indigo-500 text-indigo-500 dark:text-indigo-400'\n                : 'border-gray-300 transition-colors duration-300 hover:border-indigo-400 dark:border-gray-800 hover:dark:border-indigo-600'\n            } ${item.className ?? ''}`}\n            key={item.key}\n            onClick={() => {\n              onChange(item.key);\n            }}\n          >\n            {item.title}\n          </a>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default TabMenu;\n","import {\n  AttributeDefinition,\n  AttributeDefinitions,\n  AttributeFile,\n  SecurityGroupType,\n} from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useAttribute from '../../../hooks/profiles/useAttribute';\nimport { AttributeVm } from '../../../hooks/profiles/useAttributes';\nimport ActionButton from '../../Buttons/ActionButton';\nimport Select from '../../Form/Select';\nimport Section from '../../Sections/Section';\nimport AttributeFields from '../AttributeFields/AttributeFields';\n\nconst AttributeCreator = ({ profileId, sectionId }: { profileId: string; sectionId: string }) => {\n  const [isActive, setIsActive] = useState(false);\n  const [attribute, setAttribute] = useState<AttributeVm>();\n  const [, { mutate: saveAttribute, isLoading, isError, isSuccess }] = useAttribute({});\n\n  const setType = (typeId: string) => {\n    const targetObj = Object.values(AttributeDefinitions).find(\n      (curr) => curr.type.toString() === typeId\n    ) as AttributeDefinition;\n\n    setAttribute({\n      id: '',\n      type: typeId,\n      sectionId: sectionId,\n      priority: -1,\n      data: {},\n      typeDefinition: targetObj,\n      profileId: profileId,\n      acl: { requiredSecurityGroup: SecurityGroupType.Owner },\n    });\n  };\n\n  const changeHandler: React.ChangeEventHandler<HTMLInputElement | HTMLTextAreaElement> = (e) => {\n    if (!attribute) {\n      // attribute selection failed on type selection...\n      return;\n    }\n\n    const newAttr: AttributeVm = { ...attribute };\n    newAttr.data[e.target.name] = e.target.value;\n\n    setAttribute(newAttr);\n  };\n\n  const saveNewData = () => {\n    console.log(attribute);\n    saveAttribute(attribute as AttributeFile, {\n      onSuccess: () => {\n        discard();\n      },\n    });\n  };\n\n  const discard = () => {\n    setIsActive(false);\n    setAttribute(undefined);\n  };\n\n  return (\n    <>\n      {isActive ? (\n        <Section\n          title={`New${attribute ? ':' : ''} ${attribute?.typeDefinition.name ?? ''}`}\n          isOpaqueBg={true}\n        >\n          {attribute === undefined ? (\n            <div className=\"mb-5\">\n              <label htmlFor=\"type\">{t('Attribute Type')}</label>\n              <Select\n                id=\"type\"\n                onChange={(e) => {\n                  setType(e.target.value);\n                }}\n              >\n                <option>{t('Make a selection')}</option>\n                {Object.values(AttributeDefinitions).map((def) => {\n                  return (\n                    <option value={def.type.toString()} key={def.type.toString()}>\n                      {def.name}\n                    </option>\n                  );\n                })}\n              </Select>\n            </div>\n          ) : (\n            <AttributeFields attribute={attribute} onChange={changeHandler} />\n          )}\n          <div className=\"flex flex-row\">\n            <ActionButton type=\"secondary\" className=\"ml-auto\" onClick={discard}>\n              {t('Cancel')}\n            </ActionButton>\n            <ActionButton\n              type=\"primary\"\n              icon=\"plus\"\n              className=\"ml-2\"\n              onClick={saveNewData}\n              state={isLoading ? 'loading' : isSuccess ? 'success' : isError ? 'failed' : undefined}\n            >\n              {t('Add')}\n            </ActionButton>\n          </div>\n        </Section>\n      ) : (\n        <div className=\"flex flex-row\">\n          <ActionButton\n            type=\"primary\"\n            icon=\"plus\"\n            className=\"mx-auto min-w-[9rem]\"\n            onClick={() => setIsActive(true)}\n          >\n            {t('Add Attribute')}\n          </ActionButton>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default AttributeCreator;\n","import { ProfileDefinition, ProfileSection } from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport useAttributes from '../../../hooks/profiles/useAttributes';\nimport useProfiles from '../../../hooks/profiles/useProfiles';\n\nimport TabMenu from '../../TabMenu/TabMenu';\nimport AttributeCreator from '../../Attribute/AttributeCreator/AttributeCreator';\nimport Section from '../../Sections/Section';\nimport Input from '../../Form/Input';\nimport ActionButton from '../../Buttons/ActionButton';\nimport Add from '../../Icons/Plus/Plus';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport PageMeta from '../../Layout/PageMeta/PageMeta';\nimport AttributeGroup from '../../Attribute/AttributeGroup/AttributeGroup';\n\nconst Profile = () => {\n  const { data, isLoading } = useProfiles();\n  const { profileKey } = useParams();\n\n  const profileDef = data?.definitions.find((curr) => {\n    return curr.slug === profileKey;\n  });\n\n  const [activeSectionKey, setActiveSectionKey] = useState<string>(\n    profileDef?.sections ? profileDef.sections[0].sectionId : ''\n  );\n\n  if (isLoading) {\n    return <>Loading</>;\n  }\n  if (!data) {\n    return <>{t('no-data-found')}</>;\n  }\n\n  if (!profileDef) {\n    return <>Incorrect profile path</>;\n  }\n\n  const activeSection =\n    activeSectionKey === 'new'\n      ? undefined\n      : profileDef.sections.find((sect) => {\n          return sect.sectionId === activeSectionKey;\n        }) || profileDef.sections[0];\n\n  return (\n    <>\n      <PageMeta title={profileDef.name} />\n      <TabMenu\n        className=\"mt-5\"\n        items={[\n          ...profileDef.sections.map((sect, index) => {\n            return {\n              title: sect.name,\n              key: sect.sectionId,\n              isActive: activeSectionKey ? activeSectionKey === sect.sectionId : index === 0,\n            };\n          }),\n          {\n            title: <Add className=\"h-5 w-5\" />,\n            key: 'new',\n            isActive: activeSectionKey ? activeSectionKey === 'new' : !profileDef.sections.length,\n            className: 'flex-grow-0',\n          },\n        ]}\n        onChange={(key) => {\n          setActiveSectionKey(key);\n        }}\n      />\n      {activeSectionKey === 'new' ? (\n        <ProfileSectionCreator profileDefinition={profileDef} />\n      ) : (\n        activeSection && (\n          <ProfileSectionEditor\n            section={activeSection}\n            profileId={profileDef.profileId}\n            key={activeSection.sectionId}\n          />\n        )\n      )}\n    </>\n  );\n};\n\nconst ProfileSectionCreator = ({ profileDefinition }: { profileDefinition: ProfileDefinition }) => {\n  const [name, setName] = useState('');\n\n  const createSection: React.FormEventHandler<HTMLFormElement> = (e) => {\n    e.preventDefault();\n\n    const newProfileSection = {\n      sectionId: '',\n      attributes: [],\n      priority: Math.max(...profileDefinition.sections.map((sect) => sect.priority)) + 1,\n      isSystemSection: false,\n      name: name,\n    };\n\n    const newProfileDef: ProfileDefinition = { ...profileDefinition };\n    newProfileDef.sections.push(newProfileSection);\n\n    console.log('Should create: ', newProfileDef);\n\n    return false;\n  };\n\n  return (\n    <Section title=\"New: section\" isOpaqueBg={true}>\n      <form onSubmit={createSection}>\n        <div className=\"mb-5\">\n          <label htmlFor=\"name\">{t('Name')}</label>\n          <Input\n            id=\"name\"\n            name=\"sectionName\"\n            onChange={(e) => {\n              setName(e.target.value);\n            }}\n            required\n          />\n        </div>\n        <div className=\"flex flex-row\">\n          <ActionButton className=\"ml-auto\">{t('add section')}</ActionButton>\n        </div>\n      </form>\n    </Section>\n  );\n};\n\nconst ProfileSectionEditor = ({\n  section,\n  profileId,\n}: {\n  section: ProfileSection;\n  profileId: string;\n}) => {\n  const [{ data: attributes, isLoading }] = useAttributes({\n    profileId: profileId,\n    sectionId: section.sectionId,\n  });\n\n  if (!attributes || isLoading) {\n    return <>Loading</>;\n  }\n\n  // Find unique types\n  const types: string[] = attributes.reduce((prevVal, curVal) => {\n    if (prevVal.indexOf(curVal.type) !== -1) {\n      return prevVal;\n    }\n    return [...prevVal, curVal.type];\n  }, [] as string[]);\n\n  // Find matching attributes for those types\n  const groupedAttributes = types.map((currType) => {\n    const matchingAttributes = attributes.filter((attr) => attr.type === currType);\n\n    return { name: matchingAttributes[0].typeDefinition.name, attributes: matchingAttributes };\n  });\n\n  return (\n    <>\n      {attributes.length ? (\n        groupedAttributes.map((attrGroup) => {\n          return (\n            <AttributeGroup\n              groupTitle={attrGroup.name}\n              attributes={attrGroup.attributes}\n              key={attrGroup.name}\n            />\n          );\n        })\n      ) : (\n        <div className=\"py-5\">{t('section-empty-attributes')}</div>\n      )}\n      <AttributeCreator profileId={profileId} sectionId={section.sectionId} />\n    </>\n  );\n};\n\nexport default Profile;\n","export const convertTextToSlug = (text: string) => {\n  return text.split(' ').join('-').toLowerCase();\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { ApiType, Client, ProfileDefinition } from '@youfoundation/transit-lib';\nimport { convertTextToSlug } from '../../helpers/common';\nimport useAuth from '../auth/useAuth';\n\ninterface ProfileDefinitionVm extends ProfileDefinition {\n  slug: string;\n}\n\nconst useProfiles = () => {\n  const { getSharedSecret } = useAuth();\n  const fetchData = async () => {\n    const client = new Client({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n    const definitions = await (\n      await client.profileDefinitionProvider.getProfileDefinitions()\n    ).map((def) => {\n      return {\n        ...def,\n        slug: convertTextToSlug(def.name),\n      } as ProfileDefinitionVm;\n    });\n\n    return { definitions };\n  };\n\n  return useQuery(['profiles'], () => fetchData(), {\n    refetchOnMount: false,\n    refetchOnWindowFocus: false,\n  });\n};\n\nexport default useProfiles;\n"],"names":["profileId","sectionId","getSharedSecret","useAuth","client","Client","api","ApiType","sharedSecret","fetchData","profileDataProvider","getProfileAttributes","foundAttributes","map","attr","typeDefinition","Object","values","AttributeDefinitions","find","def","type","toString","useQuery","refetchOnMount","refetchOnWindowFocus","className","items","onChange","item","isActive","onClick","key","title","useState","setIsActive","attribute","setAttribute","useAttribute","saveAttribute","mutate","isLoading","isError","isSuccess","discard","undefined","Section","name","isOpaqueBg","htmlFor","t","Select","id","e","typeId","targetObj","curr","priority","data","acl","requiredSecurityGroup","SecurityGroupType","setType","target","value","AttributeFields","newAttr","ActionButton","icon","console","log","onSuccess","state","ProfileSectionCreator","profileDefinition","setName","onSubmit","preventDefault","newProfileSection","attributes","Math","max","sections","sect","isSystemSection","newProfileDef","push","Input","required","ProfileSectionEditor","section","useAttributes","groupedAttributes","reduce","prevVal","curVal","indexOf","currType","matchingAttributes","filter","length","attrGroup","AttributeGroup","groupTitle","useProfiles","profileKey","useParams","profileDef","definitions","slug","activeSectionKey","setActiveSectionKey","activeSection","PageMeta","index","convertTextToSlug","text","split","join","toLowerCase","profileDefinitionProvider","getProfileDefinitions"],"sourceRoot":""}