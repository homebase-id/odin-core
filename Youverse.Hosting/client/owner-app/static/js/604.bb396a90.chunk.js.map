{"version":3,"file":"static/js/604.bb396a90.chunk.js","mappings":"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","sources":["components/Buttons/SaveStatus.tsx","components/Form/Checkbox.tsx","components/Form/PermissionFlagsEditor.tsx","components/Form/PermissionLevelEditor.tsx","components/Icons/Check/Check.tsx","components/Icons/Triangle/Triangle.tsx","components/Layout/PageMeta/PageMeta.tsx","components/Sections/Section.tsx","components/Templates/Settings/Settings.tsx","hooks/clickedOutsideTrigger/useClickedOutsideTrigger.ts","hooks/drives/useDrives.ts","provider/permission/permissionLevels.ts","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst seconds = 60000;\nconst minutes = 600000;\n\nconst SaveStatus = ({\n  className,\n  state,\n}: {\n  className: string;\n  state: 'error' | 'idle' | 'loading' | 'success';\n}) => {\n  const [lastSave, setLastSave] = useState<Date>(null);\n  const [now, setNow] = useState<Date>(new Date());\n\n  useEffect(() => {\n    if (state === 'success') {\n      setLastSave(new Date());\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setNow(new Date());\n    }, 30000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [now]);\n\n  if (!lastSave) {\n    return null;\n  }\n\n  const diff = now.getTime() - lastSave.getTime();\n  const text = lastSave\n    ? diff <= seconds\n      ? 'a few seconds ago'\n      : diff <= minutes\n      ? 'a few minutes ago'\n      : lastSave.toLocaleString()\n    : '';\n\n  return text ? <p className={`${className} text-sm`}>Last saved {text}</p> : null;\n};\n\nexport default SaveStatus;\n","const Checkbox = (\n  props: React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>\n) => {\n  return (\n    <input\n      {...props}\n      type=\"checkbox\"\n      className={`h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600 ${props.className}`}\n    />\n  );\n};\n\nexport default Checkbox;\n","import { ReactNode, useRef, useState } from 'react';\nimport useOutsideTrigger from '../../hooks/clickedOutsideTrigger/useClickedOutsideTrigger';\nimport Check from '../Icons/Check/Check';\nimport Triangle from '../Icons/Triangle/Triangle';\n\nconst PermissionFlagsEditor = ({\n  className,\n  permissionLevels,\n  onChange,\n  defaultValue,\n}: {\n  className: string;\n  permissionLevels: { name: string; value: number }[];\n  onChange?: (value: number[]) => void;\n  defaultValue: number[];\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [value, setInnerValue] = useState(defaultValue);\n  const wrapperRef = useRef(null);\n  useOutsideTrigger(wrapperRef, () => setIsOpen(false));\n\n  const currentValue =\n    defaultValue?.length >= 2\n      ? 'Multiple'\n      : (defaultValue?.[0]\n          ? permissionLevels.find((level) => level.value === defaultValue[0])?.name\n          : permissionLevels[0].name) ?? permissionLevels[0].name;\n\n  const setValue = (value: number[]) => {\n    setInnerValue(value);\n    onChange && onChange(value);\n  };\n\n  return (\n    <div className={className ?? ''}>\n      <div\n        className=\"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800\"\n        onClick={() => setIsOpen(!isOpen)}\n        ref={wrapperRef}\n      >\n        <div className=\"flex min-w-[6rem] flex-row py-1 px-2\">\n          <span className=\"my-auto mr-2 select-none\">{currentValue}</span>{' '}\n          <Triangle className=\"my-auto ml-auto h-2 w-2 rotate-90\" />\n        </div>\n        <ul\n          className={`absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ${\n            isOpen\n              ? 'z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700'\n              : 'max-h-0'\n          }`}\n        >\n          {permissionLevels.map((level) => (\n            <Option\n              key={level.value}\n              isChecked={\n                value.some((val) => val === level.value) ||\n                (value.length === 0 && level.value === 0)\n              }\n              onChange={() =>\n                value.some((val) => val === level.value)\n                  ? setValue(value.filter((val) => val !== level.value))\n                  : level.value !== 0\n                  ? setValue([...value, level.value])\n                  : setValue([])\n              }\n            >\n              {level.name}\n            </Option>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Option = ({\n  className,\n  isChecked,\n  children,\n  onChange,\n}: {\n  className?: string;\n  isChecked: boolean;\n  children: ReactNode;\n  onChange: () => void;\n}) => {\n  return (\n    <li\n      className={`flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ${className}`}\n      onClick={onChange}\n    >\n      <Check\n        className={`my-auto mr-3 h-4 w-4 flex-shrink-0 ${\n          isChecked ? 'text-slate-700 dark:text-slate-200' : 'text-transparent'\n        }`}\n      />{' '}\n      <span className={`mr-auto block h-full py-1`}>{children}</span>\n    </li>\n  );\n};\n\nexport default PermissionFlagsEditor;\n","import { ReactNode, useRef, useState } from 'react';\nimport useOutsideTrigger from '../../hooks/clickedOutsideTrigger/useClickedOutsideTrigger';\nimport Check from '../Icons/Check/Check';\nimport Triangle from '../Icons/Triangle/Triangle';\n\nconst PermissionLevelEditor = ({\n  className,\n  permissionLevels,\n  onChange,\n  defaultValue,\n}: {\n  className: string;\n  permissionLevels: { name: string; value: number }[];\n  onChange?: (value: number) => void;\n  defaultValue: number;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [value, setInnerValue] = useState(defaultValue);\n  const wrapperRef = useRef(null);\n  useOutsideTrigger(wrapperRef, () => setIsOpen(false));\n\n  const currentValue = permissionLevels.reduce((prevValue, currValue) => {\n    if (currValue.value > prevValue.value && currValue.value <= defaultValue) {\n      return currValue;\n    }\n\n    return prevValue;\n  }, permissionLevels[0]);\n\n  const setValue = (value: number) => {\n    setInnerValue(value);\n    onChange(value);\n  };\n\n  return (\n    <div className={className ?? ''}>\n      <div\n        className=\"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800\"\n        onClick={() => setIsOpen(!isOpen)}\n        ref={wrapperRef}\n      >\n        <div className=\"flex min-w-[6rem] flex-row py-1 px-2\">\n          <span className=\"my-auto mr-2 select-none\">{currentValue.name}</span>{' '}\n          <Triangle className=\"my-auto ml-auto h-2 w-2 rotate-90\" />\n        </div>\n        <ul\n          className={`absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ${\n            isOpen\n              ? 'z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700'\n              : 'max-h-0'\n          }`}\n        >\n          {permissionLevels.map((level) => (\n            <Option\n              key={level.value}\n              isChecked={level.value === 0 ? value === level.value : value >= level.value}\n              onChange={() => (value !== level.value ? setValue(level.value) : setValue(0))}\n            >\n              {level.name}\n            </Option>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Option = ({\n  className,\n  isChecked,\n  children,\n  onChange,\n}: {\n  className?: string;\n  isChecked: boolean;\n  children: ReactNode;\n  onChange: () => void;\n}) => {\n  return (\n    <li\n      className={`flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ${className}`}\n      onClick={onChange}\n    >\n      <Check\n        className={`my-auto mr-3 h-4 w-4 flex-shrink-0  ${\n          isChecked ? 'text-slate-700 dark:text-slate-200' : 'text-transparent'\n        }`}\n      />{' '}\n      <span className={`mr-auto block h-full py-1`}>{children}</span>\n    </li>\n  );\n};\n\nexport default PermissionLevelEditor;\n","import { FC } from 'react';\n\nconst Check: FC<IconProps> = ({ className }) => {\n  return (\n    <svg\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"3\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M22 11.08V12a10 10 0 11-5.93-9.14\"></path>\n      <path d=\"M22 4L12 14.01l-3-3\"></path>\n    </svg>\n  );\n};\n\nexport default Check;\n","import { FC } from 'react';\n\nconst Triangle: FC<IconProps> = ({ className }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 384 512\"\n      fill=\"currentColor\"\n      className={className}\n    >\n      <path d=\"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z\" />\n    </svg>\n  );\n};\n\nexport default Triangle;\n","import { FC, ReactNode } from 'react';\nimport { Link } from 'react-router-dom';\nimport SaveStatus from '../../Buttons/SaveStatus';\n\nconst PageMeta = ({\n  title,\n  actions,\n  saveStatus,\n  breadCrumbs,\n  icon,\n}: {\n  title?: ReactNode;\n  actions?: ReactNode;\n  saveStatus?: 'error' | 'idle' | 'loading' | 'success';\n  breadCrumbs?: { title: string; href?: string }[];\n  icon?: FC;\n}) => {\n  return (\n    <section\n      className=\"-mx-5 -mt-4 mb-10 border-b-2 border-gray-100 bg-slate-50 py-4 pr-5 pl-10 dark:border-gray-700 dark:bg-slate-800 sm:-mx-10\n    sm:-mt-8 sm:py-8 sm:px-10\"\n    >\n      <div className=\"flex flex-col sm:flex-row\">\n        <div className=\"flex-col\">\n          {breadCrumbs && (\n            <ul className=\"mb-2 hidden flex-row sm:flex\">\n              {breadCrumbs.map((crumb, index) => {\n                return (\n                  <li key={index} className=\"mr-2\">\n                    {crumb.href ? (\n                      <Link to={crumb.href} className=\"\">\n                        {crumb.title}\n                        <span className=\"ml-2\">{'>'}</span>\n                      </Link>\n                    ) : (\n                      <span className=\"text-slate-500\">{crumb.title}</span>\n                    )}\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n          {title && (\n            <h1 className=\"mb-5 flex flex-row text-4xl dark:text-white\">\n              {icon && icon({ className: 'h-8 w-8 my-auto mr-4' })} {title}\n            </h1>\n          )}\n        </div>\n        <div className=\"ml-auto\">\n          <div className=\"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center\">\n            {actions}\n          </div>\n          {saveStatus && <SaveStatus className=\"mt-1\" state={saveStatus} />}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default PageMeta;\n","import { ReactNode } from 'react';\n\nconst Section = ({\n  title,\n  className,\n  children,\n  isOpaqueBg = false,\n  isBorderLess = false,\n}: {\n  title?: ReactNode;\n  className?: string;\n  children: ReactNode;\n  isOpaqueBg?: boolean;\n  isBorderLess?: boolean;\n}) => {\n  return (\n    <section\n      className={`my-5 rounded-md ${\n        isOpaqueBg\n          ? isBorderLess\n            ? ''\n            : 'rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700'\n          : 'bg-slate-50 px-5 dark:bg-slate-800'\n      } dark:text-slate-300 ${className ?? ''}`}\n    >\n      {title ? (\n        <div\n          className={`relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700`}\n        >\n          <h3 className=\"text-2xl dark:text-white\">{title}</h3>\n        </div>\n      ) : null}\n      <div className=\"py-5 \">{children}</div>\n    </section>\n  );\n};\n\nexport default Section;\n","import { useState } from 'react';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useDrives from '../../../hooks/drives/useDrives';\nimport { CircleDefinition } from '../../../provider/connections/CircleDataTypes';\nimport {\n  circlePermissionLevels,\n  drivePermissionLevels,\n} from '../../../provider/permission/permissionLevels';\nimport Checkbox from '../../Form/Checkbox';\nimport PermissionFlagsEditor from '../../Form/PermissionFlagsEditor';\nimport PermissionLevelEditor from '../../Form/PermissionLevelEditor';\nimport Cloud from '../../Icons/Cloud/Cloud';\nimport Cog from '../../Icons/Cog/Cog';\nimport PageMeta from '../../Layout/PageMeta/PageMeta';\nimport Section from '../../Sections/Section';\n\nconst Settings = () => {\n  return (\n    <>\n      <PageMeta icon={Cog} title={`${t('Settings')}`} />\n      <AllConnectionSettings />\n      <PublicSiteSettings />\n    </>\n  );\n};\n\nconst AllConnectionSettings = () => {\n  const { data: drives } = useDrives().fetch;\n\n  const [newCircleDefinition, setNewCircleDefinition] = useState<CircleDefinition>({\n    name: 'All',\n    description: '',\n    permissions: { keys: [0] },\n    driveGrants: [],\n  });\n\n  return (\n    <Section title={t('General settings for all connections')}>\n      <div className=\"mb-5 flex flex-row\">\n        <label htmlFor=\"name\" className=\"my-auto mr-2\">\n          {t('Connections can:')}\n        </label>\n        <PermissionFlagsEditor\n          className=\"ml-auto\"\n          permissionLevels={circlePermissionLevels}\n          defaultValue={newCircleDefinition.permissions.keys ?? [0]}\n          onChange={(newValue) => {\n            setNewCircleDefinition({\n              ...newCircleDefinition,\n              permissions: { keys: newValue },\n            });\n          }}\n        />\n      </div>\n      {drives?.length ? (\n        <div className=\"my-10\">\n          <h2 className=\"mb-4 text-2xl\">Per Drive Permissions:</h2>\n\n          {drives.map((drive, index) => {\n            return (\n              <div key={index} className=\"mb-2 flex flex-row\">\n                <label\n                  htmlFor={`${drive.targetDriveInfo.alias}-${drive.targetDriveInfo.type}`}\n                  className=\"my-auto mr-2\"\n                >\n                  {drive.name}\n                </label>\n                <PermissionLevelEditor\n                  className=\"ml-auto\"\n                  permissionLevels={drivePermissionLevels}\n                  defaultValue={\n                    newCircleDefinition.driveGrants?.find(\n                      (driveGrant) =>\n                        driveGrant.permissionedDrive.drive.alias === drive.targetDriveInfo.alias &&\n                        driveGrant.permissionedDrive.drive.type === drive.targetDriveInfo.type\n                    )?.permissionedDrive?.permission ?? 0\n                  }\n                  onChange={(value) => {\n                    if (value > 0) {\n                      setNewCircleDefinition({\n                        ...newCircleDefinition,\n                        driveGrants: [\n                          ...newCircleDefinition.driveGrants.filter(\n                            (driveGrant) =>\n                              driveGrant.permissionedDrive.drive.alias !==\n                                drive.targetDriveInfo.alias ||\n                              driveGrant.permissionedDrive.drive.type !== drive.targetDriveInfo.type\n                          ),\n                          {\n                            permissionedDrive: { drive: drive.targetDriveInfo, permission: value },\n                          },\n                        ],\n                      });\n                    } else {\n                      setNewCircleDefinition({\n                        ...newCircleDefinition,\n                        driveGrants: [\n                          ...newCircleDefinition.driveGrants.filter(\n                            (driveGrant) =>\n                              driveGrant.permissionedDrive.drive.alias !==\n                                drive.targetDriveInfo.alias ||\n                              driveGrant.permissionedDrive.drive.type !== drive.targetDriveInfo.type\n                          ),\n                        ],\n                      });\n                    }\n                  }}\n                />\n              </div>\n            );\n          })}\n        </div>\n      ) : null}\n    </Section>\n  );\n};\n\nconst PublicSiteSettings = () => {\n  return (\n    <>\n      <Section\n        title={\n          <>\n            <Cloud className=\"inline-block h-4 w-4\" /> {t('Publish your public data')}\n          </>\n        }\n      >\n        <div className=\"flex-ro flex\">\n          <Checkbox id=\"publishStaticFile\" name=\"publishStaticFile\" className=\"my-auto mr-4\" />\n          <label htmlFor=\"publishStaticFile\" className=\"my-auto\">\n            {t('Auto publish static files')}\n          </label>\n        </div>\n      </Section>\n    </>\n  );\n};\n\nexport default Settings;\n","import { useEffect } from 'react';\n\n/**\n * Hook that alerts clicks outside of the passed ref\n */\nfunction useOutsideTrigger(ref, onClick: () => void) {\n  useEffect(() => {\n    /**\n     * Alert if clicked on outside of element\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClick();\n      }\n    }\n    // Bind the event listener\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [ref]);\n}\n\nexport default useOutsideTrigger;\n","import { useQuery } from '@tanstack/react-query';\nimport { ApiType, CoreClient } from '@youfoundation/transit-lib';\nimport useAuth from '../auth/useAuth';\n\nconst useDrives = () => {\n  const { getSharedSecret } = useAuth();\n  const client = new CoreClient({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const fetchAll = async () => {\n    return await (\n      await client.driveProvider.GetDrives({ pageNumber: 1, pageSize: 100 })\n    ).results;\n  };\n\n  return {\n    fetch: useQuery(['drives'], () => fetchAll(), {\n      refetchOnWindowFocus: false,\n    }),\n  };\n};\n\nexport default useDrives;\n","import { t } from '../../helpers/i18n/dictionary';\n\nexport const drivePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Reader'), value: 1 },\n  { name: t('Editor'), value: 3 },\n];\n\nexport const circlePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Read Connections'), value: 10 },\n  { name: t('Read Circle Members'), value: 50 },\n];\n\nexport const appPermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Read Connections'), value: 10 },\n  { name: t('Manage Connection Requests'), value: 30 },\n  { name: t('Read Circle Members'), value: 50 },\n];\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["className","state","useState","lastSave","setLastSave","Date","now","setNow","useEffect","timer","setTimeout","clearTimeout","diff","getTime","text","toLocaleString","props","type","Option","isChecked","children","onChange","onClick","permissionLevels","defaultValue","isOpen","setIsOpen","value","setInnerValue","wrapperRef","useRef","useOutsideTrigger","currentValue","length","find","level","name","setValue","ref","map","some","val","filter","reduce","prevValue","currValue","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","d","xmlns","title","actions","saveStatus","breadCrumbs","icon","crumb","index","href","to","isOpaqueBg","isBorderLess","AllConnectionSettings","drives","useDrives","fetch","data","description","permissions","keys","driveGrants","newCircleDefinition","setNewCircleDefinition","t","htmlFor","circlePermissionLevels","newValue","drive","targetDriveInfo","alias","drivePermissionLevels","driveGrant","permissionedDrive","permission","PublicSiteSettings","id","Cog","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","getSharedSecret","useAuth","client","CoreClient","api","ApiType","sharedSecret","fetchAll","driveProvider","GetDrives","pageNumber","pageSize","results","useQuery","refetchOnWindowFocus","appPermissionLevels","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}