"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[18],{1491:function(e,n,t){t.d(n,{Z:function(){return v},V:function(){return g}});var r=t(1413),a=t(885),c=t(1803),s=t(2791),i=t(4990),o=t(4164),l=t(3412),u=t(9072),d=t(184),m=function(e){return(0,d.jsx)("input",(0,r.Z)((0,r.Z)({},e),{},{type:"radio",className:"h-4 w-4 rounded-full border-gray-300 bg-gray-100 text-blue-600 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"}))},h=t(6123),x=function(e){var n=e.title,t=e.confirmText,x=e.isOpen,p=e.acl,f=e.onConfirm,g=e.onCancel,v=(0,l.Z)("modal-container"),j=(0,s.useState)(p),b=(0,a.Z)(j,2),y=b[0],N=b[1];if(!x)return null;var w=function(e){N((0,r.Z)((0,r.Z)({},p),{},{requiredSecurityGroup:c.hh[e.target.value]}))},Z=(0,d.jsx)(h.Z,{title:n,onClose:g,children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{id:"anonymous",value:"Anonymous",name:"securityGroup",checked:y.requiredSecurityGroup===c.hh.Anonymous,onChange:w}),(0,d.jsx)("label",{htmlFor:"anonymous",className:"ml-2",children:"Anonymous"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{id:"authenticated",value:"Authenticated",name:"securityGroup",checked:y.requiredSecurityGroup===c.hh.Authenticated,onChange:w}),(0,d.jsx)("label",{htmlFor:"authenticated",className:"ml-2",children:"Authenticated"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{id:"connected",value:"Connected",name:"securityGroup",checked:y.requiredSecurityGroup===c.hh.Connected,onChange:w}),(0,d.jsx)("label",{htmlFor:"connected",className:"ml-2",children:"Connected"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{id:"owner",value:"Owner",name:"securityGroup",checked:y.requiredSecurityGroup===c.hh.Owner,onChange:w}),(0,d.jsx)("label",{htmlFor:"owner",className:"ml-2",children:"Owner"})]}),(0,d.jsxs)("div",{className:"-m-2 flex flex-row-reverse px-4 py-3",children:[(0,d.jsx)(u.Z,{className:"m-2",onClick:function(){f(y)},children:null!==t&&void 0!==t?t:"Save"}),(0,d.jsx)(u.Z,{className:"m-2",type:"secondary",onClick:g,children:(0,i.t)("Cancel")})]})]})});return(0,o.createPortal)(Z,v)},p=function(e){var n=e.className;return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:n,children:(0,d.jsx)("path",{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"})})},f=function(e){var n=e.className;return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",className:n,children:(0,d.jsx)("path",{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"})})},g=function(e){return e.requiredSecurityGroup===c.hh.Anonymous?(0,i.t)("Public"):e.requiredSecurityGroup===c.hh.Authenticated?(0,i.t)("Authenticated"):e.requiredSecurityGroup===c.hh.Connected?(0,i.t)("Connections"):(e.requiredSecurityGroup,c.hh.Owner,(0,i.t)("Owner"))},v=function(e){var n=e.acl,t=e.onChange,o=e.className,l=(0,s.useState)(!1),u=(0,a.Z)(l,2),m=u[0],h=u[1],g=function(e){return n.requiredSecurityGroup===c.hh.Anonymous||n.requiredSecurityGroup===c.hh.Authenticated?(0,d.jsx)(f,(0,r.Z)({},e)):(0,d.jsx)(p,(0,r.Z)({},e))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{title:n.requiredSecurityGroup,className:"mr-2 inline-block ".concat(t?"":"cursor-default"," ").concat(null!==o&&void 0!==o?o:""),onClick:function(){return t&&h(!0)},children:(0,d.jsx)(g,{className:"h-5 w-5"})}),(0,d.jsx)(x,{acl:n,isOpen:m,title:(0,i.t)("Edit security"),onCancel:function(){h(!1)},onConfirm:function(e){t(e),h(!1)}})]})}},3225:function(e,n,t){var r=t(1413),a=t(184);n.Z=function(e){return(0,a.jsx)("select",(0,r.Z)((0,r.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className),children:e.children}))}},8491:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.title,t=e.className,a=e.children,c=e.isOpaqueBg,s=void 0!==c&&c,i=e.isBorderLess,o=void 0!==i&&i;return(0,r.jsxs)("section",{className:"my-5 rounded-md ".concat(s?o?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==t&&void 0!==t?t:""),children:[n?(0,r.jsx)("div",{className:"relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:(0,r.jsx)("h3",{className:"text-2xl dark:text-white",children:n})}):null,(0,r.jsx)("div",{className:"py-5 ",children:a})]})}},8575:function(e,n,t){var r=t(6871),a=t(3504),c=t(3225),s=t(1191),i=t(184);n.Z=function(e){var n=e.className,t=e.items,o=e.isLoading,l=(0,r.s0)(),u=(null===t||void 0===t?void 0:t.length)>=6;return!0===o?(0,i.jsx)(s.Z,{className:"h-10"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"hidden flex-col flex-wrap ".concat(u?"":"sm:flex"," sm:flex-row ").concat(null!==n&&void 0!==n?n:""),children:t.map((function(e){return(0,i.jsx)(a.OL,{className:function(n){var t,r=n.isActive;return"flex-grow cursor-pointer border-b-2 py-2 px-1 text-lg ".concat(r?"border-indigo-500 text-indigo-500 dark:text-indigo-400":"border-gray-300 transition-colors duration-300 hover:border-indigo-400 dark:border-gray-800 hover:dark:border-indigo-600"," ").concat(null!==(t=e.className)&&void 0!==t?t:"")},to:e.path,end:!0,children:e.title},e.key)}))}),(0,i.jsx)(c.Z,{className:"".concat(u?"":"sm:hidden"," py-4"),onChange:function(e){return l(e.target.value)},value:window.location.pathname,children:t.map((function(e){return(0,i.jsx)("option",{value:e.path,children:e.text||e.title},e.key)}))})]})}},5327:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(2982),a=t(3504),c=t(6871),s=t(4990),i=t(4165),o=t(1413),l=t(5861),u=t(7408),d=t(1803),m=t(3990),h=t(6117),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:void 0},n=e.channelId,t=e.page,r=50,a=(0,h.Z)(),c=a.getSharedSecret,s=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n,t,a,s,l,u,h=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>0&&void 0!==h[0]?h[0]:{page:void 0},t=n.channelId,a=n.page,s=new d.KU({api:d.Ii.Owner,sharedSecret:c()}),e.next=4,s.blogPostProvider.getMasterPosts(a,r);case 4:return l=e.sent,u=(u=l.filter((function(e){return!t||e.publishTargets.some((function(e){return e.channelId===t}))}))).map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{content:(0,o.Z)((0,o.Z)({},e.content),{},{itemKey:"".concat(e.content.channelId,"_").concat(e.content.id),slug:e.content.caption?(0,m.V)(e.content.caption):e.content.id})})})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useQuery)(["blogs",n,t],(function(){return s({channelId:n,page:t})}),{refetchOnWindowFocus:!1})},p=t(777),f=t(9072),g=t(885),v=t(2791),j=t(9088),b=t(6916),y=t(8491),N=t(184),w=function(){var e=(0,v.useState)(""),n=(0,g.Z)(e,2),t=n[0],r=n[1],a=(0,v.useState)(""),i=(0,g.Z)(a,2),o=i[0],l=i[1],u=(0,j.Z)().save,h=u.mutate,x=u.status,p=(0,c.s0)();return(0,N.jsx)(y.Z,{title:"New: channel",isOpaqueBg:!0,children:(0,N.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={channelId:"",name:t,description:o,templateId:void 0,acl:{requiredSecurityGroup:d.hh.Owner}};return h(n,{onSuccess:function(){p("/owner/blog/".concat((0,m.V)(n.name)))}}),!1},children:[(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)("label",{htmlFor:"channelName",children:(0,s.t)("Name")}),(0,N.jsx)(b.Z,{id:"name",name:"channelName",onChange:function(e){r(e.target.value)},required:!0})]}),(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)("label",{htmlFor:"name",children:(0,s.t)("Description")}),(0,N.jsx)(b.Z,{id:"name",name:"channelDescription",onChange:function(e){l(e.target.value)}})]}),(0,N.jsx)("div",{className:"flex flex-row",children:(0,N.jsx)(f.Z,{className:"ml-auto",state:x,children:(0,s.t)("Add channel")})})]})})},Z=function(e){var n=e.publishTargets,t=(0,p.Z)().fetch.data;if(null!==n&&void 0!==n&&n.length)return(0,N.jsx)("span",{className:"my-auto ml-2 flex flex-row flex-wrap",children:n.map((function(e){var n=t.find((function(n){return n.channelId===e.channelId}));return n?(0,N.jsx)("span",{className:"mr-2 bg-green-300 px-2 py-1 text-xs",title:"".concat((0,s.t)("Published to"),": ").concat(n.name),children:n.name},n.channelId):null}))})},k=function(e){var n,t=e.className,r=e.blog,c=e.linkRoot;return(0,N.jsx)(a.rU,{to:"".concat(c).concat(null!==(n=r.content.slug)&&void 0!==n?n:"#"),className:"contents",children:(0,N.jsx)("div",{className:"flex flex-nowrap px-5 py-8 transition-colors duration-200 hover:bg-slate-50 hover:dark:bg-slate-800 ".concat(null!==t&&void 0!==t?t:""),children:(0,N.jsxs)("div",{className:"flex flex-col md:flex-grow md:flex-row",children:[(0,N.jsxs)("div",{className:"flex flex-shrink-0 md:order-3 md:mb-0 md:mt-3 md:w-32 md:flex-col md:text-right lg:w-64",children:[(0,N.jsx)("span",{className:"title-font font-semibold text-gray-700 dark:text-white",children:r.content.type.toUpperCase()}),(0,N.jsx)("span",{className:"pl-2 text-gray-500 md:mt-1 md:pl-0 md:text-sm",children:new Date(r.content.dateUnixTime).toLocaleDateString()})]}),(0,N.jsxs)("div",{className:"md:order-2 md:flex-grow",children:[(0,N.jsxs)("h2",{className:"title-font mb-2 flex flex-row text-2xl font-medium text-gray-900 dark:text-white",children:[r.content.caption,(0,N.jsx)(Z,{publishTargets:r.publishTargets})]}),"abstract"in r.content?(0,N.jsx)("p",{className:"leading-relaxed",children:r.content.abstract}):null]})]})})})},C=t(1191),O=t(1491),S=t(3225),I=t(2465),P=function(e){var n=e.channel,t=e.onCancel,r=(0,v.useState)((0,o.Z)({},n)),a=(0,g.Z)(r,2),i=a[0],l=a[1],u=(0,j.Z)(),h=u.save,x=h.mutate,p=h.status,w=u.remove,Z=w.mutate,k=w.status,C=(0,c.s0)();if(n){var P=function(e){var n=(0,o.Z)({},i);n[e.target.name]=e.target.value,l(n)},q=Object.keys(d.rJ).filter((function(e){return!isNaN(Number(e))})),F=Object.keys(d.rJ).filter((function(e){return isNaN(Number(e))}));return(0,N.jsx)(y.Z,{title:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(O.Z,{acl:i.acl,onChange:function(e){P({target:{name:"acl",value:e}})}},i.channelId)," ","".concat((0,s.t)("Edit"),": ").concat(n.name)]}),isOpaqueBg:!0,children:(0,N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(i,{onSuccess:function(){C("/owner/blog/".concat((0,m.V)(i.name)))}})},children:[(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)("label",{htmlFor:"name",children:(0,s.t)("Name")}),(0,N.jsx)(b.Z,{id:"name",name:"name",defaultValue:n.name,onChange:P})]}),(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)("label",{htmlFor:"description",children:(0,s.t)("Description")}),(0,N.jsx)(I.Z,{id:"description",name:"description",defaultValue:n.description,onChange:P})]}),(0,N.jsxs)("div",{className:"mb-5",children:[(0,N.jsx)("label",{htmlFor:"template",children:(0,s.t)("Template")}),(0,N.jsxs)(S.Z,{id:"template",name:"templateId",defaultValue:n.templateId,onChange:P,children:[(0,N.jsx)("option",{children:(0,s.t)("Make a selection")}),q.map((function(e,n){return(0,N.jsx)("option",{value:e,children:(0,s.t)(F[n])},e)}))]})]}),(0,N.jsxs)("div",{className:"-m-2 flex flex-row-reverse",children:[(0,N.jsx)(f.Z,{type:"secondary",className:"m-2",onClick:function(e){e.preventDefault(),t()},children:(0,s.t)("Cancel")}),(0,N.jsx)(f.Z,{type:"primary",className:"m-2",state:p,children:(0,s.t)("Save")}),(0,N.jsx)(f.Z,{type:"remove",icon:"trash",className:"m-2 mr-auto",state:k,onClick:function(){return Z(n)},confirmOptions:{title:(0,s.t)("Remove channel"),body:(0,s.t)("Are you sure you want to remove this channel, this action cannot be undone. All blogs published on this channel will also be unpublished."),buttonText:(0,s.t)("Remove")},children:(0,s.t)("Remove")})]})]})})}},q=function(e){var n=e.channel,t=e.blogs,r=e.isParentLoading,a="/owner/blog/".concat(n?n.slug:"all","/"),c=(0,v.useState)(!1),i=(0,g.Z)(c,2),o=i[0],l=i[1];return r?(0,N.jsxs)("div",{className:"-m-5 pt-5",children:[(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"}),(0,N.jsx)(C.Z,{className:"m-5 h-20"})]}):t?(0,N.jsxs)(N.Fragment,{children:[n?o?(0,N.jsx)(P,{channel:n,onCancel:function(){return l(!1)}},n.channelId):(0,N.jsxs)("section",{className:"items-center bg-slate-50 p-3 dark:bg-slate-800 sm:flex sm:flex-row",children:[(0,N.jsx)("p",{className:"sm:mr-2",children:n.description?n.description:n.name}),(0,N.jsxs)("p",{className:"ml-auto",children:[(0,s.t)("Template"),":"," ",parseInt(n.templateId+"")===d.rJ.LargeCards?(0,s.t)("LargeCards"):parseInt(n.templateId+"")===d.rJ.ClassicBlog?(0,s.t)("ClassicBlog"):(0,s.t)("MasonryLayout")]}),(0,N.jsx)(f.Z,{type:"secondary",className:"sm:ml-2",onClick:function(){return l(!0)},children:(0,s.t)("Edit Channel")})]}):null,t.length?(0,N.jsx)("div",{className:"-mx-5 divide-y-2 divide-gray-100 dark:divide-gray-800",children:t.map((function(e){return(0,N.jsx)(k,{blog:e,linkRoot:a},e.content.itemKey)}))}):(0,N.jsx)("div",{className:"mt-4",children:(0,s.t)("no-data-found")})]}):(0,N.jsx)(N.Fragment,{})},F=t(5207),G=t(4439),V=t(3004),A=t(8575),D=function(){var e=(0,c.UO)().channelKey,n=(0,p.Z)().fetch,t=n.data,i=n.isLoading,o=null===t||void 0===t?void 0:t.find((function(n){return n.slug===e})),l=x({channelId:null===o||void 0===o?void 0:o.channelId,page:void 0}),u=l.data,d=l.isLoading;return(0,N.jsxs)("section",{children:[(0,N.jsx)(V.Z,{icon:G.Z,title:(0,s.t)("Blog"),actions:(0,N.jsx)(a.rU,{className:"contents",to:"/owner/blog/draft/new",children:(0,N.jsx)(f.Z,{type:"primary",icon:"plus",className:"m-2",children:(0,s.t)("New")})})}),(0,N.jsx)(A.Z,{items:[{title:(0,s.t)("Drafts"),key:"",path:"/owner/blog"}].concat((0,r.Z)((null!==t&&void 0!==t?t:[]).map((function(e){return{title:e.name,key:e.channelId,path:"/owner/blog/".concat(e.slug)}}))),[{title:(0,N.jsx)(F.Z,{className:"h-5 w-5"}),text:"-- ".concat((0,s.t)("Create new channel")," --"),key:"new",className:"flex-grow-0",path:"/owner/blog/new"}]),isLoading:i}),(0,N.jsx)("div",{className:"pt-5",children:"new"===e?(0,N.jsx)(w,{}):(0,N.jsx)(q,{channel:o,blogs:u,isParentLoading:i||d})})]})}},777:function(e,n,t){var r=t(4165),a=t(1413),c=t(5861),s=t(7408),i=t(1803),o=t(3990),l=t(6117);n.Z=function(){var e=(0,l.Z)().getSharedSecret,n=new i.KU({api:i.Ii.Owner,sharedSecret:e()}),t=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.blogDefinitionProvider.getChannelDefinitions();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{slug:(0,o.V)(e.name)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["channels"],(function(){return t()}),{refetchOnWindowFocus:!1})}}},4942:function(e,n,t){function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{Z:function(){return r}})},1413:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(4942);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}}}]);
//# sourceMappingURL=18.d3a5ba19.chunk.js.map