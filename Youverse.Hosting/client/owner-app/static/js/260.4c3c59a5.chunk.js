"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[260],{6419:function(e,n,t){var r=t(1413),a=t(184);n.Z=function(e){return(0,a.jsx)("input",(0,r.Z)((0,r.Z)({},e),{},{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600 ".concat(e.className)}))}},4124:function(e,n,t){t.r(n),t.d(n,{default:function(){return fe}});var r,a=t(885),s=t(2791),l=t(6871),i=t(3990),o=t(4990),c=t(1816),u=t(777),d=t(1413),h=t(1803),m=t(2878),f=t(3197),v=t(6916),g=t(2465),x=t(366),p=t(2100),b=t(6283),C=t(5473),j=t(4925),w=t(184),Z=["className","active","reversed"],y=["className"],N=function(e){var n=e.className,t=e.active,r=e.reversed,a=(0,j.Z)(e,Z);return(0,w.jsx)("button",(0,d.Z)((0,d.Z)({},a),{},{className:"".concat(null!==n&&void 0!==n?n:""," cursor-pointer px-1 py-2 ").concat(r?t?"text-white":"text-slate-400":t?"text-black dark:text-white":"text-slate-200 dark:text-slate-700")}))},M=function(e){var n=e.className,t=(0,j.Z)(e,y);return(0,w.jsx)("div",(0,d.Z)((0,d.Z)({},t),{},{className:"".concat(null!==n&&void 0!==n?n:""," relative -mx-1 mb-3 flex flex-row flex-wrap border-b border-slate-200 border-opacity-50")}))},I=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M321.1 242.4C340.1 220.1 352 191.6 352 160c0-70.59-57.42-128-128-128L32 32.01c-17.67 0-32 14.31-32 32s14.33 32 32 32h16v320H32c-17.67 0-32 14.31-32 32s14.33 32 32 32h224c70.58 0 128-57.41 128-128C384 305.3 358.6 264.8 321.1 242.4zM112 96.01H224c35.3 0 64 28.72 64 64s-28.7 64-64 64H112V96.01zM256 416H112v-128H256c35.3 0 64 28.71 64 63.1S291.3 416 256 416z"})})},k=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M384 64.01c0 17.69-14.31 32-32 32h-58.67l-133.3 320H224c17.69 0 32 14.31 32 32s-14.31 32-32 32H32c-17.69 0-32-14.31-32-32s14.31-32 32-32h58.67l133.3-320H160c-17.69 0-32-14.31-32-32s14.31-32 32-32h192C369.7 32.01 384 46.33 384 64.01z"})})},S=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M416 448H32c-17.69 0-32 14.31-32 32s14.31 32 32 32h384c17.69 0 32-14.31 32-32S433.7 448 416 448zM48 64.01H64v160c0 88.22 71.78 159.1 160 159.1s160-71.78 160-159.1v-160h16c17.69 0 32-14.32 32-32s-14.31-31.1-32-31.1l-96-.0049c-17.69 0-32 14.32-32 32s14.31 32 32 32H320v160c0 52.94-43.06 95.1-96 95.1S128 276.1 128 224v-160h16c17.69 0 32-14.31 32-32s-14.31-32-32-32l-96 .0049c-17.69 0-32 14.31-32 31.1S30.31 64.01 48 64.01z"})})},H=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M96 224C84.72 224 74.05 226.3 64 229.9V224c0-35.3 28.7-64 64-64c17.67 0 32-14.33 32-32S145.7 96 128 96C57.42 96 0 153.4 0 224v96c0 53.02 42.98 96 96 96s96-42.98 96-96S149 224 96 224zM352 224c-11.28 0-21.95 2.305-32 5.879V224c0-35.3 28.7-64 64-64c17.67 0 32-14.33 32-32s-14.33-32-32-32c-70.58 0-128 57.42-128 128v96c0 53.02 42.98 96 96 96s96-42.98 96-96S405 224 352 224z"})})},F=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"})})},P=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M448 448c0 17.69-14.33 32-32 32h-96c-17.67 0-32-14.31-32-32s14.33-32 32-32h16v-144h-224v144H128c17.67 0 32 14.31 32 32s-14.33 32-32 32H32c-17.67 0-32-14.31-32-32s14.33-32 32-32h16v-320H32c-17.67 0-32-14.31-32-32s14.33-32 32-32h96c17.67 0 32 14.31 32 32s-14.33 32-32 32H112v112h224v-112H320c-17.67 0-32-14.31-32-32s14.33-32 32-32h96c17.67 0 32 14.31 32 32s-14.33 32-32 32h-16v320H416C433.7 416 448 430.3 448 448z"})})},L=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M55.1 56.04C55.1 42.78 66.74 32.04 79.1 32.04H111.1C125.3 32.04 135.1 42.78 135.1 56.04V176H151.1C165.3 176 175.1 186.8 175.1 200C175.1 213.3 165.3 224 151.1 224H71.1C58.74 224 47.1 213.3 47.1 200C47.1 186.8 58.74 176 71.1 176H87.1V80.04H79.1C66.74 80.04 55.1 69.29 55.1 56.04V56.04zM118.7 341.2C112.1 333.8 100.4 334.3 94.65 342.4L83.53 357.9C75.83 368.7 60.84 371.2 50.05 363.5C39.26 355.8 36.77 340.8 44.47 330.1L55.59 314.5C79.33 281.2 127.9 278.8 154.8 309.6C176.1 333.1 175.6 370.5 153.7 394.3L118.8 432H152C165.3 432 176 442.7 176 456C176 469.3 165.3 480 152 480H64C54.47 480 45.84 474.4 42.02 465.6C38.19 456.9 39.9 446.7 46.36 439.7L118.4 361.7C123.7 355.9 123.8 347.1 118.7 341.2L118.7 341.2zM512 64C529.7 64 544 78.33 544 96C544 113.7 529.7 128 512 128H256C238.3 128 224 113.7 224 96C224 78.33 238.3 64 256 64H512zM512 224C529.7 224 544 238.3 544 256C544 273.7 529.7 288 512 288H256C238.3 288 224 273.7 224 256C224 238.3 238.3 224 256 224H512zM512 384C529.7 384 544 398.3 544 416C544 433.7 529.7 448 512 448H256C238.3 448 224 433.7 224 416C224 398.3 238.3 384 256 384H512z"})})},z=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M16 96C16 69.49 37.49 48 64 48C90.51 48 112 69.49 112 96C112 122.5 90.51 144 64 144C37.49 144 16 122.5 16 96zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H192C174.3 128 160 113.7 160 96C160 78.33 174.3 64 192 64H480zM480 224C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H192C174.3 288 160 273.7 160 256C160 238.3 174.3 224 192 224H480zM480 384C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H192C174.3 448 160 433.7 160 416C160 398.3 174.3 384 192 384H480zM16 416C16 389.5 37.49 368 64 368C90.51 368 112 389.5 112 416C112 442.5 90.51 464 64 464C37.49 464 16 442.5 16 416zM112 256C112 282.5 90.51 304 64 304C37.49 304 16 282.5 16 256C16 229.5 37.49 208 64 208C90.51 208 112 229.5 112 256z"})})},B=t(6691),V=function(e){var n=e.className;return(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",className:n,children:(0,w.jsx)("path",{d:"M447.1 32h-384C28.64 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM111.1 96c26.51 0 48 21.49 48 48S138.5 192 111.1 192s-48-21.49-48-48S85.48 96 111.1 96zM446.1 407.6C443.3 412.8 437.9 416 432 416H82.01c-6.021 0-11.53-3.379-14.26-8.75c-2.73-5.367-2.215-11.81 1.334-16.68l70-96C142.1 290.4 146.9 288 152 288s9.916 2.441 12.93 6.574l32.46 44.51l93.3-139.1C293.7 194.7 298.7 192 304 192s10.35 2.672 13.31 7.125l128 192C448.6 396 448.9 402.3 446.1 407.6z"})})},D={alias:h.Ib.BlogMainContentDriveId.toString(),type:h.Hm.DriveType.toString()},T=function(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),t=n[0],r=n[1],l=(0,p._7)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(N,{onClick:function(e){e.preventDefault(),r(!0)},children:(0,w.jsx)(V,{className:"h-5 w-5"})}),(0,w.jsx)(B.Z,{isOpen:t,onCancel:function(){r(!1)},onConfirm:function(e){!function(e,n){var t={type:"image",imageFileId:n,children:[{text:""}]};b.YR.insertNodes(e,t)}(l,e),r(!1)},title:(0,o.t)("Insert image"),confirmText:(0,o.t)("Add"),acl:{requiredSecurityGroup:h.hh.Anonymous},targetDrive:D})]})},O=new WeakMap,Q=function(e){e.forEach((function(e){if(O.has(e.target)){var n=O.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(r.unobserve(e.target),O.delete(e.target),n())}}))},_=function(){return void 0===r&&(r=new IntersectionObserver(Q,{rootMargin:"100px",threshold:.15})),r},A=t(8088),E=function(e){var n,t,r=e.targetDrive,l=e.fileId,i=e.className,o=e.alt,c=e.title,u=(0,s.useState)(!1),d=(0,a.Z)(u,2),h=d[0],m=d[1],f=(0,s.useRef)(null),v=(0,A.Z)(h?l:void 0,r).fetch.data;return n=f,t=function(){m(!0)},(0,s.useEffect)((function(){var e=n.current,r=_();if(e)return O.set(e,t),r.observe(e),function(){O.delete(e),r.unobserve(e)}}),[]),(0,w.jsx)("img",{src:v,alt:h&&v?o:" ",className:"".concat(i," ").concat((!h||!v)&&"h-full w-full animate-pulse bg-slate-100"),title:c,ref:f})},R={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},U=["numbered-list","bulleted-list"],q={alias:h.Ib.BlogMainContentDriveId.toString(),type:h.Hm.DriveType.toString()},W=function(e,n){Y(e,n)?b.ML.removeMark(e,n):b.ML.addMark(e,n,!0)},K=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type",r=e.selection;if(!r)return!1;var s=Array.from(b.ML.nodes(e,{at:b.ML.unhangRange(e,r),match:function(e){return!b.ML.isEditor(e)&&b.W_.isElement(e)&&e[t]===n}})),l=(0,a.Z)(s,1),i=l[0];return!!i},Y=function(e,n){var t=b.ML.marks(e);return!!t&&!0===t[n]},G=function(e){var n=e.attributes,t=e.children,r=e.element,a={};switch(r.type){case"block-quote":return(0,w.jsx)("blockquote",(0,d.Z)((0,d.Z)({style:a},n),{},{className:"border-l-4 pl-2",children:t}));case"bulleted-list":return(0,w.jsx)("ul",(0,d.Z)((0,d.Z)({style:a},n),{},{className:"list-disc pl-5",children:t}));case"heading-one":return(0,w.jsx)("h1",(0,d.Z)((0,d.Z)({style:a},n),{},{className:"text-2xl",children:t}));case"heading-two":return(0,w.jsx)("h2",(0,d.Z)((0,d.Z)({style:a},n),{},{className:"text-xl",children:t}));case"list-item":return(0,w.jsx)("li",(0,d.Z)((0,d.Z)({style:a},n),{},{children:t}));case"numbered-list":return(0,w.jsx)("ol",(0,d.Z)((0,d.Z)({style:a},n),{},{className:"list-decimal pl-5",children:t}));case"image":var s=(0,p.vt)(),l=(0,p.UE)();return(0,w.jsxs)("div",(0,d.Z)((0,d.Z)({},n),{},{children:[(0,w.jsx)("div",{contentEditable:!1,className:"pl-2",children:(0,w.jsx)(E,{targetDrive:q,fileId:r.imageFileId,className:"max-w-md ".concat(s&&l?"outline outline-4 outline-offset-2 outline-indigo-500":"")})}),t]}));default:return(0,w.jsx)("p",(0,d.Z)((0,d.Z)({style:a},n),{},{children:t}))}},J=function(e){var n=e.attributes,t=e.children,r=e.leaf;return r.bold&&(t=(0,w.jsx)("strong",{children:t})),r.code&&(t=(0,w.jsx)("code",{children:t})),r.italic&&(t=(0,w.jsx)("em",{children:t})),r.underline&&(t=(0,w.jsx)("u",{children:t})),(0,w.jsx)("span",(0,d.Z)((0,d.Z)({},n),{},{children:t}))},X=function(e){var n=e.format,t=e.icon,r=(0,p.ui)();return(0,w.jsx)(N,{active:K(r,n,"type"),onMouseDown:function(e){e.preventDefault(),function(e,n){var t=K(e,n,"type"),r=U.includes(n);b.YR.unwrapNodes(e,{match:function(e){return!b.ML.isEditor(e)&&b.W_.isElement(e)&&U.includes(e.type)},split:!0});var a={type:t?"paragraph":r?"list-item":n};if(b.YR.setNodes(e,a),!t&&r){var s={type:n,children:[]};b.YR.wrapNodes(e,s)}}(r,n)},children:t&&(0,w.jsx)(t,{className:"h-5 w-5"})})},$=function(e){var n=e.format,t=e.icon,r=(0,p.ui)();return(0,w.jsx)(N,{active:Y(r,n),onMouseDown:function(e){e.preventDefault(),W(r,n)},children:t&&(0,w.jsx)(t,{className:"h-5 w-5"})})},ee=function(e){var n=e.defaultValue,t=e.placeholder,r=e.onChange,a=(0,s.useCallback)((function(e){return(0,w.jsx)(G,(0,d.Z)({},e))}),[]),l=(0,s.useCallback)((function(e){return(0,w.jsx)(J,(0,d.Z)({},e))}),[]),i=(0,s.useMemo)((function(){return(0,C.VC)((0,p.BU)((0,b.Jh)()))}),[]),o=(0,s.useMemo)((function(){return(0,m.Z)(r,1500)}),[r]);return(0,w.jsx)("section",{className:"w-[100%] overflow-hidden",children:(0,w.jsxs)(p.mH,{editor:i,value:n,onChange:o,children:[(0,w.jsxs)(M,{children:[(0,w.jsx)($,{format:"bold",icon:I}),(0,w.jsx)($,{format:"italic",icon:k}),(0,w.jsx)($,{format:"underline",icon:S}),(0,w.jsx)($,{format:"code",icon:F}),(0,w.jsx)(X,{format:"heading-one",icon:P}),(0,w.jsx)(X,{format:"heading-two",icon:P}),(0,w.jsx)(X,{format:"block-quote",icon:H}),(0,w.jsx)(X,{format:"numbered-list",icon:L}),(0,w.jsx)(X,{format:"bulleted-list",icon:z}),(0,w.jsx)(T,{})]}),(0,w.jsx)(p.CX,{renderElement:a,renderLeaf:l,placeholder:t,spellCheck:!0,autoFocus:!0,onKeyDown:function(e){for(var n in R){if((0,x.ZP)(n,e))e.preventDefault(),W(i,R[n])}}})]})})},ne=function(e){var n,t=e.blog,r=e.onChange,a=(0,s.useMemo)((function(){return(0,m.Z)(r,500)}),[r]),l="Article"===t.type?t:void 0,i=Array.isArray(null===l||void 0===l?void 0:l.body)?null===l||void 0===l?void 0:l.body:[{type:"paragraph",children:[{text:null!==(n=null===l||void 0===l?void 0:l.body)&&void 0!==n?n:""}]}],c={alias:h.Ib.BlogMainContentDriveId.toString(),type:h.Hm.DriveType.toString()};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"mb-5",children:[(0,w.jsx)("label",{className:"mb-2 block",htmlFor:"blog_caption",children:(0,o.t)("Caption")}),(0,w.jsx)(v.Z,{id:"blog_caption",name:"caption",defaultValue:t.caption,onBlur:a})]}),(0,w.jsxs)("div",{className:"mb-5",children:[(0,w.jsx)("label",{className:"mb-2 block",htmlFor:"blog_image",children:(0,o.t)("Primary image")}),(0,w.jsx)(f.Z,{id:"blog_image",name:"primaryImageFileId",defaultValue:t.primaryImageFileId,onChange:a,targetDrive:c,acl:{requiredSecurityGroup:h.hh.Anonymous}})]}),t.slug?(0,w.jsxs)("div",{className:"mb-5",children:[(0,w.jsx)("label",{className:"mb-2 block",htmlFor:"blog_slug",children:(0,o.t)("Slug [raw & readonly]")}),(0,w.jsx)(v.Z,{id:"blog_slug",name:"slug",defaultValue:t.slug,disabled:!0})]}):null,l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"mb-5",children:[(0,w.jsx)("label",{className:"mb-2 block",htmlFor:"blog_abstract",children:(0,o.t)("Abstract")}),(0,w.jsx)(g.Z,{id:"blog_abstract",name:"abstract",defaultValue:l.abstract,onChange:a})]}),(0,w.jsx)(ee,{defaultValue:i,placeholder:(0,o.t)("Start writing..."),onChange:function(e){r({target:{name:"body",value:e}})}})]}):null]})},te=function(e){var n=e.saveBlog,t=(0,s.useState)({acl:{requiredSecurityGroup:h.hh.Anonymous},publishTargets:[],content:{id:"",channelId:"",caption:"",dateUnixTime:(new Date).getTime(),type:"Article",abstract:"",headerImageFileId:"",primaryImageFileId:"",body:""}}),r=(0,a.Z)(t,2),l=r[0],i=r[1];return(0,w.jsx)(ne,{blog:l.content,onChange:function(e){var t=(0,d.Z)({},l);t.content[e.target.name]!==e.target.value&&(-1!==Object.keys(t.content).indexOf(e.target.name)&&(t.content[e.target.name]=e.target.value),t.content.caption.length&&(i(t),n(t)))}})},re=function(e){var n=e.blog,t=e.saveBlog,r=(0,d.Z)({},n);return(0,w.jsx)(ne,{blog:n.content,onChange:function(e){r.content[e.target.name]=e.target.value,r.content.caption.length&&t(r)}})},ae=t(9072),se=t(2982),le=t(4164),ie=t(3412),oe=t(6419),ce=t(6123),ue=function(e){var n=e.channel,t=e.blogFile,r=(0,c.Z)().unpublish,a=r.mutate,s=r.status;return(0,w.jsxs)("div",{className:"mb-2 flex flex-row",children:[(0,w.jsx)(ae.Z,{icon:"trash",title:(0,o.t)("Unpublish from this channel"),className:"mr-2 px-2 py-1",type:"remove",onClick:function(){return a({blogFile:t,channelId:n.channelId})},state:s}),(0,w.jsx)("p",{className:"my-auto",children:n.name})]},n.channelId)},de=function(e){var n=e.title,t=e.confirmText,r=e.isOpen,l=e.channels,i=e.blogFile,u=e.onConfirm,h=e.onCancel,m=(0,ie.Z)("modal-container"),f=(0,c.Z)().publish,v=f.mutate,g=f.status,x=(0,s.useState)(null),p=(0,a.Z)(x,2),b=p[0],C=p[1];if(!r)return null;var j=i.publishTargets.map((function(e){return l.find((function(n){return n.channelId===e.channelId}))})),Z=l.reduce((function(e,n){return j.find((function(e){return e.channelId===n.channelId}))?e:[].concat((0,se.Z)(e),[n])}),[]),y=(0,w.jsx)(ce.Z,{title:n,onClose:h,children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{children:[j.length?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"-mx-8 mb-5 py-10 px-8",children:[(0,w.jsx)("h2",{className:"mb-2 text-lg",children:"Already published to:"}),j.map((function(e){return(0,w.jsx)(ue,{channel:e,blogFile:i},e.channelId)}))]})}):null,Z.length?(0,w.jsxs)(w.Fragment,{children:[j.length?(0,w.jsx)("h2",{className:"mb-2 text-lg",children:"Other Channels:"}):null,Z.map((function(e){return(0,w.jsxs)("div",{className:"mb-2",children:[(0,w.jsx)(oe.Z,{value:e.channelId,id:e.channelId,onChange:function(e){var n=(0,d.Z)({},b);n[e.target.value]=e.target.checked,C(n)}}),(0,w.jsx)("label",{htmlFor:e.channelId,className:"ml-2",children:e.name})]},e.channelId)}))]}):null]}),(0,w.jsxs)("div",{className:"-m-2 flex flex-row-reverse",children:[(0,w.jsx)(ae.Z,{className:"m-2",state:g,onClick:function(){var e=l.reduce((function(e,n){if(b&&b[n.channelId]){var t,r,a=i.publishTargets.find((function(e){return e.channelId===n.channelId}));return[].concat((0,se.Z)(e),[{acl:n.acl,channelId:n.channelId,fileId:null!==(t=null===a||void 0===a?void 0:a.fileId)&&void 0!==t?t:void 0,lastPublishTime:null!==(r=null===a||void 0===a?void 0:a.lastPublishTime)&&void 0!==r?r:void 0}])}return e}),[]);v({blogFile:i,publishTargets:[].concat((0,se.Z)(i.publishTargets),(0,se.Z)(e))},{onSuccess:function(){u()}})},children:null!==t&&void 0!==t?t:"Publish"}),(0,w.jsx)(ae.Z,{className:"m-2",type:"secondary",onClick:h,children:(0,o.t)("Cancel")})]})]})});return(0,le.createPortal)(y,m)},he=t(3004),me=t(8739),fe=function(){var e,n,t,r=(0,l.s0)(),d=(0,l.UO)().blogKey,h=(0,u.Z)().fetch,m=h.data,f=h.isLoading,v=(0,s.useState)(!1),g=(0,a.Z)(v,2),x=g[0],p=g[1],b=(0,c.Z)({blogSlug:d}),C=b.fetch,j=C.data,Z=C.isLoading,y=b.save,N=y.mutate,M=y.status,I=b.remove.mutate,k=function(e){N(e,{onSuccess:function(n){var t;if(!j||d!==(0,i.V)(e.content.caption)&&d!==(null===(t=e.fileId)||void 0===t?void 0:t.toString())){var a,s=null!==(a=e.content.caption)&&void 0!==a&&a.length?(0,i.V)(e.content.caption):n.toString(),l=window.location.pathname.split("/");l.pop(),l&&s&&r("".concat(l.join("/"),"/").concat(s))}}})};return!m||f||Z?(0,w.jsx)(me.Z,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("section",{children:[(0,w.jsx)(he.Z,{title:j?(0,w.jsx)(w.Fragment,{children:j.content.caption}):(0,o.t)("New blog"),actions:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ae.Z,{type:"remove",className:"m-2",icon:"trash",confirmOptions:{title:"".concat((0,o.t)("Remove")," ").concat(null!==(e=null===j||void 0===j?void 0:j.content.caption)&&void 0!==e?e:""),buttonText:"Permanently remove",body:(0,o.t)("Are you sure you want to remove this blog? This action cannot be undone.")},onClick:function(){return I({fileId:j.fileId,slug:j.content.slug},{onSuccess:function(){var e=window.location.pathname.split("/");e.pop(),e&&r("".concat(e.join("/")))}})}}),(0,w.jsx)(ae.Z,{type:"primary",className:"m-2",onClick:function(){return p(!0)},children:(0,o.t)("Publish")})]}),breadCrumbs:[{href:"/owner/blog",title:"Blog"},{title:null!==(n=null===(t=j.content)||void 0===t?void 0:t.caption)&&void 0!==n?n:""}],saveStatus:M}),(0,w.jsx)("div",{className:"md:mx-auto md:max-w-[40rem]",children:j?(0,w.jsx)(re,{blog:j,saveBlog:k}):(0,w.jsx)(te,{saveBlog:k})})]}),j?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(de,{isOpen:x,onCancel:function(){return p(!1)},onConfirm:function(){return p(!1)},blogFile:j,channels:m,title:"".concat((0,o.t)("Publish"),": ").concat(j.content.caption)})}):null]})}},3990:function(e,n,t){t.d(n,{P:function(){return a},V:function(){return r}});var r=function(e){return e.split(" ").join("-").toLowerCase()},a=function(e){return Object.keys(e).map((function(n){return n+"="+e[n]})).join("&")}},1816:function(e,n,t){var r=t(1413),a=t(2982),s=t(4165),l=t(5861),i=t(7408),o=t(1803),c=t(3990),u=t(6117),d=t(1695);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.blogSlug,t=(0,u.Z)(),h=t.getSharedSecret,m=new o.KU({api:o.Ii.Owner,sharedSecret:h()}),f=(0,i.useQueryClient)(),v=(0,d.Z)().publish.mutate,g=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,r,a,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.blogSlug){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,m.blogPostProvider.getBlogPostFile(t);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return 100,e.next=11,m.blogPostProvider.getMasterPosts(void 0,100);case 11:if(a=e.sent,!(l=a.find((function(e){return(0,c.V)(e.content.caption)===t})))){e.next=15;break}return e.abrupt("return",l);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.blogPostProvider.saveBlogPostMaster(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fileId,n.slug,e.next=3,m.blogPostProvider.removeBlogPost(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.blogFile,r=n.publishTargets,e.next=3,m.blogPostProvider.publishBlogPost(t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,l,i,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.blogFile,l=n.channelId,e.next=3,m.blogPostProvider.deleteFromChannel(l,t.content.id);case 3:if(!e.sent){e.next=9;break}return i=t.publishTargets.reduce((function(e,n){return n.channelId===l?e:[].concat((0,a.Z)(e),[n])}),[]),o=(0,r.Z)((0,r.Z)({},t),{},{publishTargets:i}),e.next=8,x(o);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetch:(0,i.useQuery)(["blog",n],(function(){return g({blogSlug:n})}),{refetchOnWindowFocus:!1}),save:(0,i.useMutation)(x,{onSuccess:function(e,n){n.content.slug?f.invalidateQueries(["blog",n.content.slug]):f.invalidateQueries(["blog"]),f.removeQueries(["blogs"])}}),remove:(0,i.useMutation)(p,{onSuccess:function(e,n){n&&n.slug?f.invalidateQueries(["blog",n.slug]):f.invalidateQueries(["blog"]),f.removeQueries(["blogs"])}}),publish:(0,i.useMutation)(b,{onSuccess:function(){f.invalidateQueries(["blog"]),f.removeQueries(["blogs"]),v()}}),unpublish:(0,i.useMutation)(C,{onSuccess:function(){f.invalidateQueries(["blog"]),f.removeQueries(["blogs"]),v()},onError:function(e){console.error(e)}})}}},777:function(e,n,t){var r=t(4165),a=t(1413),s=t(5861),l=t(7408),i=t(1803),o=t(3990),c=t(6117);n.Z=function(){var e=(0,c.Z)().getSharedSecret,n=new i.KU({api:i.Ii.Owner,sharedSecret:e()}),t=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.blogDefinitionProvider.getChannelDefinitions();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{slug:(0,o.V)(e.name)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,l.useQuery)(["channels"],(function(){return t()}),{refetchOnWindowFocus:!1})}}}}]);
//# sourceMappingURL=260.4c3c59a5.chunk.js.map