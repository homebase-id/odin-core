"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[816],{3990:function(e,t,r){r.d(t,{P:function(){return i},V:function(){return n}});var n=function(e){return e.split(" ").join("-").toLowerCase()},i=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}},1816:function(e,t,r){var n=r(1413),i=r(3433),a=r(4165),u=r(5861),o=r(7408),s=r(6752),c=r(3990),l=r(6117),p=r(1695);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.blogSlug,r=(0,l.Z)(),f=r.getSharedSecret,d=new s.KU({api:s.Ii.Owner,sharedSecret:f()}),g=(0,o.useQueryClient)(),h=(0,p.Z)().publish.mutate,v=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r,n,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.blogSlug){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d.blogPostProvider.getBlogPostFile(r);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:return 100,e.next=11,d.blogPostProvider.getMasterPosts(void 0,100);case 11:if(i=e.sent,!(u=i.find((function(e){return(0,c.V)(e.content.caption)===r})))){e.next=15;break}return e.abrupt("return",u);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.blogPostProvider.saveBlogPostMaster(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fileId,t.slug,e.next=3,d.blogPostProvider.removeBlogPost(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blogFile,n=t.publishTargets,e.next=3,d.blogPostProvider.publishBlogPost(r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r,u,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blogFile,u=t.channelId,e.next=3,d.blogPostProvider.deleteFromChannel(u,r.content.id);case 3:if(!e.sent){e.next=9;break}return o=r.publishTargets.reduce((function(e,t){return t.channelId===u?e:[].concat((0,i.Z)(e),[t])}),[]),s=(0,n.Z)((0,n.Z)({},r),{},{publishTargets:o}),e.next=8,m(s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,o.useQuery)(["blog",t],(function(){return v({blogSlug:t})}),{refetchOnWindowFocus:!1}),save:(0,o.useMutation)(m,{onSuccess:function(e,t){t.content.slug?g.invalidateQueries(["blog",t.content.slug]):g.invalidateQueries(["blog"]),g.removeQueries(["blogs"])}}),remove:(0,o.useMutation)(b,{onSuccess:function(e,t){t&&t.slug?g.invalidateQueries(["blog",t.slug]):g.invalidateQueries(["blog"]),g.removeQueries(["blogs"])}}),publish:(0,o.useMutation)(y,{onSuccess:function(){g.invalidateQueries(["blog"]),g.removeQueries(["blogs"]),h()}}),unpublish:(0,o.useMutation)(P,{onSuccess:function(){g.invalidateQueries(["blog"]),g.removeQueries(["blogs"]),h()},onError:function(e){console.error(e)}})}}},7221:function(e,t,r){var n=r(4165),i=r(1413),a=r(5861),u=r(7408),o=r(6752),s=r(6117);t.Z=function(e){var t=e.profileId,r=e.sectionId,c=(0,s.Z)().getSharedSecret,l=new o.KU({api:o.Ii.Owner,sharedSecret:c()}),p=(0,u.useQueryClient)(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.profileDataProvider.getProfileAttributes(t,r,100);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:Object.values(o.H1).find((function(t){return t.type.toString()===e.type}))})})));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.profileId,i=t.sectionId,r&&i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.profileDataProvider.getProfileAttributes(r,i,100);case 5:return u=e.sent,e.next=8,Promise.all(u.map(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.profileDataProvider.removeAttribute(r,t.fileId));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["attributes",t,r],(function(){return f(t,r)}),{refetchOnWindowFocus:!1}),removeAttributes:(0,u.useMutation)(d,{onError:function(e){console.error(e)},onSettled:function(e,t,r){p.invalidateQueries(["attributes",r.profileId,r.sectionId])}})}}},2516:function(e,t,r){var n=r(4165),i=r(1413),a=r(5861),u=r(7408),o=r(6752),s=r(6117);t.Z=function(){var e=(0,s.Z)().getSharedSecret,t=new o.KU({api:o.Ii.Owner,sharedSecret:e()}),r=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.homePageProvider.getAttributes(o.Dg.HomePage.toString());case 2:return r=e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:{type:o.Dg.HomePage.toString(),name:"Home Page",description:""}})})),e.next=5,t.homePageProvider.getAttributes(o.Dg.Theme.toString());case 5:return a=e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{typeDefinition:{type:o.Dg.Theme.toString(),name:"Theme",description:""}})})),e.abrupt("return",{home:r,theme:a});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,u.useQuery)(["homeAtrributes"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},1695:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(3433),i=r(4165),a=r(1413),u=r(5861),o=r(7408),s=r(6752),c=r(5671),l=r(3144),p=r(9340),f=r(1129),d=function(e){(0,p.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,c.Z)(this,r),(n=t.call(this,{api:s.Ii.Owner,sharedSecret:e})).publishFile=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,r){var u,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.createAxiosClient(),o={filename:t,config:{crossOriginBehavior:"allowAllOrigins",contentType:"string"},sections:r.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{queryParams:g(e.queryParams)})}))},e.next=4,u.post("/optimization/cdn/publish",o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n}return(0,l.Z)(r,null,[{key:"getInstance",value:function(e){return r.instance||(r.instance=new r(e)),r.instance}}]),r}(s.BX);d.instance=void 0;var g=function(e){return(e=(0,a.Z)({},e)).tagsMatchAtLeastOne&&(e.tagsMatchAtLeastOne=e.tagsMatchAtLeastOne.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e.tagsMatchAll&&(e.tagsMatchAll=e.tagsMatchAll.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e.sender&&(e.sender=e.sender.map((function(e){return s.j4.uint8ArrayToBase64(s.j4.stringToUint8Array(e))}))),e},h=r(6117),v=r(7221),m=r(2516),b=function(){var e=(0,h.Z)().getSharedSecret,t=(0,m.Z)().fetch.data,r=(0,v.Z)({profileId:s.P.StandardProfileId.toString(),sectionId:s.P.PersonalInfoSectionId.toString()}).fetch.data,c=new s.KU({api:s.Ii.Owner,sharedSecret:e()}),l=function(){var o=(0,u.Z)((0,i.Z)().mark((function o(){var l,p,f,g;return(0,i.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=d.getInstance(e()),p=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n,u,o,c,p,f,d,g,h,v,m,b,y,P,Z,S,w,x,T,A,I;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={alias:s.Ib.DefaultDriveId.toString(),type:s._U.ProfileDriveType.toString()},p={alias:s.P.StandardProfileId.toString(),type:s._U.ProfileDriveType.toString()},f={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAll:[s.P.PersonalInfoSectionId.toString(),s.H1.Name.type.toString()]},d={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAll:[s.P.PersonalInfoSectionId.toString(),s.H1.Photo.type.toString()]},g={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.P.ExternalLinksSectionId.toString()]},h={targetDrive:c,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.Dg.Theme.toString()]},v={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.H1.FullBio.type.toString()]},m={targetDrive:p,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.H1.Link.type.toString()]},b={targetDrive:c,fileType:[s.Uz.AttributeFileType],tagsMatchAtLeastOne:[s.Dg.HomePage.toString()]},P=[{name:"socials",queryParams:g,resultOptions:y={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}},{name:"name",queryParams:f,resultOptions:y},{name:"photo",queryParams:d,resultOptions:y},{name:"bio",queryParams:v,resultOptions:y},{name:"link",queryParams:m,resultOptions:y},{name:"theme",queryParams:h,resultOptions:y},{name:"home",queryParams:b,resultOptions:y}],Z=[{name:"name",queryParams:f,resultOptions:y},{name:"photo",queryParams:d,resultOptions:y}],S=null===(n=t.home[0])||void 0===n?void 0:n.data.headerImageUrl,w=(0,s.H3)(s.Ib.DefaultDriveId.toString()),x={targetDrive:w,fileType:[0],tagsMatchAtLeastOne:[S]},S&&P.push({name:S,queryParams:x,resultOptions:y}),T=null===r||void 0===r||null===(u=r.find((function(e){return e.acl.requiredSecurityGroup===s.hh.Anonymous&&e.type===s.H1.Photo.type.toString()})))||void 0===u||null===(o=u.data)||void 0===o?void 0:o.profileImageId,A=(0,s.H3)(s.P.StandardProfileId.toString()),I={targetDrive:A,fileType:[0],tagsMatchAtLeastOne:[T]},T&&(P.push({name:T,queryParams:I,resultOptions:y}),Z.push({name:T,queryParams:I,resultOptions:(0,a.Z)((0,a.Z)({},y),{},{includeAdditionalThumbnails:!0})})),e.t0=Promise,e.next=23,l.publishFile("profile.json",P);case 23:return e.t1=e.sent,e.next=26,l.publishFile("public.json",Z);case 26:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=30,e.t0.all.call(e.t0,e.t3);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var t,r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.T4)(),r={targetDrive:t,fileType:[s.Hm.BlogChannelDefinitionFileType]},n=[{name:"channels",queryParams:r,resultOptions:{includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1}}],e.next=6,l.publishFile("channels.json",n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var t,r,a,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={includeAdditionalThumbnails:!1,includeJsonContent:!0,includePayload:!1,excludePreviewThumbnail:!1},e.next=3,c.blogDefinitionProvider.getChannelDefinitions();case 3:return r=e.sent,a=r.map((function(e){var r={targetDrive:{alias:e.channelId,type:s.Hm.ChannelDriveType.toString()},fileType:[s.Hm.BlogPostFileType]};return{name:e.channelId,queryParams:r,resultOptions:t}})),e.next=7,c.blogPostReadonlyProvider.getRecentPosts("Article",6*r.length);case 7:return u=e.sent.map((function(e){var r={targetDrive:c.blogDefinitionProvider.getPublishChannelDrive(e.channelId),fileType:[0],tagsMatchAtLeastOne:[e.primaryImageFileId]};return{name:e.primaryImageFileId,queryParams:r,resultOptions:t}})),e.next=10,l.publishFile("blogs.json",[].concat((0,n.Z)(a),(0,n.Z)(u)));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.next=6,p();case 6:return o.next=8,f();case 8:return o.next=10,g();case 10:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return{publish:(0,o.useMutation)(l,{onError:function(e){console.error(e)}})}}}}]);
//# sourceMappingURL=816.89c74df0.chunk.js.map