{"version":3,"file":"static/js/738.5287f2d5.chunk.js","mappings":"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","sources":["components/Dialog/ProfileDialog/ProfileDialog.tsx","components/SubMenu/SubMenu.tsx","components/Attribute/AttributeCreator/AttributeCreator.tsx","hooks/profiles/useProfileSections.ts","components/SectionEditor/SectionEditor.tsx","components/Templates/ProfileDetails/ProfileDetails.tsx","helpers/common.ts","hooks/profiles/useProfiles.ts"],"sourcesContent":["import { ProfileDefinition } from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport usePortal from '../../../hooks/portal/usePortal';\nimport useProfiles from '../../../hooks/profiles/useProfiles';\nimport ActionButton from '../../Buttons/ActionButton';\nimport Input from '../../Form/Input';\nimport Textarea from '../../Form/Textarea';\nimport DialogWrapper from '../Common/DialogWrapper';\n\nconst ProfileDialog = ({\n  title,\n  confirmText,\n  isOpen,\n  defaultValue,\n  onConfirm,\n  onCancel,\n}: {\n  title: string;\n  confirmText?: string;\n\n  isOpen: boolean;\n  defaultValue?: ProfileDefinition;\n\n  onConfirm: () => void;\n  onCancel: () => void;\n}) => {\n  const target = usePortal('modal-container');\n  const { mutateAsync: saveProfileDefinition, status: saveProfileDefinitionStatus } =\n    useProfiles().saveProfile;\n\n  const [newProfileDef, setNewProfileDef] = useState<ProfileDefinition>({\n    ...defaultValue,\n  });\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const dialog = (\n    <DialogWrapper title={title} onClose={onCancel}>\n      <>\n        <form\n          onSubmit={async (e) => {\n            e.preventDefault();\n\n            await saveProfileDefinition(newProfileDef);\n            onConfirm();\n\n            return false;\n          }}\n        >\n          <div className=\"mb-5\">\n            <label htmlFor=\"name\">{t('Name')}</label>\n            <Input\n              id=\"name\"\n              name=\"profileName\"\n              defaultValue={newProfileDef.name}\n              onChange={(e) => {\n                setNewProfileDef({ ...newProfileDef, name: e.target.value });\n              }}\n              required\n            />\n          </div>\n          <div className=\"mb-5\">\n            <label htmlFor=\"name\">{t('Description')}</label>\n            <Textarea\n              id=\"description\"\n              name=\"profileDescription\"\n              defaultValue={newProfileDef.description}\n              onChange={(e) => {\n                setNewProfileDef({ ...newProfileDef, description: e.target.value });\n              }}\n              required\n            />\n          </div>\n\n          <div className=\"-m-2 flex flex-row-reverse py-3\">\n            <ActionButton className=\"m-2\" state={saveProfileDefinitionStatus} icon={'send'}>\n              {confirmText || t('Add Profile')}\n            </ActionButton>\n            <ActionButton className=\"m-2\" type=\"secondary\" onClick={onCancel}>\n              {t('Cancel')}\n            </ActionButton>\n          </div>\n        </form>\n      </>\n    </DialogWrapper>\n  );\n\n  return createPortal(dialog, target);\n};\n\nexport default ProfileDialog;\n","import { FC, ReactNode } from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport Select from '../Form/Select';\nimport LoadingParagraph from '../Loaders/LoadingParagraph/LoadingParagraph';\n\ninterface SubmenuProps {\n  className?: string;\n  items: { title: ReactNode; text?: string; key: string; path: string; className?: string }[];\n  isLoading?: boolean;\n}\n\nconst Submenu: FC<SubmenuProps> = ({ className, items, isLoading }) => {\n  const navigate = useNavigate();\n  const forceMobileView = items?.length >= 6;\n\n  if (isLoading === true) {\n    return <LoadingParagraph className=\"h-10\" />;\n  }\n\n  return (\n    <>\n      <div\n        className={`hidden flex-col flex-wrap ${!forceMobileView ? 'sm:flex' : ''} sm:flex-row ${\n          className ?? ''\n        }`}\n      >\n        {items.map((item) => {\n          return (\n            // Only NavLink Supports isActive styling https://reactrouter.com/docs/en/v6/components/nav-link\n            <NavLink\n              className={({ isActive }) =>\n                `flex-grow cursor-pointer border-b-2 py-2 px-1 text-lg ${\n                  isActive\n                    ? 'border-indigo-500 text-indigo-500 dark:text-indigo-400'\n                    : 'border-gray-300 transition-colors duration-300 hover:border-indigo-400 dark:border-gray-800 hover:dark:border-indigo-600'\n                } ${item.className ?? ''}`\n              }\n              to={item.path}\n              key={item.key}\n              end\n            >\n              {item.title}\n            </NavLink>\n          );\n        })}\n      </div>\n      <Select\n        className={`${!forceMobileView ? 'sm:hidden' : ''} py-4`}\n        onChange={(e) => navigate(e.target.value)}\n        value={window.location.pathname}\n      >\n        {items.map((item) => {\n          return (\n            <option key={item.key} value={item.path}>\n              {item.text || item.title}\n            </option>\n          );\n        })}\n      </Select>\n    </>\n  );\n};\n\nexport default Submenu;\n","import {\n  AttributeDefinition,\n  AttributeDefinitions,\n  AttributeFile,\n  SecurityGroupType,\n} from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useAttribute from '../../../hooks/profiles/useAttribute';\nimport { AttributeVm } from '../../../hooks/profiles/useAttributes';\nimport ActionButton from '../../Buttons/ActionButton';\nimport Select from '../../Form/Select';\nimport Section from '../../Sections/Section';\nimport AttributeFields from '../AttributeFields/AttributeFields';\n\nconst AttributeCreator = ({\n  profileId,\n  sectionId,\n  newPriority,\n}: {\n  profileId: string;\n  sectionId: string;\n  newPriority: number;\n}) => {\n  const [isActive, setIsActive] = useState(false);\n  const [attribute, setAttribute] = useState<AttributeVm>();\n  const { mutate: saveAttribute, isLoading, isError, isSuccess } = useAttribute({}).save;\n\n  const setType = (typeId: string) => {\n    const targetObj = Object.values(AttributeDefinitions).find(\n      (curr) => curr.type.toString() === typeId\n    ) as AttributeDefinition;\n\n    setAttribute({\n      id: '',\n      type: typeId,\n      sectionId: sectionId,\n      priority: newPriority,\n      data: {},\n      typeDefinition: targetObj,\n      profileId: profileId,\n      acl: { requiredSecurityGroup: SecurityGroupType.Owner },\n    });\n  };\n\n  const changeHandler: React.ChangeEventHandler<HTMLInputElement | HTMLTextAreaElement> = (e) => {\n    if (!attribute) {\n      // attribute selection failed on type selection...\n      return;\n    }\n\n    const newAttr: AttributeVm = { ...attribute };\n    newAttr.data[e.target.name] = e.target.value;\n\n    setAttribute(newAttr);\n  };\n\n  const saveNewData = () => {\n    saveAttribute(attribute as AttributeFile, {\n      onSuccess: () => {\n        discard();\n      },\n    });\n  };\n\n  const discard = () => {\n    setIsActive(false);\n    setAttribute(undefined);\n  };\n\n  return (\n    <>\n      {isActive ? (\n        <Section\n          title={`New${attribute ? ':' : ''} ${attribute?.typeDefinition.name ?? ''}`}\n          isOpaqueBg={true}\n        >\n          {attribute === undefined ? (\n            <div className=\"mb-5\">\n              <label htmlFor=\"type\">{t('Attribute Type')}</label>\n              <Select\n                id=\"type\"\n                onChange={(e) => {\n                  setType(e.target.value);\n                }}\n              >\n                <option>{t('Make a selection')}</option>\n                {Object.values(AttributeDefinitions).map((def) => {\n                  return (\n                    <option value={def.type.toString()} key={def.type.toString()}>\n                      {def.name}\n                    </option>\n                  );\n                })}\n              </Select>\n            </div>\n          ) : (\n            <AttributeFields attribute={attribute} onChange={changeHandler} />\n          )}\n          <div className=\"flex flex-row\">\n            <ActionButton type=\"secondary\" className=\"ml-auto\" onClick={discard}>\n              {t('Cancel')}\n            </ActionButton>\n            <ActionButton\n              type=\"primary\"\n              icon=\"plus\"\n              className=\"ml-2\"\n              onClick={saveNewData}\n              state={isLoading ? 'loading' : isSuccess ? 'success' : isError ? 'error' : undefined}\n            >\n              {t('Add')}\n            </ActionButton>\n          </div>\n        </Section>\n      ) : (\n        <div className=\"flex flex-row\">\n          <ActionButton\n            type=\"primary\"\n            icon=\"plus\"\n            className=\"mx-auto min-w-[9rem]\"\n            onClick={() => setIsActive(true)}\n          >\n            {t('Add Attribute')}\n          </ActionButton>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default AttributeCreator;\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { ApiType, Client, ProfileSection } from '@youfoundation/transit-lib';\nimport useAuth from '../auth/useAuth';\nimport useAttributes from './useAttributes';\n\nconst useProfileSections = ({ profileId }: { profileId?: string }) => {\n  const queryClient = useQueryClient();\n  const { getSharedSecret } = useAuth();\n  const { mutateAsync: removeAttributes } = useAttributes({}).removeAttributes;\n\n  const client = new Client({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const fetchSections = async ({ profileId }: { profileId: string }) => {\n    if (!profileId) {\n      return [];\n    }\n    const definitions = await client.profileDefinitionProvider.getProfileSections(profileId);\n\n    return definitions;\n  };\n\n  const saveSection = async ({\n    profileId,\n    profileSection,\n  }: {\n    profileId: string;\n    profileSection: ProfileSection;\n  }) => {\n    await client.profileDefinitionProvider.saveProfileSection(profileId, profileSection);\n    return { profileId, profileSection };\n  };\n\n  const removeSection = async ({\n    profileId,\n    profileSection,\n  }: {\n    profileId: string;\n    profileSection: ProfileSection;\n  }) => {\n    await removeAttributes({ profileId: profileId, sectionId: profileSection.sectionId });\n\n    return await client.profileDefinitionProvider.removeProfileSection(\n      profileId,\n      profileSection.sectionId\n    );\n  };\n\n  return {\n    fetchAll: useQuery(['profileSections', profileId], () => fetchSections({ profileId }), {\n      refetchOnWindowFocus: false,\n    }),\n    save: useMutation(saveSection, {\n      onMutate: async ({ profileId, profileSection: newSection }) => {\n        await queryClient.cancelQueries(['profileSections', profileId]);\n\n        const previousSections: ProfileSection[] = queryClient.getQueryData([\n          'profileSections',\n          profileId,\n        ]);\n        const newSections = previousSections.map((section) =>\n          section.sectionId === newSection.sectionId ? newSection : section\n        );\n\n        queryClient.setQueryData(['profileSections', profileId], newSections);\n\n        return { previousSections, newSection };\n      },\n      onError: (err, newData, context) => {\n        console.error(err);\n\n        queryClient.setQueryData(['profileSections', newData.profileId], context.previousSections);\n      },\n      onSettled: (data) => {\n        queryClient.invalidateQueries(['profileSections', data.profileId]);\n      },\n    }),\n    remove: useMutation(removeSection, {\n      onMutate: async ({ profileId, profileSection: toRemoveSection }) => {\n        await queryClient.cancelQueries(['profileSections', profileId]);\n\n        const previousSections: ProfileSection[] = queryClient.getQueryData([\n          'profileSections',\n          profileId,\n        ]);\n        const newSections = previousSections.filter(\n          (section) => section.sectionId !== toRemoveSection.sectionId\n        );\n\n        queryClient.setQueryData(['profileSections', profileId], newSections);\n\n        return { previousSections, toRemoveSection };\n      },\n      onError: (err, newData, context) => {\n        console.error(err);\n\n        queryClient.setQueryData(['profileSections', newData.profileId], context.previousSections);\n      },\n      onSettled: (data, err, variables) => {\n        queryClient.invalidateQueries(['profileSections', variables.profileId]);\n      },\n    }),\n  };\n};\n\nexport default useProfileSections;\n","import { ProfileSection } from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { t } from '../../helpers/i18n/dictionary';\nimport useProfileSections from '../../hooks/profiles/useProfileSections';\nimport ActionButton from '../Buttons/ActionButton';\nimport Input from '../Form/Input';\nimport Section from '../Sections/Section';\n\nconst SectionEditor = ({\n  section,\n  profileId,\n\n  onClose,\n}: {\n  section: ProfileSection;\n  profileId: string;\n  onClose: () => void;\n}) => {\n  const [sectionData, setSectionData] = useState({ ...section });\n  const {\n    save: { mutateAsync: saveSection, status: saveSectionStatus },\n    remove: { mutateAsync: removeSection, status: removeSectionState },\n  } = useProfileSections({});\n\n  const handleChange = (e: { target: { value: unknown; name: string } }) => {\n    const newSectionData = { ...sectionData };\n    newSectionData[e.target.name] = e.target.value;\n\n    setSectionData(newSectionData);\n  };\n\n  return (\n    <Section title={`${t('Edit')}: ${section.name}`} isOpaqueBg={true}>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n\n          saveSection(\n            { profileId: profileId, profileSection: sectionData },\n            {\n              onSuccess: () => {\n                onClose();\n              },\n            }\n          );\n        }}\n      >\n        <div className=\"mb-5\">\n          <label htmlFor=\"name\">{t('Name')}</label>\n          <Input id=\"name\" name=\"name\" defaultValue={section.name} onChange={handleChange} />\n        </div>\n\n        <div className=\"-m-2 flex flex-row-reverse\">\n          <ActionButton type=\"primary\" className=\"m-2\" state={saveSectionStatus}>\n            {t('Save')}\n          </ActionButton>\n          <ActionButton\n            type=\"secondary\"\n            className=\"m-2\"\n            onClick={(e) => {\n              e.preventDefault();\n              onClose();\n            }}\n          >\n            {t('Cancel')}\n          </ActionButton>\n          <ActionButton\n            type=\"remove\"\n            icon={'trash'}\n            className=\"m-2 mr-auto\"\n            state={removeSectionState}\n            onClick={() => removeSection({ profileId, profileSection: section })}\n            confirmOptions={{\n              title: t('Remove Section'),\n              body: t(\n                'Are you sure you want to remove this section, this action cannot be undone. All attributes within this section will also be removed.'\n              ),\n              buttonText: t('Remove'),\n            }}\n          >\n            {t('Remove')}\n          </ActionButton>\n        </div>\n      </form>\n    </Section>\n  );\n};\n\nexport default SectionEditor;\n","import { DataUtil, ProfileSection } from '@youfoundation/transit-lib';\nimport { useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport useAttributes from '../../../hooks/profiles/useAttributes';\nimport useProfiles from '../../../hooks/profiles/useProfiles';\n\nimport AttributeCreator from '../../Attribute/AttributeCreator/AttributeCreator';\nimport Section from '../../Sections/Section';\nimport Input from '../../Form/Input';\nimport ActionButton from '../../Buttons/ActionButton';\nimport Add from '../../Icons/Plus/Plus';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport PageMeta from '../../Layout/PageMeta/PageMeta';\nimport AttributeGroup from '../../Attribute/AttributeGroup/AttributeGroup';\nimport ProfileDialog from '../../Dialog/ProfileDialog/ProfileDialog';\nimport Heart from '../../Icons/Heart/Heart';\nimport SectionEditor from '../../SectionEditor/SectionEditor';\nimport useProfileSections from '../../../hooks/profiles/useProfileSections';\nimport Submenu from '../../SubMenu/SubMenu';\nimport LoadingParagraph from '../../Loaders/LoadingParagraph/LoadingParagraph';\nimport LoadingDetailPage from '../../Loaders/LoadingDetailPage/LoadingDetailPage';\n\nconst ProfileDetails = () => {\n  const { data: profiles, isLoading: profilesLoading } = useProfiles().fetchProfiles;\n  const { profileKey, sectionKey } = useParams();\n  const navigate = useNavigate();\n  const [isOpenEdit, setIsOpenEdit] = useState(false);\n\n  const profileDef = profiles?.find((curr) => {\n    return curr.slug === profileKey;\n  });\n  const { data: sections, isLoading: sectionsLoading } = useProfileSections({\n    profileId: profileDef?.profileId,\n  }).fetchAll;\n\n  const activeSectionKey =\n    decodeURIComponent(sectionKey) || (sections?.length ? sections[0].sectionId : '');\n\n  if (profilesLoading) {\n    return <LoadingDetailPage />;\n  }\n\n  if (!profiles) {\n    return <>{t('no-data-found')}</>;\n  }\n\n  if (!profileDef) {\n    return <>Incorrect profile path</>;\n  }\n\n  const isCreateSection = activeSectionKey === 'new' || (!sections?.length && !sectionsLoading);\n\n  const activeSection = isCreateSection\n    ? undefined\n    : sections?.find((sect) => {\n        return sect.sectionId === activeSectionKey;\n      }) || sections?.[0];\n\n  const tabItems = sections?.length\n    ? sections.map((sect, index) => {\n        return {\n          title: sect.name,\n          key: sect.sectionId,\n          path:\n            index === 0\n              ? `/owner/profile/${profileKey}`\n              : `/owner/profile/${profileKey}/${encodeURIComponent(sect.sectionId)}`,\n        };\n      })\n    : [];\n\n  return (\n    <>\n      <PageMeta\n        icon={Heart}\n        title={profileDef.name}\n        actions={\n          <>\n            <ActionButton onClick={() => setIsOpenEdit(true)} className=\"m-2\">\n              {t('Edit Profile')}\n            </ActionButton>\n          </>\n        }\n        breadCrumbs={[{ href: '/owner/profile', title: 'My Profiles' }, { title: profileKey }]}\n      />\n\n      <Submenu\n        className=\"mt-5\"\n        items={[\n          ...tabItems,\n          {\n            title: <Add className=\"h-5 w-5\" />,\n            text: `-- ${t('Create new section')} --`,\n            key: 'new',\n            path: `/owner/profile/${profileKey}/new`,\n            className: 'flex-grow-0',\n          },\n        ]}\n        isLoading={sectionsLoading}\n      />\n\n      {isCreateSection ? (\n        <ProfileSectionCreator\n          profileId={profileDef.profileId}\n          onCreate={(sectionId) => navigate(`/owner/profile/${profileKey}/${sectionId}`)}\n        />\n      ) : (\n        <ProfileSectionEditor\n          section={activeSection}\n          profileId={profileDef?.profileId}\n          key={activeSection?.sectionId}\n          isParentLoading={sectionsLoading}\n        />\n      )}\n      <ProfileDialog\n        isOpen={isOpenEdit}\n        title={t('Edit Profile: ') + profileDef.name}\n        confirmText={t('Save')}\n        defaultValue={profileDef}\n        onCancel={() => {\n          setIsOpenEdit(false);\n        }}\n        onConfirm={() => {\n          setIsOpenEdit(false);\n        }}\n      />\n    </>\n  );\n};\n\nconst ProfileSectionCreator = ({\n  profileId,\n  onCreate,\n}: {\n  profileId: string;\n  onCreate: (sectionId: string) => void;\n}) => {\n  const {\n    fetchAll: { data: profileSections },\n    save: { mutateAsync: saveProfileSection, status: saveProfileSectionStatus },\n  } = useProfileSections({ profileId: profileId });\n  const [name, setName] = useState('');\n\n  const createSection: React.FormEventHandler<HTMLFormElement> = async (e) => {\n    e.preventDefault();\n\n    const sectionId = DataUtil.getNewId();\n\n    const newProfileSection = {\n      sectionId: sectionId,\n      attributes: [],\n      priority: profileSections?.length\n        ? Math.max(...profileSections.map((sect) => sect.priority)) + 1000\n        : 1000,\n      isSystemSection: false,\n      name: name,\n    };\n\n    await saveProfileSection({\n      profileId: profileId,\n      profileSection: newProfileSection,\n    });\n    onCreate(sectionId);\n  };\n\n  return (\n    <Section title=\"New: section\" isOpaqueBg={true}>\n      <form onSubmit={createSection}>\n        <div className=\"mb-5\">\n          <label htmlFor=\"name\">{t('Name')}</label>\n          <Input\n            id=\"name\"\n            name=\"sectionName\"\n            onChange={(e) => {\n              setName(e.target.value);\n            }}\n            required\n          />\n        </div>\n        <div className=\"flex flex-row\">\n          <ActionButton className=\"ml-auto\" state={saveProfileSectionStatus}>\n            {t('Add section')}\n          </ActionButton>\n        </div>\n      </form>\n    </Section>\n  );\n};\n\nconst ProfileSectionEditor = ({\n  section,\n  profileId,\n  isParentLoading,\n}: {\n  section: ProfileSection;\n  profileId: string;\n  isParentLoading: boolean;\n}) => {\n  const { data: attributes, isLoading } = useAttributes({\n    profileId: profileId,\n    sectionId: section?.sectionId,\n  }).fetch;\n  const [isEditActive, setIsEditActive] = useState(false);\n\n  if (!attributes || isLoading || isParentLoading) {\n    return (\n      <div className=\"-m-5 pt-5\">\n        <LoadingParagraph className=\"m-5 h-20\" />\n        <LoadingParagraph className=\"m-5 h-20\" />\n        <LoadingParagraph className=\"m-5 h-20\" />\n        <LoadingParagraph className=\"m-5 h-20\" />\n      </div>\n    );\n  }\n\n  // Find unique types\n  const types: string[] = attributes.reduce((prevVal, curVal) => {\n    if (prevVal.indexOf(curVal.type) !== -1) {\n      return prevVal;\n    }\n    return [...prevVal, curVal.type];\n  }, [] as string[]);\n\n  // Find matching attributes for those types\n  const groupedAttributes = types.map((currType) => {\n    const matchingAttributes = attributes.filter((attr) => attr.type === currType);\n    const lowestPrio = Math.min(...matchingAttributes.map((attr) => attr.priority));\n\n    return {\n      name: matchingAttributes[0].typeDefinition.name,\n      attributes: matchingAttributes,\n      priority: lowestPrio,\n    };\n  });\n  groupedAttributes.sort((a, b) => a.priority - b.priority);\n\n  const highestPriority = attributes.reduce((prevValue, currValue) => {\n    if (prevValue > currValue.priority) {\n      return prevValue;\n    } else {\n      return currValue.priority;\n    }\n  }, 0);\n\n  return (\n    <div className=\"pt-5\">\n      {section ? (\n        isEditActive ? (\n          <SectionEditor\n            key={section.sectionId}\n            section={section}\n            profileId={profileId}\n            onClose={() => setIsEditActive(false)}\n          />\n        ) : (\n          <section className=\"items-center bg-slate-50 p-3 dark:bg-slate-800 sm:flex sm:flex-row\">\n            <p className=\"sm:mr-2\">{section.name}</p>\n            <ActionButton\n              type=\"secondary\"\n              className=\"ml-auto\"\n              onClick={() => setIsEditActive(true)}\n            >\n              {t('Edit Section')}\n            </ActionButton>\n          </section>\n        )\n      ) : null}\n      {attributes.length ? (\n        groupedAttributes.map((attrGroup) => {\n          return (\n            <AttributeGroup\n              groupTitle={attrGroup.name}\n              attributes={attrGroup.attributes}\n              key={attrGroup.name}\n              groupedAttributes={groupedAttributes}\n            />\n          );\n        })\n      ) : (\n        <div className=\"py-5\">{t('section-empty-attributes')}</div>\n      )}\n      <AttributeCreator\n        profileId={profileId}\n        sectionId={section.sectionId}\n        newPriority={highestPriority + 1000}\n      />\n    </div>\n  );\n};\n\nexport default ProfileDetails;\n","export const convertTextToSlug = (text: string) => {\n  return text.split(' ').join('-').toLowerCase();\n};\n\nexport const stringify = (obj: unknown) => {\n  return Object.keys(obj)\n    .map((key) => key + '=' + obj[key])\n    .join('&');\n};\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { ApiType, Client, ProfileDefinition } from '@youfoundation/transit-lib';\nimport { convertTextToSlug } from '../../helpers/common';\nimport useAuth from '../auth/useAuth';\n\nexport interface ProfileDefinitionVm extends ProfileDefinition {\n  slug: string;\n}\n\nconst useProfiles = () => {\n  const queryClient = useQueryClient();\n  const { getSharedSecret } = useAuth();\n  const client = new Client({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const fetchAll = async () => {\n    const definitions = await (\n      await client.profileDefinitionProvider.getProfileDefinitions()\n    ).map((def) => {\n      return {\n        ...def,\n        slug: convertTextToSlug(def.name),\n      } as ProfileDefinitionVm;\n    });\n\n    return definitions;\n  };\n\n  const saveProfile = async (profileDef: ProfileDefinition) => {\n    return await client.profileDefinitionProvider.saveProfileDefinition(profileDef);\n  };\n\n  return {\n    fetchProfiles: useQuery(['profiles'], () => fetchAll(), {\n      refetchOnWindowFocus: false,\n    }),\n    saveProfile: useMutation(saveProfile, {\n      onMutate: async (newProfile) => {\n        await queryClient.cancelQueries(['profiles']);\n\n        const previousProfiles: ProfileDefinitionVm[] = queryClient.getQueryData(['profiles']);\n        const newProfiles = previousProfiles.map((profile) =>\n          profile.profileId === newProfile.profileId\n            ? ({ ...newProfile, slug: convertTextToSlug(newProfile.name) } as ProfileDefinitionVm)\n            : profile\n        );\n\n        queryClient.setQueryData(['profiles'], newProfiles);\n\n        return { previousProfiles, newProfile };\n      },\n      onError: (err, newProfile, context) => {\n        console.error(err);\n\n        queryClient.setQueryData(['profiles'], context.previousProfiles);\n      },\n      onSettled: () => {\n        queryClient.invalidateQueries(['profiles']);\n      },\n    }),\n  };\n};\n\nexport default useProfiles;\n"],"names":["title","confirmText","isOpen","defaultValue","onConfirm","onCancel","target","usePortal","useProfiles","saveProfile","saveProfileDefinition","mutateAsync","saveProfileDefinitionStatus","status","useState","newProfileDef","setNewProfileDef","dialog","onClose","onSubmit","e","preventDefault","className","htmlFor","t","id","name","onChange","value","required","description","state","icon","type","onClick","createPortal","items","isLoading","navigate","useNavigate","forceMobileView","length","map","item","isActive","to","path","end","key","window","location","pathname","text","profileId","sectionId","newPriority","setIsActive","attribute","setAttribute","useAttribute","save","saveAttribute","mutate","isError","isSuccess","discard","undefined","Section","typeDefinition","isOpaqueBg","Select","typeId","targetObj","Object","values","AttributeDefinitions","find","curr","toString","priority","data","acl","requiredSecurityGroup","SecurityGroupType","setType","def","AttributeFields","newAttr","ActionButton","onSuccess","queryClient","useQueryClient","getSharedSecret","useAuth","removeAttributes","useAttributes","client","Client","api","ApiType","sharedSecret","fetchSections","profileDefinitionProvider","getProfileSections","definitions","saveSection","profileSection","saveProfileSection","removeSection","removeProfileSection","fetchAll","useQuery","refetchOnWindowFocus","useMutation","onMutate","newSection","cancelQueries","previousSections","getQueryData","newSections","section","setQueryData","onError","err","newData","context","console","error","onSettled","invalidateQueries","remove","toRemoveSection","filter","variables","sectionData","setSectionData","useProfileSections","saveSectionStatus","removeSectionState","Input","newSectionData","confirmOptions","body","buttonText","ProfileSectionCreator","onCreate","profileSections","saveProfileSectionStatus","setName","createSection","DataUtil","newProfileSection","attributes","Math","max","sect","isSystemSection","ProfileSectionEditor","isParentLoading","fetch","isEditActive","setIsEditActive","LoadingParagraph","groupedAttributes","reduce","prevVal","curVal","indexOf","currType","matchingAttributes","attr","lowestPrio","min","sort","a","b","highestPriority","prevValue","currValue","attrGroup","AttributeGroup","groupTitle","fetchProfiles","profiles","profilesLoading","useParams","profileKey","sectionKey","isOpenEdit","setIsOpenEdit","profileDef","slug","sections","sectionsLoading","activeSectionKey","decodeURIComponent","LoadingDetailPage","isCreateSection","activeSection","tabItems","index","encodeURIComponent","PageMeta","Heart","actions","breadCrumbs","href","ProfileDialog","convertTextToSlug","split","join","toLowerCase","stringify","obj","keys","getProfileDefinitions","newProfile","previousProfiles","newProfiles","profile"],"sourceRoot":""}