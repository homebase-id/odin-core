"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[462],{9636:function(e,n,r){var t=r(1413),i=r(885),o=r(2791),s=r(4164),a=r(4990),c=r(3412),u=r(3431),l=r(9072),f=r(6916),d=r(2465),p=r(6123),m=r(184);n.Z=function(e){var n=e.title,r=e.confirmText,h=e.isOpen,x=e.defaultValue,j=e.onConfirm,v=e.onCancel,b=(0,c.Z)("modal-container"),Z=(0,u.Z)().saveProfile,g=Z.mutate,y=Z.status,w=(0,o.useState)((0,t.Z)({},x)),O=(0,i.Z)(w,2),P=O[0],k=O[1];if(!h)return null;var D=(0,m.jsx)(p.Z,{title:n,onClose:v,children:(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),console.log("shall edit/create",P),g({profileDef:P},{onSuccess:function(){return j()}}),!1},children:[(0,m.jsxs)("div",{className:"mb-5",children:[(0,m.jsx)("label",{htmlFor:"name",children:(0,a.t)("Name")}),(0,m.jsx)(f.Z,{id:"name",name:"profileName",defaultValue:P.name,onChange:function(e){k((0,t.Z)((0,t.Z)({},P),{},{name:e.target.value}))},required:!0})]}),(0,m.jsxs)("div",{className:"mb-5",children:[(0,m.jsx)("label",{htmlFor:"name",children:(0,a.t)("Description")}),(0,m.jsx)(d.Z,{id:"description",name:"profileDescription",defaultValue:P.description,onChange:function(e){k((0,t.Z)((0,t.Z)({},P),{},{description:e.target.value}))},required:!0})]}),(0,m.jsxs)("div",{className:"-mx-2 py-3 sm:flex sm:flex-row-reverse",children:[(0,m.jsx)(l.Z,{className:"mx-2",state:y,icon:"send",children:r||(0,a.t)("Add Profile")}),(0,m.jsx)(l.Z,{className:"mx-2",type:"secondary",onClick:v,children:(0,a.t)("Cancel")})]})]})})});return(0,s.createPortal)(D,b)}},7262:function(e,n,r){r.r(n);var t=r(885),i=r(2791),o=r(3504),s=r(4990),a=r(3431),c=r(9072),u=r(9636),l=r(4655),f=r(3004),d=r(184),p=function(e){var n=e.profileDef;return(0,d.jsx)(o.rU,{to:n.slug,className:"contents",children:(0,d.jsxs)("div",{className:"h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:bg-slate-100 dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-slate-700",children:[(0,d.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:n.name}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsx)("p",{children:n.description})})]})})};n.default=function(){var e=(0,a.Z)().fetchProfiles,n=e.data,r=e.isLoading,o=(0,i.useState)(!1),m=(0,t.Z)(o,2),h=m[0],x=m[1];return r?(0,d.jsx)(d.Fragment,{children:"Loading"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("section",{children:[(0,d.jsx)(f.Z,{icon:l.Z,title:(0,s.t)("My Profiles"),actions:(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(c.Z,{icon:"plus",onClick:function(){return x(!0)},children:(0,s.t)("Add Profile")})})}),(0,d.jsx)("div",{className:"-m-2 flex flex-row items-stretch",children:null===n||void 0===n?void 0:n.definitions.map((function(e){return(0,d.jsx)("div",{className:"w-1/4 p-2",children:(0,d.jsx)(p,{profileDef:e})},e.name)}))})]}),(0,d.jsx)(u.Z,{isOpen:h,title:(0,s.t)("New Profile"),onCancel:function(){x(!1)},onConfirm:function(){x(!1)}})]})}},3990:function(e,n,r){r.d(n,{P:function(){return i},V:function(){return t}});var t=function(e){return e.split(" ").join("-").toLowerCase()},i=function(e){return Object.keys(e).map((function(n){return n+"="+e[n]})).join("&")}},3431:function(e,n,r){var t=r(4165),i=r(1413),o=r(5861),s=r(7408),a=r(1803),c=r(3990),u=r(6117);n.Z=function(){var e=(0,s.useQueryClient)(),n=(0,u.Z)().getSharedSecret,r=new a.KU({api:a.Ii.Owner,sharedSecret:n()}),l=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.profileDefinitionProvider.getProfileDefinitions();case 2:return e.next=4,e.sent.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{slug:(0,c.V)(e.name)})}));case 4:return n=e.sent,e.abrupt("return",{definitions:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.profileDef,e.next=3,r.profileDefinitionProvider.saveProfileDefinition(i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetchProfiles:(0,s.useQuery)(["profiles"],(function(){return l()}),{refetchOnWindowFocus:!1}),saveProfile:(0,s.useMutation)(f,{onSuccess:function(){e.invalidateQueries(["profiles"])},onError:function(e){console.error(e)}})}}},4942:function(e,n,r){function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}r.d(n,{Z:function(){return t}})},1413:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(4942);function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}}}]);
//# sourceMappingURL=462.906c58e9.chunk.js.map