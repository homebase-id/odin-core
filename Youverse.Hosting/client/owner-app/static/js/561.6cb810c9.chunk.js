"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[561],{808:function(e,n,r){var a=r(2982),t=r(4165),s=r(5861),i=r(1413),l=r(885),o=r(2791),c=r(4164),u=r(4990),d=r(7480),m=r(6770),v=r(3412),f=r(2562),h=r(9072),x=r(6916),p=r(6990),g=r(2284),Z=r(2465),b=r(6123),j=r(184);n.Z=function(e){var n,r=e.title,N=e.confirmText,y=e.isOpen,w=e.defaultValue,k=e.onConfirm,C=e.onCancel,D=(0,v.Z)("modal-container"),S=(0,d.Z)({}).createOrUpdate,I=S.mutateAsync,F=S.status,G=(0,m.Z)().fetch.data,R=(0,o.useState)((0,i.Z)({driveGrants:w.driveGrants||[]},w)),V=(0,l.Z)(R,2),L=V[0],O=V[1];if((0,o.useEffect)((function(){y&&O((0,i.Z)({driveGrants:w.driveGrants||[]},w))}),[y]),!y)return null;var A=(0,j.jsx)(b.Z,{title:r,onClose:C,size:"4xlarge",children:(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("form",{onSubmit:function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,I(L);case 3:return k(),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("label",{htmlFor:"name",children:(0,u.t)("Name")}),(0,j.jsx)(x.Z,{id:"name",name:"circleName",defaultValue:L.name,onChange:function(e){O((0,i.Z)((0,i.Z)({},L),{},{name:e.target.value}))},required:!0})]}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("label",{htmlFor:"name",children:(0,u.t)("Description")}),(0,j.jsx)(Z.Z,{id:"description",name:"circleDescription",defaultValue:L.description,onChange:function(e){O((0,i.Z)((0,i.Z)({},L),{},{description:e.target.value}))},required:!0})]}),(0,j.jsxs)("div",{className:"mb-5 flex flex-row",children:[(0,j.jsx)("label",{htmlFor:"name",className:"my-auto mr-2",children:(0,u.t)("Permissions")}),(0,j.jsx)(p.Z,{className:"ml-auto",permissionLevels:f.WW,defaultValue:null!==(n=L.permissions.keys)&&void 0!==n?n:[0],onChange:function(e){O((0,i.Z)((0,i.Z)({},L),{},{permissions:{keys:e}}))}})]}),null!==G&&void 0!==G&&G.length?(0,j.jsxs)("div",{className:"my-7",children:[(0,j.jsx)("h2",{className:"mb-4 text-lg",children:"Drive Permissions:"}),G.map((function(e,n){var r,t,s;return(0,j.jsxs)("div",{className:"mb-2 flex flex-row",children:[(0,j.jsx)("label",{htmlFor:"".concat(e.targetDriveInfo.alias,"-").concat(e.targetDriveInfo.type),className:"my-auto mr-2",children:e.name}),(0,j.jsx)(g.Z,{className:"ml-auto",permissionLevels:f.Ac,defaultValue:null!==(r=null===(t=L.driveGrants)||void 0===t||null===(s=t.find((function(n){return n.permissionedDrive.drive.alias===e.targetDriveInfo.alias&&n.permissionedDrive.drive.type===e.targetDriveInfo.type})))||void 0===s?void 0:s.permissionedDrive.permission)&&void 0!==r?r:0,onChange:function(n){var r;n>0?O((0,i.Z)((0,i.Z)({},L),{},{driveGrants:[].concat((0,a.Z)((null===L||void 0===L||null===(r=L.driveGrants)||void 0===r?void 0:r.filter((function(n){var r,a;return(null===(r=n.permissionedDrive)||void 0===r?void 0:r.drive.alias)!==e.targetDriveInfo.alias||(null===(a=n.permissionedDrive)||void 0===a?void 0:a.drive.type)!==e.targetDriveInfo.type})))||[]),[{permissionedDrive:{drive:e.targetDriveInfo,permission:n}}])})):O((0,i.Z)((0,i.Z)({},L),{},{driveGrants:(0,a.Z)(L.driveGrants.filter((function(n){return n.permissionedDrive.drive.alias!==e.targetDriveInfo.alias||n.permissionedDrive.drive.type!==e.targetDriveInfo.type})))}))}})]},n)}))]}):null,(0,j.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,j.jsx)(h.Z,{className:"m-2",state:F,icon:"send",children:N||(0,u.t)("Add Circle")}),(0,j.jsx)(h.Z,{className:"m-2",type:"secondary",onClick:function(){return C()},children:(0,u.t)("Cancel")})]})]})})});return(0,c.createPortal)(A,D)}},6916:function(e,n,r){var a=r(1413),t=r(184);n.Z=function(e){var n;return(0,t.jsx)("input",(0,a.Z)((0,a.Z)({},e),{},{type:null!==(n=e.type)&&void 0!==n?n:"input",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},6990:function(e,n,r){var a=r(2982),t=r(885),s=r(2791),i=r(1261),l=r(4648),o=r(245),c=r(184),u=function(e){var n=e.className,r=e.isChecked,a=e.children,t=e.onChange;return(0,c.jsxs)("li",{className:"flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(n),onClick:t,children:[(0,c.jsx)(l.Z,{className:"my-auto mr-3 h-4 w-4 flex-shrink-0 ".concat(r?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,c.jsx)("span",{className:"mr-auto block h-full py-1",children:a})]})};n.Z=function(e){var n,r,l=e.className,d=e.permissionLevels,m=e.onChange,v=e.defaultValue,f=(0,s.useState)(!1),h=(0,t.Z)(f,2),x=h[0],p=h[1],g=(0,s.useState)(v),Z=(0,t.Z)(g,2),b=Z[0],j=Z[1],N=(0,s.useRef)(null);(0,i.Z)(N,(function(){return p(!1)}));var y=(null===v||void 0===v?void 0:v.length)>=2?"Multiple":null!==(n=null!==v&&void 0!==v&&v[0]?null===(r=d.find((function(e){return e.value===v[0]})))||void 0===r?void 0:r.name:d[0].name)&&void 0!==n?n:d[0].name,w=function(e){j(e),m&&m(e)};return(0,c.jsx)("div",{className:null!==l&&void 0!==l?l:"",children:(0,c.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return p(!x)},ref:N,children:[(0,c.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,c.jsx)("span",{className:"my-auto mr-2 select-none",children:y})," ",(0,c.jsx)(o.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,c.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(x?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:d.map((function(e){return(0,c.jsx)(u,{isChecked:b.some((function(n){return n===e.value}))||0===b.length&&0===e.value,onChange:function(){return b.some((function(n){return n===e.value}))?w(b.filter((function(n){return n!==e.value}))):0!==e.value?w([].concat((0,a.Z)(b),[e.value])):w([])},children:e.name},e.value)}))})]})})}},2284:function(e,n,r){var a=r(885),t=r(2791),s=r(1261),i=r(4648),l=r(245),o=r(184),c=function(e){var n=e.className,r=e.isChecked,a=e.children,t=e.onChange;return(0,o.jsxs)("li",{className:"flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ".concat(n),onClick:t,children:[(0,o.jsx)(i.Z,{className:"my-auto mr-3 h-4 w-4 flex-shrink-0  ".concat(r?"text-slate-700 dark:text-slate-200":"text-transparent")})," ",(0,o.jsx)("span",{className:"mr-auto block h-full py-1",children:a})]})};n.Z=function(e){var n=e.className,r=e.permissionLevels,i=e.onChange,u=e.defaultValue,d=(0,t.useState)(!1),m=(0,a.Z)(d,2),v=m[0],f=m[1],h=(0,t.useState)(u),x=(0,a.Z)(h,2),p=x[0],g=x[1],Z=(0,t.useRef)(null);(0,s.Z)(Z,(function(){return f(!1)}));var b=r.reduce((function(e,n){return n.value>e.value&&n.value<=u?n:e}),r[0]),j=function(e){g(e),i(e)};return(0,o.jsx)("div",{className:null!==n&&void 0!==n?n:"",children:(0,o.jsxs)("div",{className:"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800",onClick:function(){return f(!v)},ref:Z,children:[(0,o.jsxs)("div",{className:"flex min-w-[6rem] flex-row py-1 px-2",children:[(0,o.jsx)("span",{className:"my-auto mr-2 select-none",children:b.name})," ",(0,o.jsx)(l.Z,{className:"my-auto ml-auto h-2 w-2 rotate-90"})]}),(0,o.jsx)("ul",{className:"absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ".concat(v?"z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700":"max-h-0"),children:r.map((function(e){return(0,o.jsx)(c,{isChecked:0===e.value?p===e.value:p>=e.value,onChange:function(){return p!==e.value?j(e.value):j(0)},children:e.name},e.value)}))})]})})}},2465:function(e,n,r){var a=r(1413),t=r(184);n.Z=function(e){return(0,t.jsx)("textarea",(0,a.Z)((0,a.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},245:function(e,n,r){var a=r(184);n.Z=function(e){var n=e.className;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor",className:n,children:(0,a.jsx)("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})}},6237:function(e,n,r){r.r(n);var a=r(885),t=r(1803),s=r(2791),i=r(3504),l=r(4990),o=r(4395),c=r(715),u=r(9072),d=r(808),m=r(3004),v=r(1191),f=r(184),h=function(e){var n=e.circleDefinintion,r=e.className;return(0,f.jsx)("div",{className:"".concat(r," ").concat(n.disabled?"opacity-50":""),children:(0,f.jsx)(i.rU,{to:"/owner/circles/".concat(encodeURIComponent(n.id)),className:"contents",children:(0,f.jsxs)("div",{className:"h-full rounded-md border-[1px] border-gray-200 border-opacity-60 bg-white transition-colors hover:bg-slate-100 dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-slate-700",children:[(0,f.jsx)("h2",{className:"bg-slate-100 p-4 text-xl dark:bg-slate-700 dark:text-slate-200",children:n.name}),(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsx)("p",{children:n.description}),(0,f.jsxs)("p",{className:"text-xs",children:["Created on: ",new Date(n.created).toLocaleDateString()]})]})]})})})};n.default=function(){var e=(0,o.Z)().fetch,n=e.data,r=e.isLoading,i=(0,s.useState)(!1),x=(0,a.Z)(i,2),p=x[0],g=x[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{icon:c.Z,title:(0,l.t)("My Circles"),actions:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(u.Z,{icon:"plus",className:"m-4",onClick:function(){return g(!0)},children:(0,l.t)("Add Circle")})})}),(0,f.jsx)("section",{className:"-my-4",children:r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{className:"m-4 h-10"}),(0,f.jsx)(v.Z,{className:"m-4 h-10"}),(0,f.jsx)(v.Z,{className:"m-4 h-10"})]}):(0,f.jsx)(f.Fragment,{children:n?n.map((function(e){return(0,f.jsx)(h,{circleDefinintion:e,className:"py-4"},e.id)})):null})}),(0,f.jsx)(d.Z,{title:(0,l.t)("Create new Circle"),isOpen:p,defaultValue:{name:"",description:"",driveGrants:[{permissionedDrive:{drive:(0,t.H3)(t.P.StandardProfileId),permission:4}}],permissions:{keys:[10]}},onConfirm:function(){g(!1)},onCancel:function(){g(!1)}})]})}},4395:function(e,n,r){var a=r(4165),t=r(5861),s=r(7408),i=r(3766),l=r(6117);n.Z=function(){var e=(0,l.Z)().getSharedSecret,n=i.k.getInstance(e()),r=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCircles();case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.sort((function(e,n){return(e.disabled?1:0)-(n.disabled?1:0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["circles"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},6770:function(e,n,r){var a=r(4165),t=r(5861),s=r(7408),i=r(1803),l=r(6117);n.Z=function(){var e=(0,l.Z)().getSharedSecret,n=new i.AO({api:i.Ii.Owner,sharedSecret:e()}),r=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.driveProvider.GetDrives({pageNumber:1,pageSize:100});case 2:return e.next=4,e.sent.results;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["drives"],(function(){return r()}),{refetchOnWindowFocus:!1})}}},2562:function(e,n,r){r.d(n,{Ac:function(){return t},WW:function(){return s},c$:function(){return i}});var a=r(4990),t=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Reader"),value:1},{name:(0,a.t)("Editor"),value:3}],s=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Read Connections"),value:10},{name:(0,a.t)("Read Circle Members"),value:50}],i=[{name:(0,a.t)("None"),value:0},{name:(0,a.t)("Read Connections"),value:10},{name:(0,a.t)("Manage Connection Requests"),value:30},{name:(0,a.t)("Read Circle Members"),value:50}]}}]);
//# sourceMappingURL=561.6cb810c9.chunk.js.map