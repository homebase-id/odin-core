"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[576],{3756:function(e,t,s){var a=s(9439),n=s(2791),r=s(4990),i=s(9747),l=s(184);t.Z=function(e){var t=e.className,s=e.state,o=e.error,c=(0,n.useState)(null),m=(0,a.Z)(c,2),d=m[0],u=m[1],p=(0,n.useState)(new Date),x=(0,a.Z)(p,2),v=x[0],f=x[1];if((0,n.useEffect)((function(){"success"===s&&u(new Date)}),[s]),(0,n.useEffect)((function(){var e=setTimeout((function(){f(new Date)}),3e4);return function(){clearTimeout(e)}}),[v]),"loading"===s)return(0,l.jsx)("p",{className:"".concat(t," text-sm"),children:"Saving..."});if("error"===s)return(0,l.jsx)(i.Z,{type:"critical",className:t,children:o instanceof Error?o.message:(0,r.t)("Something went wrong")});if(!d)return null;var h=v.getTime()-d.getTime(),j=d?h<=6e4?"a few seconds ago":h<=6e5?"a few minutes ago":d.toLocaleString():"";return j?(0,l.jsxs)("p",{className:"".concat(t," text-sm"),children:["Last saved ",j]}):null}},9080:function(e,t,s){var a=s(6907),n=s(3504),r=s(3756),i=s(184);t.Z=function(e){var t=e.title,s=e.actions,l=e.saveStatus,o=e.breadCrumbs,c=e.icon;return(0,i.jsx)("section",{className:"-mx-5 -mt-4 mb-10 border-b-2 border-gray-100 bg-slate-50 py-4 pr-5 pl-10 dark:border-gray-700 dark:bg-slate-800 sm:-mx-10 sm:-mt-8 sm:py-8 sm:px-10",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,i.jsxs)("div",{className:"flex-col",children:[o&&(0,i.jsx)("ul",{className:"mb-2 hidden flex-row sm:flex",children:o.map((function(e,t){return(0,i.jsx)("li",{className:"mr-2",children:e.href?(0,i.jsxs)(n.rU,{to:e.href,className:"",children:[e.title,(0,i.jsx)("span",{className:"ml-2",children:">"})]}):(0,i.jsx)("span",{className:"text-slate-500",children:e.title})},t)}))}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h1",{className:"mb-5 flex flex-row text-4xl dark:text-white",children:[c&&c({className:"h-8 w-8 my-auto mr-4"})," ",t]}),(0,i.jsx)(a.ql,{children:(0,i.jsxs)("title",{children:["object"!==typeof t&&"".concat(t)||window.location.pathname.split("/").pop()," ","| Owner console"]})})]})]}),(0,i.jsxs)("div",{className:"ml-auto",children:[(0,i.jsx)("div",{className:"-m-2 flex flex-col flex-wrap justify-end sm:flex-row sm:items-center",children:s}),l&&(0,i.jsx)(r.Z,{className:"mt-1",state:l})]})]})})}},2576:function(e,t,s){s.r(t);var a=s(6871),n=s(4990),r=s(630),i=s(9747),l=s(2042),o=s(2851),c=s(8990),m=s(9080),d=s(1869),u=s(8321),p=s(1434),x=s(184);t.default=function(){var e,t,s,v,f,h,j=(0,a.UO)().appKey,y=decodeURIComponent(j),g=(0,r.Z)({appId:y}),w=g.fetch,N=w.data,b=w.isLoading,k=g.revokeApp,Z=k.mutate,A=k.status,R=k.error,S=g.allowApp,T=S.mutate,C=S.status,O=S.error;return b&&x.Fragment,N?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.Z,{error:R}),(0,x.jsx)(l.Z,{error:O}),(0,x.jsx)(m.Z,{icon:c.Z,title:"".concat(N.name),breadCrumbs:[{href:"/owner/apps",title:"My apps"},{title:null!==(e=N.name)&&void 0!==e?e:""}],actions:(0,x.jsx)(x.Fragment,{children:N.isRevoked?(0,x.jsx)(o.Z,{type:"primary",className:"m-2 my-auto",onClick:function(){return T({appId:y})},state:C,confirmOptions:{title:(0,n.t)("Restore App"),buttonText:(0,n.t)("Restore"),body:"".concat((0,n.t)("Are you sure you want to restore")," ").concat(N.name," ").concat((0,n.t)("and allow access to your identity"))},children:"Restore app"}):(0,x.jsx)(o.Z,{type:"remove",className:"m-2 my-auto",onClick:function(){return Z({appId:y})},state:A,confirmOptions:{title:(0,n.t)("Revoke App"),buttonText:(0,n.t)("Revoke"),body:"".concat((0,n.t)("Are you sure you want to revoke")," ").concat(N.name," ").concat((0,n.t)("from all access to your identity"))},children:"Revoke app"})})}),N.isRevoked&&(0,x.jsx)(i.Z,{type:"critical",title:(0,n.t)("App is revoked"),className:"mb-5",children:(0,n.t)("This app is revoked, it no longer has the access provided")}),null!==(t=N.grant.permissionSet)&&void 0!==t&&t.keys?(0,x.jsx)(p.Z,{title:(0,n.t)("Access"),isOpaqueBg:!0,children:(0,x.jsx)("div",{className:"-my-4",children:N.grant.permissionSet.keys.map((function(e){return(0,x.jsx)(u.Z,{permission:e,className:"my-4"},"".concat(e))}))})}):null,(0,x.jsx)(p.Z,{title:(0,n.t)("Access on the following drives"),isOpaqueBg:!0,children:null!==(s=N.grant)&&void 0!==s&&null!==(v=s.driveGrants)&&void 0!==v&&v.length?(0,x.jsx)("div",{className:"-my-4",children:null===(f=N.grant)||void 0===f||null===(h=f.driveGrants)||void 0===h?void 0:h.map((function(e){var t,s,a,n;return(0,x.jsx)(d.Z,{driveGrant:e,className:"my-4"},"".concat(null===e||void 0===e||null===(t=e.permissionedDrive)||void 0===t||null===(s=t.drive)||void 0===s?void 0:s.alias,"-").concat(null===e||void 0===e||null===(a=e.permissionedDrive)||void 0===a||null===(n=a.drive)||void 0===n?void 0:n.type))}))}):(0,x.jsx)("div",{className:"flex flex-row",children:(0,x.jsx)("p",{className:"my-auto",children:(0,n.t)("This app doesn't have any access")})})})]}):(0,x.jsx)(x.Fragment,{children:"No matching app found"})}}}]);
//# sourceMappingURL=576.ec317dc7.chunk.js.map