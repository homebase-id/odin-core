{"version":3,"file":"static/js/604.dc3a19f8.chunk.js","mappings":"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","sources":["components/Buttons/SaveStatus.tsx","components/Form/PermissionFlagsEditor.tsx","components/Form/PermissionLevelEditor.tsx","components/Icons/Check/Check.tsx","components/Icons/Triangle/Triangle.tsx","components/Layout/PageMeta/PageMeta.tsx","components/Sections/Section.tsx","components/Templates/Settings/Settings.tsx","hooks/clickedOutsideTrigger/useClickedOutsideTrigger.ts","hooks/drives/useDrives.ts","provider/permission/permissionLevels.ts","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst seconds = 60000;\nconst minutes = 600000;\n\nconst SaveStatus = ({\n  className,\n  state,\n}: {\n  className: string;\n  state: 'error' | 'idle' | 'loading' | 'success';\n}) => {\n  const [lastSave, setLastSave] = useState<Date>(null);\n  const [now, setNow] = useState<Date>(new Date());\n\n  useEffect(() => {\n    if (state === 'success') {\n      setLastSave(new Date());\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setNow(new Date());\n    }, 30000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [now]);\n\n  if (!lastSave) {\n    return null;\n  }\n\n  const diff = now.getTime() - lastSave.getTime();\n  const text = lastSave\n    ? diff <= seconds\n      ? 'a few seconds ago'\n      : diff <= minutes\n      ? 'a few minutes ago'\n      : lastSave.toLocaleString()\n    : '';\n\n  return text ? <p className={`${className} text-sm`}>Last saved {text}</p> : null;\n};\n\nexport default SaveStatus;\n","import { ReactNode, useRef, useState } from 'react';\nimport useOutsideTrigger from '../../hooks/clickedOutsideTrigger/useClickedOutsideTrigger';\nimport Check from '../Icons/Check/Check';\nimport Triangle from '../Icons/Triangle/Triangle';\n\nconst PermissionFlagsEditor = ({\n  className,\n  permissionLevels,\n  onChange,\n  defaultValue,\n}: {\n  className: string;\n  permissionLevels: { name: string; value: number }[];\n  onChange?: (value: number[]) => void;\n  defaultValue: number[];\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [value, setInnerValue] = useState(defaultValue);\n  const wrapperRef = useRef(null);\n  useOutsideTrigger(wrapperRef, () => setIsOpen(false));\n\n  const currentValue =\n    defaultValue?.length >= 2\n      ? 'Multiple'\n      : (defaultValue?.[0]\n          ? permissionLevels.find((level) => level.value === defaultValue[0])?.name\n          : permissionLevels[0].name) ?? permissionLevels[0].name;\n\n  const setValue = (value: number[]) => {\n    setInnerValue(value);\n    onChange && onChange(value);\n  };\n\n  return (\n    <div className={className ?? ''}>\n      <div\n        className=\"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800\"\n        onClick={() => setIsOpen(!isOpen)}\n        ref={wrapperRef}\n      >\n        <div className=\"flex min-w-[6rem] flex-row py-1 px-2\">\n          <span className=\"my-auto mr-2 select-none\">{currentValue}</span>{' '}\n          <Triangle className=\"my-auto ml-auto h-2 w-2 rotate-90\" />\n        </div>\n        <ul\n          className={`absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ${\n            isOpen\n              ? 'z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700'\n              : 'max-h-0'\n          }`}\n        >\n          {permissionLevels.map((level) => (\n            <Option\n              key={level.value}\n              isChecked={\n                value.some((val) => val === level.value) ||\n                (value.length === 0 && level.value === 0)\n              }\n              onChange={() =>\n                value.some((val) => val === level.value)\n                  ? setValue(value.filter((val) => val !== level.value))\n                  : level.value !== 0\n                  ? setValue([...value, level.value])\n                  : setValue([])\n              }\n            >\n              {level.name}\n            </Option>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Option = ({\n  className,\n  isChecked,\n  children,\n  onChange,\n}: {\n  className?: string;\n  isChecked: boolean;\n  children: ReactNode;\n  onChange: () => void;\n}) => {\n  return (\n    <li\n      className={`flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ${className}`}\n      onClick={onChange}\n    >\n      <Check\n        className={`my-auto mr-3 h-4 w-4 ${\n          isChecked ? 'text-slate-700 dark:text-slate-200' : 'text-transparent'\n        }`}\n      />{' '}\n      <span className={`mr-auto block h-full py-1`}>{children}</span>\n    </li>\n  );\n};\n\nexport default PermissionFlagsEditor;\n","import { ReactNode, useRef, useState } from 'react';\nimport useOutsideTrigger from '../../hooks/clickedOutsideTrigger/useClickedOutsideTrigger';\nimport Check from '../Icons/Check/Check';\nimport Triangle from '../Icons/Triangle/Triangle';\n\nconst PermissionLevelEditor = ({\n  className,\n  permissionLevels,\n  onChange,\n  defaultValue,\n}: {\n  className: string;\n  permissionLevels: { name: string; value: number }[];\n  onChange?: (value: number) => void;\n  defaultValue: number;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [value, setInnerValue] = useState(defaultValue);\n  const wrapperRef = useRef(null);\n  useOutsideTrigger(wrapperRef, () => setIsOpen(false));\n\n  const currentValue = permissionLevels.reduce((prevValue, currValue) => {\n    if (currValue.value > prevValue.value && currValue.value <= defaultValue) {\n      return currValue;\n    }\n\n    return prevValue;\n  }, permissionLevels[0]);\n\n  const setValue = (value: number) => {\n    setInnerValue(value);\n    onChange(value);\n  };\n\n  return (\n    <div className={className ?? ''}>\n      <div\n        className=\"relative cursor-pointer rounded-md bg-slate-100 dark:bg-slate-800\"\n        onClick={() => setIsOpen(!isOpen)}\n        ref={wrapperRef}\n      >\n        <div className=\"flex min-w-[6rem] flex-row py-1 px-2\">\n          <span className=\"my-auto mr-2 select-none\">{currentValue.name}</span>{' '}\n          <Triangle className=\"my-auto ml-auto h-2 w-2 rotate-90\" />\n        </div>\n        <ul\n          className={`absolute top-[100%] right-0 overflow-hidden bg-white dark:bg-slate-800 ${\n            isOpen\n              ? 'z-10 max-h-[30rem] border border-slate-100 py-3 shadow-2xl dark:border-slate-700'\n              : 'max-h-0'\n          }`}\n        >\n          {permissionLevels.map((level) => (\n            <Option\n              key={level.value}\n              isChecked={level.value === 0 ? value === level.value : value >= level.value}\n              onChange={() => (value !== level.value ? setValue(level.value) : setValue(0))}\n            >\n              {level.name}\n            </Option>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Option = ({\n  className,\n  isChecked,\n  children,\n  onChange,\n}: {\n  className?: string;\n  isChecked: boolean;\n  children: ReactNode;\n  onChange: () => void;\n}) => {\n  return (\n    <li\n      className={`flex min-w-[6rem] cursor-pointer select-none flex-row py-1 px-4 hover:bg-slate-100 dark:hover:bg-slate-700 ${className}`}\n      onClick={onChange}\n    >\n      <Check\n        className={`my-auto mr-3 h-4 w-4 ${\n          isChecked ? 'text-slate-700 dark:text-slate-200' : 'text-transparent'\n        }`}\n      />{' '}\n      <span className={`mr-auto block h-full py-1`}>{children}</span>\n    </li>\n  );\n};\n\nexport default PermissionLevelEditor;\n","import { FC } from 'react';\n\nconst Check: FC<IconProps> = ({ className }) => {\n  return (\n    <svg\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"3\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M22 11.08V12a10 10 0 11-5.93-9.14\"></path>\n      <path d=\"M22 4L12 14.01l-3-3\"></path>\n    </svg>\n  );\n};\n\nexport default Check;\n","import { FC } from 'react';\n\nconst Triangle: FC<IconProps> = ({ className }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 384 512\"\n      fill=\"currentColor\"\n      className={className}\n    >\n      <path d=\"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z\" />\n    </svg>\n  );\n};\n\nexport default Triangle;\n","import { FC, ReactNode } from 'react';\nimport { Link } from 'react-router-dom';\nimport SaveStatus from '../../Buttons/SaveStatus';\n\nconst PageMeta = ({\n  title,\n  actions,\n  saveStatus,\n  breadCrumbs,\n  icon,\n}: {\n  title?: ReactNode;\n  actions?: ReactNode;\n  saveStatus?: 'error' | 'idle' | 'loading' | 'success';\n  breadCrumbs?: { title: string; href?: string }[];\n  icon?: FC;\n}) => {\n  return (\n    <section\n      className=\"-my-8 -mx-10 mb-10 border-b-2 border-gray-100 bg-slate-50 py-8\n    px-10 dark:border-gray-700 dark:bg-slate-800\"\n    >\n      <div className=\"flex flex-row\">\n        <div className=\"flex-col\">\n          {breadCrumbs && (\n            <ul className=\"mb-2 hidden flex-row sm:flex\">\n              {breadCrumbs.map((crumb, index) => {\n                return (\n                  <li key={index} className=\"mr-2\">\n                    {crumb.href ? (\n                      <Link to={crumb.href} className=\"\">\n                        {crumb.title}\n                        <span className=\"ml-2\">{'>'}</span>\n                      </Link>\n                    ) : (\n                      <span className=\"text-slate-500\">{crumb.title}</span>\n                    )}\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n          {title && (\n            <h1 className=\"mb-5 flex flex-row text-4xl dark:text-white\">\n              {icon && icon({ className: 'h-8 w-8 my-auto mr-4' })} {title}\n            </h1>\n          )}\n        </div>\n        <div className=\"ml-auto \">\n          <div className=\"flex flex-row\">{actions}</div>\n          {saveStatus && <SaveStatus className=\"mt-1\" state={saveStatus} />}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default PageMeta;\n","import { ReactNode } from 'react';\n\nconst Section = ({\n  title,\n  className,\n  children,\n  isOpaqueBg = false,\n  isBorderLess = false,\n}: {\n  title?: ReactNode;\n  className?: string;\n  children: ReactNode;\n  isOpaqueBg?: boolean;\n  isBorderLess?: boolean;\n}) => {\n  return (\n    <section\n      className={`my-5 rounded-md ${\n        isOpaqueBg\n          ? isBorderLess\n            ? ''\n            : 'rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700'\n          : 'bg-slate-50 px-5 dark:bg-slate-800'\n      } dark:text-slate-300 ${className ?? ''}`}\n    >\n      {title ? (\n        <div\n          className={`relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700`}\n        >\n          <h3 className=\"text-2xl dark:text-white\">{title}</h3>\n        </div>\n      ) : null}\n      <div className=\"py-5 \">{children}</div>\n    </section>\n  );\n};\n\nexport default Section;\n","import { useState } from 'react';\nimport { t } from '../../../helpers/i18n/dictionary';\nimport useDrives from '../../../hooks/drives/useDrives';\nimport { CircleDefinition } from '../../../provider/connections/CirlceDataTypes';\nimport {\n  circlePermissionLevels,\n  drivePermissionLevels,\n} from '../../../provider/permission/permissionLevels';\nimport PermissionFlagsEditor from '../../Form/PermissionFlagsEditor';\nimport PermissionLevelEditor from '../../Form/PermissionLevelEditor';\nimport Cog from '../../Icons/Cog/Cog';\nimport PageMeta from '../../Layout/PageMeta/PageMeta';\nimport Section from '../../Sections/Section';\n\nconst Settings = () => {\n  return (\n    <>\n      <PageMeta icon={Cog} title={`${t('Settings')}`} />\n      <AllConnectionSettings />\n    </>\n  );\n};\n\nconst AllConnectionSettings = () => {\n  const { data: drives } = useDrives().fetch;\n\n  const [newCircleDefinition, setNewCircleDefinition] = useState<CircleDefinition>({\n    name: 'All',\n    description: '',\n    permissions: { keys: [0] },\n    drives: [],\n  });\n\n  return (\n    <Section title={t('General settings for all connections')}>\n      <div className=\"mb-5 flex flex-row\">\n        <label htmlFor=\"name\" className=\"my-auto mr-2\">\n          {t('Connections can:')}\n        </label>\n        <PermissionFlagsEditor\n          className=\"ml-auto\"\n          permissionLevels={circlePermissionLevels}\n          defaultValue={newCircleDefinition.permissions.keys ?? [0]}\n          onChange={(newValue) => {\n            setNewCircleDefinition({\n              ...newCircleDefinition,\n              permissions: { keys: newValue },\n            });\n          }}\n        />\n      </div>\n      {drives?.length ? (\n        <div className=\"my-10\">\n          <h2 className=\"mb-4 text-2xl\">Per Drive Permissions:</h2>\n\n          {drives.map((drive, index) => {\n            return (\n              <div key={index} className=\"mb-2 flex flex-row\">\n                <label\n                  htmlFor={`${drive.targetDriveInfo.alias}-${drive.targetDriveInfo.type}`}\n                  className=\"my-auto mr-2\"\n                >\n                  {drive.name}\n                </label>\n                <PermissionLevelEditor\n                  className=\"ml-auto\"\n                  permissionLevels={drivePermissionLevels}\n                  defaultValue={\n                    newCircleDefinition.drives?.find(\n                      (driveGrant) =>\n                        driveGrant.drive.alias === drive.targetDriveInfo.alias &&\n                        driveGrant.drive.type === drive.targetDriveInfo.type\n                    )?.permission ?? 0\n                  }\n                  onChange={(value) => {\n                    if (value > 0) {\n                      setNewCircleDefinition({\n                        ...newCircleDefinition,\n                        drives: [\n                          ...newCircleDefinition.drives.filter(\n                            (driveGrant) =>\n                              driveGrant.drive.alias !== drive.targetDriveInfo.alias ||\n                              driveGrant.drive.type !== drive.targetDriveInfo.type\n                          ),\n                          { drive: drive.targetDriveInfo, permission: value },\n                        ],\n                      });\n                    } else {\n                      setNewCircleDefinition({\n                        ...newCircleDefinition,\n                        drives: [\n                          ...newCircleDefinition.drives.filter(\n                            (driveGrant) =>\n                              driveGrant.drive.alias !== drive.targetDriveInfo.alias ||\n                              driveGrant.drive.type !== drive.targetDriveInfo.type\n                          ),\n                        ],\n                      });\n                    }\n                  }}\n                />\n              </div>\n            );\n          })}\n        </div>\n      ) : null}\n    </Section>\n  );\n};\n\nexport default Settings;\n","import { useEffect } from 'react';\n\n/**\n * Hook that alerts clicks outside of the passed ref\n */\nfunction useOutsideTrigger(ref, onClick: () => void) {\n  useEffect(() => {\n    /**\n     * Alert if clicked on outside of element\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClick();\n      }\n    }\n    // Bind the event listener\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [ref]);\n}\n\nexport default useOutsideTrigger;\n","import { useQuery } from '@tanstack/react-query';\nimport { ApiType, CoreClient } from '@youfoundation/transit-lib';\nimport useAuth from '../auth/useAuth';\n\nconst useDrives = () => {\n  const { getSharedSecret } = useAuth();\n  const client = new CoreClient({ api: ApiType.Owner, sharedSecret: getSharedSecret() });\n\n  const fetchAll = async () => {\n    return await (\n      await client.driveProvider.GetDrives({ pageNumber: 1, pageSize: 100 })\n    ).results;\n  };\n\n  return {\n    fetch: useQuery(['drives'], () => fetchAll(), {\n      refetchOnWindowFocus: false,\n    }),\n  };\n};\n\nexport default useDrives;\n","import { t } from '../../helpers/i18n/dictionary';\n\nexport const drivePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Reader'), value: 1 },\n  { name: t('Editor'), value: 3 },\n];\n\nexport const circlePermissionLevels = [\n  { name: t('None'), value: 0 },\n  { name: t('Read Connections'), value: 10 },\n  { name: t('Read Connection Requests'), value: 30 },\n  { name: t('Read Circle Members'), value: 50 },\n];\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["className","state","useState","lastSave","setLastSave","Date","now","setNow","useEffect","timer","setTimeout","clearTimeout","diff","getTime","text","toLocaleString","Option","isChecked","children","onChange","onClick","permissionLevels","defaultValue","isOpen","setIsOpen","value","setInnerValue","wrapperRef","useRef","useOutsideTrigger","currentValue","length","find","level","name","setValue","ref","map","some","val","filter","reduce","prevValue","currValue","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","d","xmlns","title","actions","saveStatus","breadCrumbs","icon","crumb","index","href","to","isOpaqueBg","isBorderLess","AllConnectionSettings","drives","useDrives","fetch","data","description","permissions","keys","newCircleDefinition","setNewCircleDefinition","t","htmlFor","circlePermissionLevels","newValue","drive","targetDriveInfo","alias","type","drivePermissionLevels","driveGrant","permission","Cog","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","getSharedSecret","useAuth","client","CoreClient","api","ApiType","sharedSecret","fetchAll","driveProvider","GetDrives","pageNumber","pageSize","results","useQuery","refetchOnWindowFocus","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}