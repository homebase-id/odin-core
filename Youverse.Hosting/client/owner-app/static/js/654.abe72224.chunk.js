"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[654],{4654:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n,a,s=r(4165),o=r(5861),i=r(885),c=r(6117);!function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=4]="Write"}(n||(n={})),function(e){e[e.None=0]="None",e[e.ReadConnections=10]="ReadConnections",e[e.ReadConnectionRequests=30]="ReadConnectionRequests",e[e.ReadCircleMembers=50]="ReadCircleMembers"}(a||(a={}));var p=r(2791),u=r(3504),l=r(4180),f=r(1803),d=r(9779),h=r.n(d),y=r(3689),v=r.n(y),m=r(184),g=function(){var e=(0,c.Z)().getSharedSecret,t=(0,u.lr)(),r=(0,i.Z)(t,1)[0],d=(0,p.useState)(),y=(0,i.Z)(d,2),g=y[0],x=y[1],_=(0,p.useState)(),w=(0,i.Z)(_,2),b=w[0],j=w[1],Z=(0,p.useState)(null),S=(0,i.Z)(Z,2),k=S[0],C=S[1],N=(0,p.useState)(null),O=(0,i.Z)(N,2),R=O[0],A=O[1],P=(0,p.useState)(null),I=(0,i.Z)(P,2),E=I[0],J=I[1],q=(0,p.useState)(),M=(0,i.Z)(q,2),T=M[0],$=M[1],B=new l.Z(e()),G=new f.l$({api:f.Ii.Owner,sharedSecret:e()}),L={drive:{alias:f.j4.toByteArrayId("chatr-drive"),type:f.j4.toByteArrayId("chat-data")},permission:n.Read|n.Write},W={keys:[a.ReadConnectionRequests,a.ReadConnections]};(0,p.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={appId:f.j4.toByteArrayId("chat-r-box"),name:"Chatrbox",permissionSet:W,drives:[L]},n={appId:t.appId,clientPublicKey64:r.get("pk"),clientFriendlyName:r.get("fn")},e.next=4,B.GetAppRegistration({appId:t.appId});case 4:a=e.sent,J(a),C(t),A(n),$(r.get("rs")),x(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]);var D=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.EnsureDrive(L.drive,"Chat Drive","Chatr drive",!1);case 2:return e.next=4,B.RegisterApp(k);case 4:return e.next=6,H();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.RegisterChatAppClient_temp(R);case 2:t=e.sent,r=encodeURI(t.data),n="".concat(T,"?d=").concat(r,"&v=").concat(t.encryptionVersion),j(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?b?(0,m.jsxs)("div",{className:"container mx-auto",children:["You have approved the app...",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("a",{href:b,children:"Click to continue..."}),(0,m.jsx)("br",{})]}):(0,m.jsx)("section",{className:"mt-20",children:(0,m.jsx)("div",{className:"container mx-auto",children:(0,m.jsxs)("div",{className:"-m-5 flex flex-wrap",children:[g&&null==E&&(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"px-5",children:["App with id ",k.appId," is not registered.",(0,m.jsx)("br",{}),"Clicking OK will approve the app for use and register this client"]}),(0,m.jsx)("div",{className:"px-5",children:(0,m.jsx)("a",{onClick:D,className:"mt-10 block rounded border-0 bg-green-500 py-2 px-4 text-white hover:bg-green-600 focus:outline-none",children:"Register Now"})})]}),g&&null!=E&&(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"px-5",children:[(0,m.jsxs)("div",{className:"pb-2",children:["The App '",null===E||void 0===E?void 0:E.name,"' is registered"]}),(0,m.jsx)(h(),{id:"json-pretty",theme:v(),data:f.j4.JsonStringify64(E)})]}),(0,m.jsx)("div",{className:"px-5",children:(0,m.jsx)("a",{onClick:H,className:"mt-10 block rounded border-0 bg-green-500 py-2 px-4 text-white hover:bg-green-600 focus:outline-none",children:"Register this Client"})})]})]})})}):(0,m.jsx)("div",{children:"Loading..."})}},4180:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(4165),a=r(5861),s=r(5671),o=r(3144),i=r(9340),c=r(1129),p=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,o.Z)(r,[{key:"RegisterAppClient",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/client",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"RegisterChatAppClient_temp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/chatclient_temp",t);case 3:return a=e.sent,console.log("RegisterChatAppClient_temp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"RegisterApp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/register/app",t);case 3:return a=e.sent,console.log("RegisterApp returning response"),console.log(a),e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetAppRegistration",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/app",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetAppRegistrations",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.createAxiosClient(),e.next=3,t.get("appmanagement/list");case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"RevokeApp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/revoke",t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"AllowApp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAxiosClient(),e.next=3,r.post("appmanagement/allow",t);case 3:a=e.sent,console.log(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e){return r.instance||(r.instance=new r(e)),r.instance}}]),r}(r(2008).$);p.instance=void 0},9779:function(e,t,r){var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=o(r(2007)),c=o(r(2791));function p(e,t,r){var n=function(e,t,r){var n=r[e+"Style"]||"",a=t&&t[e]||"";return n?n+";"+a:a}(e,t,r);return n?' style="'+n+'"':""}var u={'"':"&quot;","'":"&apos;","&":"&amp;",">":"&gt;","<":"&lt"};var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e,t=this.props,r=t.json,n=t.data,o=t.replacer,i=t.space,l=t.themeClassName,f=t.theme,d=t.onJSONPrettyError,h=t.onError,y=t.silent,v=t.mainStyle,m=t.keyStyle,g=t.valueStyle,x=t.stringStyle,_=t.booleanStyle,w=t.errorStyle,b=s(t,["json","data","replacer","space","themeClassName","theme","onJSONPrettyError","onError","silent","mainStyle","keyStyle","valueStyle","stringStyle","booleanStyle","errorStyle"]),j={mainStyle:v,keyStyle:m,valueStyle:g,stringStyle:x,booleanStyle:_,errorStyle:w},Z=n||r;if("string"===typeof Z)try{Z=JSON.parse(Z)}catch(S){return y||console.warn("[react-json-pretty]: "+S.message),d&&d(S),!d&&h&&(h(S),console.warn("JSONPretty#onError is deprecated, please use JSONPretty#onJSONPrettyError instead")),c.createElement("div",a({},b,{dangerouslySetInnerHTML:{__html:'<pre class="__json-pretty-error__"'+p("error",f,j)+">"+(e=Z,(e?e.replace(/<|>|&|"|'/g,(function(e){return u[e]})):e)+"</pre>")}}))}return c.createElement("div",a({},b,{dangerouslySetInnerHTML:{__html:'<pre class="'+l+'"'+p("main",f,j)+">"+this._pretty(f,Z,o,+i,j)+"</pre>"}}))},t.prototype._pretty=function(e,t,r,n,a){var s=JSON.stringify(t,"function"===typeof r?r:null,isNaN(n)?2:n);return s?s.replace(/&/g,"&amp;").replace(/\\"([^,])/g,"\\&quot;$1").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^( *)("[^"]+": )?("[^"]*"|[\w.+-]*)?([,[{]|\[\s*\],?|\{\s*\},?)?$/gm,this._replace.bind(null,e,a)):s},t.prototype._replace=function(e,t,r,n,a,s,o){var i="</span>",c='<span class="__json-key__"'+p("key",e,t)+">",u='<span class="__json-value__"'+p("value",e,t)+">",l='<span class="__json-string__"'+p("string",e,t)+">",f='<span class="__json-boolean__"'+p("boolean",e,t)+">",d=n||"";return a&&(d=d+'"'+c+a.replace(/^"|":\s$/g,"")+'</span>": '),s&&(d="true"===s||"false"===s?d+f+s+i:d+('"'===s[0]?l:u)+s+i),d+(o||"")},t.propTypes={data:i.any,json:i.any,replacer:i.func,silent:i.bool,space:i.oneOfType([i.number,i.string]),theme:i.object,themeClassName:i.string,onJSONPrettyError:i.func},t.defaultProps={data:"",json:"",silent:!0,space:2,themeClassName:"__json-pretty__"},t}(c.Component);e.exports=l},3689:function(e){e.exports={main:"line-height:1.3;color:#66d9ef;background:#272822;overflow:auto;",error:"line-height:1.3;color:#66d9ef;background:#272822;overflow:auto;",key:"color:#f92672;",string:"color:#fd971f;",value:"color:#a6e22e;",boolean:"color:#ac81fe;"}}}]);
//# sourceMappingURL=654.abe72224.chunk.js.map