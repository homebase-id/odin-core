"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[255],{8532:function(t,e,n){var r=n(2982),o=n(885),a=n(2791),s=n(4164),u=n(4990),c=n(4395),i=n(3412),p=n(9072),l=n(6419),d=n(6123),f=n(184);e.Z=function(t){var e=t.title,n=t.confirmText,h=t.children,Z=t.isOpen,v=t.onConfirm,y=t.onCancel,x=(0,i.Z)("modal-container"),g=(0,c.Z)().fetch.data,m=(0,a.useState)([]),k=(0,o.Z)(m,2),w=k[0],b=k[1];if(!Z)return null;var R=(0,f.jsx)(d.Z,{title:e,onClose:y,children:(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v(w)},children:[h&&(0,f.jsx)("div",{className:"mt-2",children:h}),g.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("h2",{className:"my-4 text-lg",children:[(0,u.t)("Add as member to"),":"]}),g.map((function(t,e){var n;return(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)(l.Z,{value:t.id,id:t.id,onChange:function(t){var e=(0,r.Z)(w);t.target.checked?(e.push(t.target.value),b(e)):b(e.filter((function(e){return e!==t.target.value})))}}),(0,f.jsx)("label",{htmlFor:t.id,className:"ml-2 cursor-pointer",children:t.name})]},null!==(n=t.id)&&void 0!==n?n:e)}))]}):null,(0,f.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,f.jsx)(p.Z,{className:"m-2",icon:"send",children:null!==n&&void 0!==n?n:(0,u.t)("Accept")}),(0,f.jsx)(p.Z,{className:"m-2",type:"secondary",onClick:y,children:(0,u.t)("Cancel")})]})]})})});return(0,s.createPortal)(R,x)}},6419:function(t,e,n){var r=n(1413),o=n(184);e.Z=function(t){return(0,o.jsx)("input",(0,r.Z)((0,r.Z)({},t),{},{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600 ".concat(t.className)}))}},8491:function(t,e,n){var r=n(184);e.Z=function(t){var e=t.title,n=t.className,o=t.children,a=t.isOpaqueBg,s=void 0!==a&&a,u=t.isBorderLess,c=void 0!==u&&u;return(0,r.jsxs)("section",{className:"my-5 rounded-md ".concat(s?c?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800"," dark:text-slate-300 ").concat(null!==n&&void 0!==n?n:""),children:[e?(0,r.jsx)("div",{className:"relative border-b-[1px] border-gray-200 border-opacity-80 py-5 transition-all duration-300 dark:border-gray-700",children:(0,r.jsx)("h3",{className:"text-2xl dark:text-white",children:e})}):null,(0,r.jsx)("div",{className:"py-5 ",children:o})]})}},3990:function(t,e,n){n.d(e,{P:function(){return o},V:function(){return r}});var r=function(t){return t.split(" ").join("-").toLowerCase()},o=function(t){return Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")}},4395:function(t,e,n){var r=n(4165),o=n(5861),a=n(7408),s=n(3766),u=n(6117);e.Z=function(){var t=(0,u.Z)().getSharedSecret,e=s.k.getInstance(t()),n=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCircles();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{fetch:(0,a.useQuery)(["circles"],(function(){return n()}),{refetchOnWindowFocus:!1})}}},7903:function(t,e,n){var r=n(2982),o=n(4165),a=n(5861),s=n(7408),u=n(7186),c=n(5144),i=n(6117);e.Z=function(t){var e=t.dotYouId,n=(0,s.useQueryClient)(),p=(0,i.Z)().getSharedSecret,l=u.I.getInstance(p()),d=c.e.getInstance(p()),f=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var n,r,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.dotYouId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,l.getConnectionInfo(n);case 5:if(!(r=t.sent)||"None"===r.status){t.next=8;break}return t.abrupt("return",r);case 8:return t.next=10,d.getPendingRequest(n);case 10:if(!(a=t.sent)){t.next=13;break}return t.abrupt("return",a);case 13:return t.next=15,d.getSentRequest(n);case 15:return s=t.sent,t.abrupt("return",null!==s&&void 0!==s?s:r);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.connectionDotYouId,t.next=3,l.disconnectFromContact(null!==r&&void 0!==r?r:e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var n,r,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.targetDotYouId,r=e.message,a=e.name,s=e.circleIds,t.next=3,d.sendRequest(n,r,a,s);case 3:return t.abrupt("return",{targetDotYouId:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.targetDotYouId,t.next=3,d.deleteSentRequest(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.senderDotYouId,r=e.circleIds,t.next=3,d.acceptConnectionRequest(n,r);case 3:return t.abrupt("return",{senderDotYouId:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.senderDotYouId,t.next=3,d.deletePendingRequest(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{fetch:(0,s.useQuery)(["connectionInfo",e],(function(){return f({dotYouId:e})}),{refetchOnWindowFocus:!1}),disconnect:(0,s.useMutation)(h,{onSuccess:function(t,e){n.invalidateQueries(["activeConnections"]),n.invalidateQueries(["connectionInfo",e])},onError:function(t){console.error(t)}}),sendConnectionRequest:(0,s.useMutation)(Z,{onMutate:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.cancelQueries(["sentRequests"]);case 2:return a=n.getQueryData(["sentRequests"]),s=[{status:"sent",recipient:e.targetDotYouId}].concat((0,r.Z)(a)),n.setQueryData(["sentRequests"],s),t.abrupt("return",{previousRequests:a,newRequest:e});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,e,r){console.error(t),n.setQueryData(["sentRequests"],r.previousRequests)},onSettled:function(t){n.invalidateQueries(["sentRequests"]),n.invalidateQueries(["connectionInfo",t.targetDotYouId])}}),revokeConnectionRequest:(0,s.useMutation)(v,{onSuccess:function(t,e){n.invalidateQueries(["sentRequests"]),n.invalidateQueries(["connectionInfo",e.targetDotYouId])},onError:function(t){console.error(t)}}),acceptRequest:(0,s.useMutation)(y,{onMutate:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.cancelQueries(["activeConnections"]);case 2:return a=n.getQueryData(["activeConnections"]),s=[{status:"pending",dotYouId:e.senderDotYouId}].concat((0,r.Z)(a)),n.setQueryData(["activeConnections"],s),t.abrupt("return",{previousConnections:a,newRequest:e});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,e,r){console.error(t),n.setQueryData(["activeConnections"],r.previousConnections)},onSettled:function(t){n.invalidateQueries(["pendingConnections"]),n.invalidateQueries(["activeConnections"]),n.invalidateQueries(["connectionInfo",t.senderDotYouId])}}),ignoreRequest:(0,s.useMutation)(x,{onSuccess:function(t,e){n.invalidateQueries(["pendingConnections"]),n.invalidateQueries(["connectionInfo",e.senderDotYouId])},onError:function(t){console.error(t)}})}}},7186:function(t,e,n){n.d(e,{I:function(){return f}});var r=n(4165),o=n(5861),a=n(5671),s=n(3144),u=n(1752),c=n(1120),i=n(9340),p=n(1129),l=n(2008),d=n(3990),f=function(t){(0,i.Z)(n,t);var e=(0,p.Z)(n);function n(t){var r;if((0,a.Z)(this,n),!t)throw"Shared Secret is required";return(r=e.call(this,t)).root="/circles/connections",r}return(0,s.Z)(n,[{key:"blockDotYouId",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,u.Z)((0,c.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/block",s={dotYouId:e},t.abrupt("return",o.post(a,s).then((function(t){return t.data})).catch((0,u.Z)((0,c.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disconnectFromContact",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,u.Z)((0,c.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/disconnect",s={dotYouId:e},t.abrupt("return",o.post(a,s).then((function(t){return t.data})).catch((0,u.Z)((0,c.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConnections",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,u.Z)((0,c.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/connected?"+(0,d.P)(e),t.abrupt("return",o.post(a,e).then((function(t){return t.data})));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getBlockedConnections",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,u.Z)((0,c.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.root+"/blocked?"+(0,d.P)(e),t.abrupt("return",o.get(a).then((function(t){return t.data})).catch((0,u.Z)((0,c.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConnectionInfo",value:function(t){var e=(0,u.Z)((0,c.Z)(n.prototype),"createAxiosClient",this).call(this),r=this.root+"/status",o={dotYouId:t};return e.post(r,o).then((function(t){return t.data})).catch((0,u.Z)((0,c.Z)(n.prototype),"handleErrorResponse",this))}}],[{key:"getInstance",value:function(t){return n.instance||(n.instance=new n(t)),n.instance}}]),n}(l.$);f.instance=void 0},5144:function(t,e,n){n.d(e,{e:function(){return h}});var r=n(1413),o=n(4165),a=n(5861),s=n(5671),u=n(3144),c=n(1752),i=n(1120),p=n(9340),l=n(1129),d=n(2008),f=n(3990),h=function(t){(0,p.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,s.Z)(this,n),!t)throw"Shared Secret is required";return(r=e.call(this,t)).Root="/circles/requests",r.SentPathRoot=r.Root+"/sent",r.PendingPathRoot=r.Root+"/pending",r}return(0,u.Z)(n,[{key:"getPendingRequests",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var r,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.PendingPathRoot+"/list?"+(0,f.P)(e),t.abrupt("return",r.get(a).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPendingRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var a,s,u;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/single",u={dotYouId:e},t.abrupt("return",a.post(s,u).then((function(t){return(0,r.Z)((0,r.Z)({},t.data),{},{status:"Pending"})})).catch((function(){})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSentRequests",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var r,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.SentPathRoot+"/list?"+(0,f.P)(e),t.abrupt("return",r.get(a).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSentRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var a,s,u,p=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.SentPathRoot+"/single",u={dotYouId:e},t.abrupt("return",a.post(s,u).then((function(t){return(0,r.Z)((0,r.Z)({},t.data),{},{status:"Sent"})})).catch((function(t){if(404===t.response.status)return null;(0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",p).call(p,t)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"acceptConnectionRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e,r){var a,s,u;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),s=this.PendingPathRoot+"/accept/",u={sender:e,circleIds:r,permissions:null},t.abrupt("return",a.post(s,u).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deletePendingRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var r,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.PendingPathRoot+"/delete",s={dotYouId:e},t.abrupt("return",r.post(a,s).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteSentRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e){var r,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),a=this.SentPathRoot+"/delete",s={dotYouId:e},t.abrupt("return",r.post(a,s).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"sendRequest",value:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(e,r,a,s){var u,p,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.Root+"/sendrequest",p={recipient:e,message:r,name:a,circleIds:s},l=(0,c.Z)((0,i.Z)(n.prototype),"createAxiosClient",this).call(this),t.abrupt("return",l.post(u,p).then((function(t){return t.data})).catch((0,c.Z)((0,i.Z)(n.prototype),"handleErrorResponse",this)));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,o){return t.apply(this,arguments)}}()}],[{key:"getInstance",value:function(t){return n.instance||(n.instance=new n(t)),n.instance}}]),n}(d.$);h.instance=void 0}}]);
//# sourceMappingURL=255.d41475de.chunk.js.map