"use strict";(self.webpackChunkowner_app=self.webpackChunkowner_app||[]).push([[401,476],{3738:function(e,n,t){var r=t(4990),o=t(7903),s=t(9072),a=t(9835),i=t(184);n.Z=function(e){var n,t=e.dotYouProfile,c=e.className,l=(0,o.Z)({}).disconnect,u=l.mutate,d=l.status;return(0,i.jsx)(a.Z,{className:c,dotYouId:t.dotYouId,href:null!==(n=t.dotYouId&&"/owner/connections/".concat(t.dotYouId))&&void 0!==n?n:void 0,children:(0,i.jsx)(s.Z,{type:"secondary",className:"w-full",onClick:function(e){e.preventDefault(),u({connectionDotYouId:t.dotYouId})},state:d,confirmOptions:{title:"".concat((0,r.t)("Remove")," ").concat(t.dotYouId),buttonText:(0,r.t)("Remove"),body:"".concat((0,r.t)("Are you sure you want to remove")," ").concat(t.dotYouId," ").concat((0,r.t)("from your connections. They will lose all existing access."))},children:"Remove"})})}},9835:function(e,n,t){var r=t(3504),o=t(6703),s=t(9779),a=t(9006),i=t(5300),c=t(1191),l=t(184);n.Z=function(e){var n,t,u=e.dotYouId,d=e.href,m=e.isChecked,f=e.className,h=e.children,v=e.onClick,g=function(e){var n=e.children;return d?(0,l.jsx)(r.rU,{to:d,children:n}):(0,l.jsx)(l.Fragment,{children:n})},x=(0,o.Z)({dotYouId:u}).fetch,p=x.data,j=x.isLoading,w=(0,s.Z)((null===p||void 0===p?void 0:p.imageFileId)||void 0,a.F.ContactTargetDrive).fetch.data;if(j)return(0,l.jsx)(c.Z,{className:"aspect-[3/5] ".concat(f)});var Z=null===p||void 0===p?void 0:p.name,b=Z?"".concat(null!==(n=Z.givenName)&&void 0!==n?n:""," ").concat(null!==(t=Z.surname)&&void 0!==t?t:""):u;return(0,l.jsx)("div",{className:f,children:(0,l.jsx)(g,{children:(0,l.jsxs)("div",{className:"h-full rounded-md border bg-white transition-colors  ".concat(m?"border-4 border-indigo-500 dark:border-indigo-700":!1===m?"border-4":"border-gray-200 border-opacity-60 dark:border-gray-800 dark:bg-gray-800"),onClick:v,children:[(0,l.jsx)("div",{className:"aspect-square",children:"image"in p&&p.image?(0,l.jsx)("figure",{className:"relative overflow-hidden",children:(0,l.jsx)("img",{src:p.image.url,width:p.image.pixelWidth,height:p.image.pixelHeight,className:"aspect-square w-full object-cover"})}):p.imageFileId?(0,l.jsx)("figure",{className:"relative overflow-hidden",children:(0,l.jsx)("img",{src:w,className:"aspect-square object-cover "})}):(0,l.jsx)(i.Z,{initials:function(){var e,n;if(Z)return(null===(e=Z.givenName)||void 0===e?void 0:e[0])+(null===(n=Z.surname)||void 0===n?void 0:n[0])+"";var t=null===u||void 0===u?void 0:u.split(".");return(null===t||void 0===t?void 0:t.length)>=2?t[0][0]+t[1][0]+"":"--"}()})}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("h2",{className:"font-thiner mb-6 dark:text-white",children:null!==b&&void 0!==b?b:u}),h]})]})})})}},7585:function(e,n,t){var r=t(4165),o=t(5861),s=t(9439),a=t(2791),i=t(4990),c=t(7903),l=t(9072),u=t(8532),d=t(9835),m=t(184);n.Z=function(e){var n,t=e.senderDotYouId,f=e.children,h=e.className,v=(0,c.Z)({}).ignoreRequest,g=v.mutateAsync,x=v.status,p=(0,a.useState)(!1),j=(0,s.Z)(p,2),w=j[0],Z=j[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(d.Z,{className:h,dotYouId:t,href:null!==(n=t&&"/owner/connections/".concat(t))&&void 0!==n?n:void 0,children:[f,(0,m.jsxs)(l.Z,{type:"primary",className:"mb-2 w-full",onClick:function(e){return e.preventDefault(),Z(!0),!1},children:[(0,i.t)("Confirm"),"..."]}),(0,m.jsx)(l.Z,{type:"secondary",className:"mb-2 w-full",onClick:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g({senderDotYouId:t});case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),state:x,children:(0,i.t)("Ignore")})]}),(0,m.jsx)(u.Z,{isOpen:w,senderDotYouId:t,title:(0,i.t)("Accept connection request"),confirmText:(0,i.t)("Accept and give access"),onConfirm:(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(!1);case 1:case"end":return e.stop()}}),e)}))),onCancel:function(){Z(!1)}})]})}},6916:function(e,n,t){var r=t(1413),o=t(184);n.Z=function(e){var n;return(0,o.jsx)("input",(0,r.Z)((0,r.Z)({},e),{},{type:null!==(n=e.type)&&void 0!==n?n:"input",className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},2465:function(e,n,t){var r=t(1413),o=t(184);n.Z=function(e){return(0,o.jsx)("textarea",(0,r.Z)((0,r.Z)({},e),{},{className:"w-full rounded border border-gray-300 bg-white py-1 px-3 text-base leading-8 text-gray-700 outline-none transition-colors duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 ".concat(e.className)}))}},4661:function(e,n,t){var r=t(9439),o=t(2791),s=t(4665),a=t(184);n.Z=function(e){var n=e.isOpenByDefault,t=void 0===n||n,i=e.title,c=e.className,l=e.children,u=e.isOpaqueBg,d=void 0!==u&&u,m=e.isBorderLess,f=void 0!==m&&m,h=(0,o.useState)(t),v=(0,r.Z)(h,2),g=v[0],x=v[1],p=(0,o.useRef)(null),j=(0,o.useRef)(0);return(0,o.useEffect)((function(){t&&p.current&&(j.current=p.current.clientHeight)}),[g]),(0,a.jsxs)("section",{className:"my-5 rounded-md ".concat(d?f?"":"rounded-lg border-[1px] border-gray-200 border-opacity-80 px-5 dark:border-gray-700":"bg-slate-50 px-5 dark:bg-slate-800 dark:text-slate-300"," ").concat(c),children:[(0,a.jsxs)("div",{className:"relative cursor-pointer border-b-[1px] border-slate-200 py-5 transition-all duration-300 ".concat(g?"border-opacity-100":"border-opacity-0"),onClick:function(){return x(!g)},children:[(0,a.jsx)("h3",{className:"text-2xl dark:text-white",children:i}),(0,a.jsx)("button",{className:"absolute top-0 right-0 bottom-0",children:(0,a.jsx)(s.Z,{className:"h-4 w-4 transition-transform duration-300 ".concat(g?"rotate-90":"-rotate-90")})})]}),(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ",style:{maxHeight:"".concat(g?j.current?j.current:2e3:0,"px")},ref:p,children:(0,a.jsx)("div",{className:"py-5 ",children:l})})]})}},4891:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(9439),o=t(3004),s=t(4257),a=t(9072),i=t(7585),c=t(7903),l=t(9835),u=t(184),d=function(e){var n,t=e.recipientDotYouId,r=e.className,o=(0,c.Z)({}).revokeConnectionRequest,s=o.mutate,i=o.status;return(0,u.jsx)(l.Z,{className:r,dotYouId:t,href:null!==(n=t&&"/owner/connections/".concat(t))&&void 0!==n?n:void 0,children:(0,u.jsx)(a.Z,{type:"secondary",className:"mb-2 w-full",onClick:function(e){return e.preventDefault(),s({targetDotYouId:t}),!1},state:i,children:"Cancel"})})},m=t(3738),f=t(4990),h=t(8491),v=t(4661),g=t(3433),x=t(2791),p=t(4164),j=t(4395),w=t(7148),Z=t(3412),b=t(6916),N=t(4940),y=t(6234),k=t(2465),C=t(8808),I=t(8395),S=function(e){var n,t,o,s,i=e.title,l=e.isOpen,d=e.onConfirm,m=e.onCancel,h=(0,Z.Z)("modal-container"),v=(0,c.Z)({}).sendConnectionRequest,S=v.mutate,Y=v.status,q=v.reset,D=(0,j.Z)().fetch.data,F=(0,w.Z)(),O=(0,x.useState)("samwise.digital"),R=(0,r.Z)(O,2),z=R[0],B=R[1],A=(0,x.useState)("Hi, I would like to connect with you"),L=(0,r.Z)(A,2),P=L[0],T=L[1],E=(0,x.useState)({givenName:"Frodo",surname:"Underhill"}),H=(0,r.Z)(E,2),V=H[0],W=H[1],Q=(0,x.useState)(null),M=(0,r.Z)(Q,2),U=M[0],_=M[1],G=(0,x.useState)([]),J=(0,r.Z)(G,2),K=J[0],X=J[1];if(!l)return null;var $=(0,u.jsx)(I.Z,{title:i,onClose:m,size:"2xlarge",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S({message:P,name:V,photoFileId:U,targetDotYouId:z,circleIds:K},{onSuccess:function(){F(),q(),B(""),T(""),X([]),d()}})},children:[(0,u.jsxs)("div",{className:"mb-5",children:[(0,u.jsx)("label",{htmlFor:"dotyouid",children:"Recipient (dot you id)"}),(0,u.jsx)(b.Z,{id:"dotyouid",name:"dotyouid",onChange:function(e){B(e.target.value)},defaultValue:z,required:!0})]}),(0,u.jsxs)("div",{className:"mb-5",children:[(0,u.jsx)("label",{htmlFor:"message",children:(0,f.t)("Message")}),(0,u.jsx)(k.Z,{id:"message",name:"message",defaultValue:P,onChange:function(e){T(e.target.value)},required:!0})]}),(0,u.jsxs)("h2",{className:"mb-2 text-lg",children:[(0,f.t)("Your contact info"),":"]}),(0,u.jsxs)("div",{className:"mb-5",children:[(0,u.jsxs)("label",{htmlFor:"dotyouid",children:[(0,f.t)("Name"),":"]}),(0,u.jsx)(N.Z,{id:"name",name:"name",defaultValue:"".concat(V.givenName,"+").concat(V.surname),required:!0,onChange:function(e){var n=e.target.value.split("+");W({givenName:n[0],surname:n[1]})}})]}),(0,u.jsxs)("div",{className:"mb-5",children:[(0,u.jsxs)("label",{htmlFor:"name",children:[(0,f.t)("Photo"),":"]}),(0,u.jsx)(y.Z,{id:"name",defaultValue:U,onChange:function(e){_(e.target.value||void 0)},fallbackInitials:"".concat(null!==(n=null===V||void 0===V||null===(t=V.givenName)||void 0===t?void 0:t[0])&&void 0!==n?n:"").concat(null!==(o=null===V||void 0===V||null===(s=V.surname)||void 0===s?void 0:s[0])&&void 0!==o?o:"")})]}),D.length?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h2",{className:"mb-2 text-lg",children:[(0,f.t)("Add as member to one or more circles"),":"]}),D.map((function(e,n){var t,r=K.some((function(n){return n===e.id}));return(0,u.jsx)(C.Z,{circleDef:e,className:"my-4 w-full select-none rounded-lg border-2 p-4",isChecked:r,onClick:function(){var n=(0,g.Z)(K);n.some((function(n){return n===e.id}))?X(n.filter((function(n){return n!==e.id}))):(n.push(e.id),X(n))}},null!==(t=e.id)&&void 0!==t?t:n)}))]}):null,(0,u.jsxs)("div",{className:"-m-2 flex flex-row-reverse py-3",children:[(0,u.jsx)(a.Z,{className:"m-2",state:Y,icon:"send",children:(0,f.t)("Send")}),(0,u.jsx)(a.Z,{className:"m-2",type:"secondary",onClick:m,children:(0,f.t)("Cancel")})]})]})})});return(0,p.createPortal)($,h)},Y=t(959),q=t(1191),D=function(){var e=(0,s.Z)(),n=e.fetchPending,t=n.data,c=n.isLoading,l=e.fetchActive,g=l.data,p=l.isLoading,j=e.fetchSent,w=j.data,Z=j.isLoading,b=(0,x.useState)(!1),N=(0,r.Z)(b,2),y=N[0],k=N[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("section",{children:[(0,u.jsx)(o.Z,{icon:Y.Z,title:"Connections",actions:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.Z,{onClick:function(){return k(!0)},icon:"plus",className:"m-2",children:(0,f.t)("Send request")})})}),null!==t&&void 0!==t&&t.length||null!==g&&void 0!==g&&g.length||null!==w&&void 0!==w&&w.length||c||p||Z?null:(0,u.jsxs)("div",{className:"flex flex-row",children:[(0,u.jsxs)("p",{className:"my-auto",children:[(0,f.t)("Mmh, this looks empty... Time to add some connections?")," "]}),(0,u.jsx)(a.Z,{onClick:function(e){return e.preventDefault(),k(!0),!1},type:"secondary",className:"ml-2",children:(0,f.t)("Add")})]}),!c&&null!==t&&void 0!==t&&t.length?(0,u.jsx)(h.Z,{isOpaqueBg:!0,isBorderLess:!0,title:(0,f.t)("Connection requests"),children:(0,u.jsx)("div",{className:"-m-1 flex flex-row flex-wrap",children:null===t||void 0===t?void 0:t.map((function(e){return(0,u.jsx)(i.Z,{className:"w-1/2 p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",senderDotYouId:e.senderDotYouId,children:(0,u.jsx)("div",{className:"-mt-3",children:(0,u.jsx)("p",{className:"mb-3 text-sm",children:e.message})})},e.senderDotYouId)}))})}):null,null!==g&&void 0!==g&&g.length||p?(0,u.jsx)(h.Z,{isOpaqueBg:!0,isBorderLess:!0,title:(0,f.t)("Your Connections"),children:(0,u.jsxs)("div",{className:"-m-1 flex flex-row flex-wrap",children:[p&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(q.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"}),(0,u.jsx)(q.Z,{className:"m-1 aspect-square w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"})]}),null===g||void 0===g?void 0:g.map((function(e){return(0,u.jsx)(m.Z,{className:"w-1/2 p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",dotYouProfile:e},e.dotYouId)}))]})}):null,!Z&&null!==w&&void 0!==w&&w.length?(0,u.jsx)(v.Z,{isOpaqueBg:!0,isBorderLess:!0,isOpenByDefault:!0,title:(0,f.t)("Sent Connection Requests"),children:(0,u.jsx)("div",{className:"-m-1 flex flex-row flex-wrap",children:null===w||void 0===w?void 0:w.map((function(e){return(0,u.jsx)(d,{className:"w-1/2 p-1 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6",recipientDotYouId:e.recipient},e.recipient)}))})}):null]}),(0,u.jsx)(S,{title:(0,f.t)("Send connection request"),isOpen:y,onConfirm:function(){return k(!1)},onCancel:function(){return k(!1)}})]})}},4257:function(e,n,t){var r=t(4165),o=t(5861),s=t(7408),a=t(7186),i=t(5144),c=t(6117);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:10},n=e.pageSize,t=(0,c.Z)(),l=t.getSharedSecret,u=i.e.getInstance(l()),d=a.I.getInstance(l()),m=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.pageSize,e.next=3,u.getPendingRequests({pageNumber:1,pageSize:t});case 3:return e.next=5,e.sent.results;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.pageSize,e.next=3,u.getSentRequests({pageNumber:1,pageSize:t});case 3:return e.next=5,e.sent.results;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.pageSize,e.next=3,d.getConnections({pageNumber:1,pageSize:t});case 3:return e.next=5,e.sent.results;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetchPending:(0,s.useQuery)(["pendingConnections",n],(function(){return m({pageSize:n})}),{refetchOnWindowFocus:!1,onError:function(e){return console.error(e)}}),fetchSent:(0,s.useQuery)(["sentRequests",n],(function(){return f({pageSize:n})}),{refetchOnWindowFocus:!1,onError:function(e){return console.error(e)}}),fetchActive:(0,s.useQuery)(["activeConnections",n],(function(){return h({pageSize:n})}),{refetchOnWindowFocus:!1,onError:function(e){return console.error(e)}})}}}}]);
//# sourceMappingURL=401.77f9d247.chunk.js.map